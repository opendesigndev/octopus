(function(lt,ce){typeof exports=="object"&&typeof module!="undefined"?ce(exports):typeof define=="function"&&define.amd?define(["exports"],ce):(lt=typeof globalThis!="undefined"?globalThis:lt||self,ce(lt.OctopusFig={}))})(this,function(lt){"use strict";var lL=Object.defineProperty,cL=Object.defineProperties;var fL=Object.getOwnPropertyDescriptors;var kh=Object.getOwnPropertySymbols;var hL=Object.prototype.hasOwnProperty,dL=Object.prototype.propertyIsEnumerable;var Lh=(lt,ce,vt)=>ce in lt?lL(lt,ce,{enumerable:!0,configurable:!0,writable:!0,value:vt}):lt[ce]=vt,Te=(lt,ce)=>{for(var vt in ce||(ce={}))hL.call(ce,vt)&&Lh(lt,vt,ce[vt]);if(kh)for(var vt of kh(ce))dL.call(ce,vt)&&Lh(lt,vt,ce[vt]);return lt},st=(lt,ce)=>cL(lt,fL(ce));var ce=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function vt(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),e}function Rh(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var mn={};Object.defineProperty(mn,"__esModule",{value:!0});var au=mn.benchmarkAsync=mn.benchmark=void 0;function Mh(t){const e=performance.now(),n=t(),a=performance.now()-e;return{result:n,time:a}}mn.benchmark=Mh;async function $h(t){const e=performance.now(),n=await t(),a=performance.now()-e;return{result:n,time:a}}au=mn.benchmarkAsync=$h;var lr={};Object.defineProperty(lr,"__esModule",{value:!0}),lr.sleep=lr.rejectTo=ou=lr.detachPromiseControls=void 0;function Nh(){let t,e;return{promise:new Promise((a,u)=>{t=a,e=u}),resolve:t,reject:e}}var ou=lr.detachPromiseControls=Nh;function Dh(t,e=null){return Promise.resolve(t).then(n=>n,()=>e)}lr.rejectTo=Dh;function Fh(t){return new Promise(e=>{setTimeout(()=>{e()},t)})}lr.sleep=Fh;var Ke={},zh=new Proxy({},{get(){throw new Error('Module "util" has been externalized for browser compatibility and cannot be accessed in client code.')}}),jh=Object.freeze(Object.defineProperty({__proto__:null,default:zh},Symbol.toStringTag,{value:"Module"})),Bh=vt(jh);function qh(t){return t!=null&&typeof t=="object"}var wr=qh,uu=ce&&ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ke,"__esModule",{value:!0});var mt=Ke.push=fu=Ke.keys=cu=Ke.traverseAndFind=ai=Ke.getConverted=Ke.getPresentProps=Xt=Ke.getMapped=js=Ke.isObject=Ke.deepInspect=Ke.JSONFromTypedArray=void 0;const Uh=uu(Bh),Hh=uu(wr);function Vh(t){return JSON.parse(Buffer.from(t).toString())}Ke.JSONFromTypedArray=Vh;function Gh(t){return Uh.default.inspect(t,{depth:null})}Ke.deepInspect=Gh;function Wh(t){return Boolean(t&&(typeof t=="object"||typeof t=="function"))}var js=Ke.isObject=Wh;function Kh(t,e,n){return typeof t!="string"?n:t&&t in e?e[t]:n}var Xt=Ke.getMapped=Kh;function Yh(t,e=[]){return Object.fromEntries(Object.entries(t).filter(([,n])=>n!=null&&!e.includes(n)))}Ke.getPresentProps=Yh;function Jh(t){return t.map(e=>e.convert()).filter(e=>e)}var ai=Ke.getConverted=Jh;function lu(t,e){return[e(t),...Object.values(t).reduce((n,a)=>(0,Hh.default)(a)?[...n,...lu(a,e)]:n,[])]}function Zh(t,e){return lu(t,e).filter(n=>n!==void 0)}var cu=Ke.traverseAndFind=Zh;function Xh(t){return Object.keys(t)}var fu=Ke.keys=Xh;function Qh(t,...e){return t.push(...e),t}mt=Ke.push=Qh;var Bs={};Object.defineProperty(Bs,"__esModule",{value:!0});var hu=Bs.Queue=void 0;const ed=lr;class td{constructor(e){const{name:n,factory:a,parallels:u,drainLimit:c=1}=e;this._name=n,this._factory=a,this._available=u,this._drainLimit=c,this._tasks=[],this._awaiting=[],this._working=0}get status(){return{name:this._name,available:this._available,working:this._working,enqueued:this._awaiting.length}}_getTasks(){return typeof this._drainLimit=="number"?this._tasks.splice(0,this._drainLimit):this._tasks.splice(0)}_finalizeTask(){this._working--,this._available++,queueMicrotask(()=>this._try())}_try(){if(this._available>0&&this._awaiting.length){this._available--;const e=this._awaiting.shift();typeof e=="function"&&e()}}_resolveTasksWithResults(e,n){if(this._finalizeTask(),!Array.isArray(n)||e.length!==n.length)throw new Error("Results are not an array or has different length than tasks input.");n.forEach((a,u)=>{const{value:c,error:p}=a,{resolve:E,reject:k}=e[u];queueMicrotask(()=>{p?k(p):E(c)})})}_rejectTasks(e,n){this._finalizeTask(),e.forEach(a=>a.reject(n))}_createRunner(){return async()=>{this._working++;const e=this._getTasks();if(!e.length){this._finalizeTask();return}try{const n=await this._factory(e.map(a=>a.task));this._resolveTasksWithResults(e,n)}catch(n){this._rejectTasks(e,n)}}}exec(e){const{promise:n,resolve:a,reject:u}=(0,ed.detachPromiseControls)();return this._tasks.push({task:e,resolve:a,reject:u}),this._awaiting.push(this._createRunner()),queueMicrotask(()=>this._try()),n}}hu=Bs.Queue=td;var oi,rd=new Uint8Array(16);function nd(){if(!oi&&(oi=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!oi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return oi(rd)}var id=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function sd(t){return typeof t=="string"&&id.test(t)}for(var ct=[],qs=0;qs<256;++qs)ct.push((qs+256).toString(16).substr(1));function ad(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(ct[t[e+0]]+ct[t[e+1]]+ct[t[e+2]]+ct[t[e+3]]+"-"+ct[t[e+4]]+ct[t[e+5]]+"-"+ct[t[e+6]]+ct[t[e+7]]+"-"+ct[t[e+8]]+ct[t[e+9]]+"-"+ct[t[e+10]]+ct[t[e+11]]+ct[t[e+12]]+ct[t[e+13]]+ct[t[e+14]]+ct[t[e+15]]).toLowerCase();if(!sd(n))throw TypeError("Stringified UUID is invalid");return n}function Us(t,e,n){t=t||{};var a=t.random||(t.rng||nd)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,e){n=n||0;for(var u=0;u<16;++u)e[n+u]=a[u];return e}return ad(a)}const Hs=class{constructor(t){this._sourceDesign=t.sourceDesign,this._octopusConverter=t.octopusConverter,this._exports={images:new Map,previews:new Map,artboards:new Map,artboardImageMap:new Map}}setExportedImagePath(t,e){this._exports.images.set(t,e)}getExportedImagePath(t){return this._exports.images.get(t)}setExportedPreviewPath(t,e){this._exports.images.set(t,e)}getExportedPreviewPath(t){return this._exports.images.get(t)}setExportedArtboardImageMap(t,e){this._exports.artboardImageMap.set(t,e)}getExportedArtboardImageMap(t){return this._exports.artboardImageMap.get(t)}getExportedArtboardById(t){return this._exports.artboards.get(t)}getExportedArtboardPathById(t){const e=this._exports.artboards.get(t);if(typeof(e==null?void 0:e.path)=="string")return e.path}setExportedArtboard(t,e){this._exports.artboards.set(t,e)}get manifestVersion(){return this._octopusConverter.pkg.version}get figVersion(){var t;return(t=this._sourceDesign.schemaVersion)!=null?t:Hs.DEFAULT_FIG_VERSION}get name(){var t;return(t=this._sourceDesign.name)!=null?t:Hs.DEFAULT_FIG_FILENAME}_convertError(t){return t?{code:-1,message:t.message,stacktrace:t.stack?t.stack.split(`
`):void 0}:void 0}get pages(){return this._sourceDesign.pages.map(t=>({id:t.id,name:t.name,children:t.children.map(e=>({id:e.id,type:"COMPONENT"}))}))}_getStatus(t){var a;const e=this.getExportedArtboardById(t.id);return{value:e?e.error?"FAILED":"READY":"PROCESSING",error:this._convertError(e==null?void 0:e.error),time:(a=e==null?void 0:e.time)!=null?a:void 0}}_getAssetImage(t){var a;const e=(a=this.getExportedImagePath(t))!=null?a:"";return{location:{type:"RELATIVE",path:e},refId:t}}_getAssetImages(t){return t.reduce((e,n)=>{const a=this._getAssetImage(n);return a?mt(e,a):e},[])}_getAssetFonts(t){return t.map(e=>({name:e}))}_getAssets(t){var u;const e=(u=this.getExportedArtboardImageMap(t.id))!=null?u:[],n=this._getAssetImages(e),a=this._getAssetFonts(t.dependencies.fonts);return{images:n,fonts:a}}_getPreview(t){const e=this.getExportedPreviewPath(t);if(!!e)return{type:"RELATIVE",path:e}}_getArtboard(t){var k,$;const e=t.id,n=(k=t.bounds)!=null?k:void 0,a=this._getStatus(t),u=($=this.getExportedArtboardPathById(e))!=null?$:"",c={type:"RELATIVE",path:u},p=this._getAssets(t),E=this._getPreview(e);return{id:e,name:t.name,role:t.isPasteboard?"PASTEBOARD":"ARTBOARD",status:a,bounds:n,dependencies:[],preview:E,assets:p,location:c}}get components(){return this._sourceDesign.pages.reduce((t,e)=>mt(t,...e.children),[]).map(t=>this._getArtboard(t))}async convert(){return{version:this.manifestVersion,origin:{name:"FIGMA",version:this.figVersion},name:this.name,pages:this.pages,components:this.components,chunks:[],libraries:[]}}};let Vs=Hs;Vs.DEFAULT_FIG_VERSION="0",Vs.DEFAULT_FIG_FILENAME="Untitled";var Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});var Mt=Gs.firstCallMemo=void 0;function du(t){const e=new WeakMap;return function(...n){return e.has(this)||e.set(this,t.call(this,...n)),e.get(this)}}function od(){return function(t,e,n){return n.get&&(n.get=du(n.get)),n.value&&(n.value=du(n.value)),n}}Mt=Gs.firstCallMemo=od;var at={};Object.defineProperty(at,"__esModule",{value:!0});var _u=at.invLerp=at.lerp=at.tan=at.cos=at.sin=at.clamp=Xe=at.round=at.mod=void 0;function ud(t,e){const n=t%e;return n>=0?n:n+e}at.mod=ud;function ld(t,e=2){const n=Math.pow(10,e);return Math.round(t*n)/n}var Xe=at.round=ld;function cd(t,e,n){return Math.max(Math.min(t,n),e)}at.clamp=cd;function fd(t){return Math.sin(t*Math.PI/180)}at.sin=fd;function hd(t){return Math.cos(t*Math.PI/180)}at.cos=hd;function dd(t){return Math.tan(t*Math.PI/180)}at.tan=dd;function _d(t,e,n){return t*(1-n)+e*n}at.lerp=_d;function gd(t,e,n){return t===n?0:e===n?1:(n-t)/(e-t)}_u=at.invLerp=gd;var xt={};Object.defineProperty(xt,"__esModule",{value:!0});var $t=xt.asFiniteNumber=xt.asNumber=Ks=xt.asString=xt.asBoolean=Ws=xt.asArray=void 0;function pd(t,e){return Array.isArray(t)?t:Array.isArray(e)?e:[]}var Ws=xt.asArray=pd;function vd(t,e){return typeof t=="boolean"?t:typeof e=="boolean"?e:Boolean(t)}xt.asBoolean=vd;function md(t,e){return typeof t=="string"?t:typeof e=="string"?e:String(t)}var Ks=xt.asString=md;function yd(t,e){return typeof t=="number"?t:typeof e=="number"?e:Number(t)}xt.asNumber=yd;function bd(t,e){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof e=="number"&&Number.isFinite(e))return e;const n=Number(t);if(!Number.isFinite(n))throw new Error(`Failed when converting "${t}" to finite number`);return n}$t=xt.asFiniteNumber=bd;const kt={TRANSFORM:[1,0,0,1,0,0],BLEND_MODE:"NORMAL",EMPTY_PATH:"",WINDING_RULE:"NON_ZERO",STROKE_ALIGN:"CENTER",STROKE_CAP:"NONE",STROKE_JOIN:"MITER",STROKE_MITER_ANGLE:28.96,TEXT:{FONT_SIZE:12,FONT_WEIGHT:400,LETTER_SPACING:0,LINE_HEIGHT_PERCENT:100,LINE_HEIGHT_UNIT:"INTRINSIC_%"}};function wd(t){if((t==null?void 0:t.x)===void 0&&(t==null?void 0:t.y)===void 0&&(t==null?void 0:t.width)===void 0&&(t==null?void 0:t.height)===void 0)return null;const e=Xe($t(t==null?void 0:t.x,0)),n=Xe($t(t==null?void 0:t.y,0)),a=Xe($t(t==null?void 0:t.width,0)),u=Xe($t(t==null?void 0:t.height,0));return{x:e,y:n,width:a,height:u}}function gu(t){if((t==null?void 0:t.x)===void 0&&(t==null?void 0:t.y)===void 0)return null;const e=Xe($t(t==null?void 0:t.x,0)),n=Xe($t(t==null?void 0:t.y,0));return{x:e,y:n}}function pu(t){const[e,n]=t!=null?t:[];if(!Array.isArray(e)||!Array.isArray(n))return null;const[a,u,c]=e,[p,E,k]=n;return[a,p,u,E,c,k]}function Sd(t){return t==="EVENODD"?"EVEN_ODD":"NON_ZERO"}function vu(t=[]){return t.map(e=>{var n;return{path:(n=e.path)!=null?n:kt.EMPTY_PATH,fillRule:Sd(e.windingRule)}})}class Sr{constructor(e){this._rawValue=e}get raw(){return this._rawValue}}class Ed extends Sr{constructor(e){super(e)}get type(){var e;return(e=this._rawValue)==null?void 0:e.type}get visible(){var e,n;return(n=(e=this._rawValue)==null?void 0:e.visible)!=null?n:!0}get radius(){var e,n;return(n=(e=this._rawValue)==null?void 0:e.radius)!=null?n:0}get color(){var e;return(e=this._rawValue)==null?void 0:e.color}get blendMode(){var e;return(e=this._rawValue)==null?void 0:e.blendMode}get offset(){var e;return gu((e=this._rawValue)==null?void 0:e.offset)}get spread(){var e,n;return(n=(e=this._rawValue)==null?void 0:e.spread)!=null?n:0}get showShadowBehindNode(){var e,n;return(n=(e=this._rawValue)==null?void 0:e.showShadowBehindNode)!=null?n:!1}}class Ys extends Sr{constructor(e){super(e.rawValue)}get type(){return this._rawValue.type}get visible(){var e;return(e=this._rawValue.visible)!=null?e:!0}get opacity(){var e;return Xe((e=this._rawValue.opacity)!=null?e:1)}get color(){return this._rawValue.color}get blendMode(){return this._rawValue.blendMode}get scaleMode(){return this._rawValue.scaleMode}get imageTransform(){return pu(this._rawValue.imageTransform)}get scalingFactor(){var e;return Xe((e=this._rawValue.scalingFactor)!=null?e:1)}get gradientStops(){var e;return(e=this._rawValue.gradientStops)!=null?e:[]}get gradientHandlePositions(){var u;const[e,n,a]=(u=this._rawValue.gradientHandlePositions)!=null?u:[];return[e==null?void 0:e.x,e==null?void 0:e.y,n==null?void 0:n.x,n==null?void 0:n.y,a==null?void 0:a.x,a==null?void 0:a.y].includes(void 0)?null:[e,n,a]}get imageRef(){return this._rawValue.imageRef}get filters(){return this._rawValue.filters}}var Cd=Object.defineProperty,xd=Object.getOwnPropertyDescriptor,mu=(t,e,n,a)=>{for(var u=a>1?void 0:a?xd(e,n):e,c=t.length-1,p;c>=0;c--)(p=t[c])&&(u=(a?p(e,n,u):p(u))||u);return a&&u&&Cd(e,n,u),u};class yn extends Sr{constructor(e){super(e.rawValue),this._parent=e.parent}get id(){var e;return(e=this._rawValue.id)!=null?e:Us()}get name(){return this._rawValue.name}get parent(){return this._parent}get parentArtboard(){const e=this._parent;return e instanceof Cr?e:e.parentArtboard}get visible(){var e;return(e=this._rawValue.visible)!=null?e:!0}get opacity(){var e;return Xe((e=this._rawValue.opacity)!=null?e:1)}get blendMode(){return this._rawValue.blendMode}get transform(){return pu(this._rawValue.relativeTransform)}get fills(){var e,n;return(n=(e=this._rawValue.fills)==null?void 0:e.map(a=>new Ys({rawValue:a})))!=null?n:[]}get strokes(){var e,n;return(n=(e=this._rawValue.strokes)==null?void 0:e.map(a=>new Ys({rawValue:a})))!=null?n:[]}get fillGeometry(){return vu(this._rawValue.fillGeometry)}get strokeGeometry(){return vu(this._rawValue.strokeGeometry)}get strokeWeight(){var e;return(e=this._rawValue.strokeWeight)!=null?e:0}get strokeAlign(){var e;return(e=this._rawValue.strokeAlign)!=null?e:kt.STROKE_ALIGN}get strokeCap(){var e;return(e=this._rawValue.strokeCap)!=null?e:kt.STROKE_CAP}get strokeJoin(){var e;return(e=this._rawValue.strokeJoin)!=null?e:kt.STROKE_JOIN}get strokeDashes(){var e;return(e=this._rawValue.strokeDashes)!=null?e:[]}get strokeMiterAngle(){var e;return(e=this._rawValue.strokeMiterAngle)!=null?e:kt.STROKE_MITER_ANGLE}get effects(){var n;return((n=this._rawValue.effects)!=null?n:[]).reduce((a,u)=>{const c=new Ed(u);return c?mt(a,c):a},[])}get size(){return gu(this._rawValue.size)}get cornerRadius(){return this._rawValue.cornerRadius}get isMask(){var e;return(e=this._rawValue.isMask)!=null?e:!1}get isMaskOutline(){var e;return(e=this._rawValue.isMaskOutline)!=null?e:!1}}mu([Mt()],yn.prototype,"fills",1),mu([Mt()],yn.prototype,"strokes",1);class Js extends yn{constructor(e){super(e),this._children=this._initLayers()}_initLayers(){var n;return Ws((n=this._rawValue)==null?void 0:n.children).reduce((a,u)=>mt(a,new Js({parent:this,rawValue:u})),[])}get type(){return"SHAPE"}get shapeType(){return this._rawValue.type}get children(){return this._children}get booleanOperation(){return this._rawValue.booleanOperation}}var Od=Object.defineProperty,Td=Object.getOwnPropertyDescriptor,Pd=(t,e,n,a)=>{for(var u=a>1?void 0:a?Td(e,n):e,c=t.length-1,p;c>=0;c--)(p=t[c])&&(u=(a?p(e,n,u):p(u))||u);return a&&u&&Od(e,n,u),u};class Zs extends Sr{constructor(e){super(e)}get fontFamily(){return this._rawValue.fontFamily}get fontPostScriptName(){var e;return(e=this._rawValue.fontPostScriptName)!=null?e:void 0}get fontWeight(){var e;return(e=this._rawValue.fontWeight)!=null?e:void 0}get fontSize(){var e;return(e=this._rawValue.fontSize)!=null?e:void 0}get textAlignHorizontal(){var e;return(e=this._rawValue.textAlignHorizontal)!=null?e:void 0}get textAlignVertical(){var e;return(e=this._rawValue.textAlignVertical)!=null?e:void 0}get letterSpacing(){var e;return(e=this._rawValue.letterSpacing)!=null?e:void 0}get lineHeightPx(){var e;return(e=this._rawValue.lineHeightPx)!=null?e:void 0}get lineHeightPercent(){var e;return(e=this._rawValue.lineHeightPercent)!=null?e:void 0}get lineHeightPercentFontSize(){var e;return(e=this._rawValue.lineHeightPercentFontSize)!=null?e:void 0}get lineHeightUnit(){var e;return(e=this._rawValue.lineHeightUnit)!=null?e:void 0}get paragraphSpacing(){var e;return(e=this._rawValue.paragraphSpacing)!=null?e:void 0}get paragraphIndent(){var e;return(e=this._rawValue.paragraphIndent)!=null?e:void 0}get listSpacing(){var e;return(e=this._rawValue.listSpacing)!=null?e:void 0}get italic(){var e;return(e=this._rawValue.italic)!=null?e:void 0}get kerning(){var a;const n=((a=this._rawValue.opentypeFlags)!=null?a:{}).KERN;if(n!==void 0)return n!==0}get textCase(){return this._rawValue.textCase}get textDecoration(){return this._rawValue.textDecoration}get textAutoResize(){return this._rawValue.textAutoResize}get textFills(){var e;return(e=this._rawValue.fills)==null?void 0:e.map(n=>new Ys({rawValue:n}))}}Pd([Mt()],Zs.prototype,"textFills",1);var Id=Object.defineProperty,Ad=Object.getOwnPropertyDescriptor,yu=(t,e,n,a)=>{for(var u=a>1?void 0:a?Ad(e,n):e,c=t.length-1,p;c>=0;c--)(p=t[c])&&(u=(a?p(e,n,u):p(u))||u);return a&&u&&Id(e,n,u),u};class Xs extends yn{constructor(e){super(e)}get type(){return"TEXT"}get characters(){var e;return(e=this._rawValue.characters)!=null?e:""}get layoutVersion(){return this._rawValue.layoutVersion}get characterStyleOverrides(){var e;return(e=this._rawValue.characterStyleOverrides)!=null?e:[]}get styleOverrideTable(){var n;const e=(n=this._rawValue.styleOverrideTable)!=null?n:{};return Object.keys(e).reduce((a,u)=>{const c=e[u];return c&&(a[u]=new Zs(c)),a},{})}get defaultStyle(){return this._rawValue.style?new Zs(this._rawValue.style):null}}yu([Mt()],Xs.prototype,"styleOverrideTable",1),yu([Mt()],Xs.prototype,"defaultStyle",1);let Qs;function kd(t){Qs=t}function bu(){if(!Qs)throw new Error("Platform specific factories are not set!");return Qs}let Ae=null;function Ld(t){Ae=t}function Rd(t){Ae=bu().createLoggerFactory()(t.logger)}const Md={FRAME:wu,BOOLEAN_OPERATION:Er,ELLIPSE:Er,LINE:Er,RECTANGLE:Er,REGULAR_POLYGON:Er,STAR:Er,VECTOR:Er,TEXT:$d,SLICE:Nd,GROUP:wu};function wu({layer:t,parent:e}){return new Su({parent:e,rawValue:t})}function Er({layer:t,parent:e}){return new Js({parent:e,rawValue:t})}function $d({layer:t,parent:e}){return new Xs({parent:e,rawValue:t})}function Nd(){return null}function Dd(t){const e=Object(t.layer).type,n=Xt(e,Md,void 0);return typeof n!="function"?(Ae==null||Ae.warn("createSourceLayer: Unknown layer type",{type:e}),null):n(t)}class Su extends yn{constructor(e){super(e),this._layers=this._initLayers()}_initLayers(){var e;return Ws((e=this._rawValue)==null?void 0:e.children).reduce((n,a)=>{const u=Dd({layer:a,parent:this});return u?mt(n,u):n},[])}get hasBackgroundMask(){return this.fills.length>0||this.strokes.length>0}get type(){return"FRAME"}get layers(){return this._layers}}var Fd=Object.defineProperty,zd=Object.getOwnPropertyDescriptor,jd=(t,e,n,a)=>{for(var u=a>1?void 0:a?zd(e,n):e,c=t.length-1,p;c>=0;c--)(p=t[c])&&(u=(a?p(e,n,u):p(u))||u);return a&&u&&Fd(e,n,u),u};const ea=class extends Sr{constructor(t){var e;super(t.rawArtboard),this._sourceFrame=new Su({rawValue:t.rawArtboard,parent:this}),this._isPasteboard=(e=t.isPasteboard)!=null?e:!1}_getArtboardAssetsFonts(){const t=cu(this._rawValue,e=>{var n;return(n=Object(e))==null?void 0:n.fontPostScriptName});return[...new Set(t)]}get dependencies(){return{fonts:this._getArtboardAssetsFonts()}}get raw(){return this._rawValue}get sourceFrame(){return this._sourceFrame}get layers(){return this.sourceFrame.layers}get bounds(){return wd(this._rawValue.absoluteBoundingBox)}get id(){var t;return(t=this._rawValue.id)!=null?t:ea.DEFAULT_ID}get name(){var t;return(t=this._rawValue.name)!=null?t:ea.DEFAULT_NAME}get isPasteboard(){return this._isPasteboard}get opacity(){var t;return Xe((t=this._rawValue.opacity)!=null?t:1)}get blendMode(){return this._rawValue.blendMode}};let Cr=ea;Cr.DEFAULT_ID="artboard-1",Cr.DEFAULT_NAME="Artboard",jd([Mt()],Cr.prototype,"dependencies",1);const Bd=["COLOR","COLOR_BURN","COLOR_DODGE","DARKEN","DIFFERENCE","EXCLUSION","HARD_LIGHT","HUE","LIGHTEN","LINEAR_BURN","LINEAR_DODGE","LUMINOSITY","MULTIPLY","NORMAL","OVERLAY","PASS_THROUGH","SATURATION","SCREEN","SOFT_LIGHT"];function bn(t){return t.replaceAll(":","-").replaceAll(";","_")}function ta(t){return typeof t=="string"&&t in Bd?t:kt.BLEND_MODE}function ra(t,e=1){const n=$t(t==null?void 0:t.a,0)*e;return{r:Xe($t(t==null?void 0:t.r,0),4),g:Xe($t(t==null?void 0:t.g,0),4),b:Xe($t(t==null?void 0:t.b,0),4),a:Xe(n,4)}}function qd(t,e=1){return(t==null?void 0:t.color)===void 0||(t==null?void 0:t.position)===void 0?null:{color:ra(t.color,e),position:t.position}}function Eu({x:t,y:e}){return{x0:0,x1:t,y0:0,y1:e}}const na=class extends Sr{constructor(t){super(t);const{artboards:e,pasteboard:n}=this._initArtboards();this._artboards=e,this._pasteboard=n}_initPasteboard(t){if(t.length===0)return null;const e=st(Te({},this._rawValue),{id:`${this.id}-pasteboard`,name:`${this.name}-pasteboard`,type:"FRAME",children:t});return new Cr({rawArtboard:e,isPasteboard:!0})}_initArtboards(){var u,c;const t=[],e=[];(c=(u=this._rawValue)==null?void 0:u.children)==null||c.forEach(p=>{p.type==="FRAME"?t.push(p):e.push(p)});const n=t.map(p=>new Cr({rawArtboard:p})),a=this._initPasteboard(e);return{artboards:n,pasteboard:a}}get raw(){return this._rawValue}get artboards(){return this._artboards}get pasteboard(){return this._pasteboard}get children(){return this.pasteboard?[...this.artboards,this.pasteboard]:this.artboards}get id(){var t;return bn((t=this._rawValue.id)!=null?t:na.DEFAULT_ID)}get name(){var t;return(t=this._rawValue.name)!=null?t:na.DEFAULT_ID}};let Cu=na;Cu.DEFAULT_ID="page-1";class Ud extends Sr{constructor(e){var n,a,u;super(e.raw),this._pages=(u=(a=(n=e.raw.document)==null?void 0:n.children)==null?void 0:a.map(c=>new Cu(c)))!=null?u:[],this._designId=e.designId}get raw(){return this._rawValue}get designId(){return this._designId}get schemaVersion(){return this._rawValue.schemaVersion!==void 0?String(this._rawValue.schemaVersion):void 0}get name(){return this._rawValue.name}get pages(){return this._pages}}class Hd{constructor(e){this._effect=e}get visible(){return this._effect.visible}get blendMode(){return ta(this._effect.blendMode)}get shadow(){const e=this._effect.offset;if(e===null)return null;const n=this._effect.radius,a=this._effect.spread,u=ra(this._effect.color);return{offset:e,blur:n,choke:a,color:u}}get _innerShadow(){const e=this.visible,n=this.blendMode,a="BODY",u=this.shadow;return u===null?null:{type:"INNER_SHADOW",visible:e,blendMode:n,basis:a,shadow:u}}get _dropShadow(){const e=this.visible,n=this.blendMode,a="BODY",u=this.shadow;return u===null?null:{type:"DROP_SHADOW",visible:e,blendMode:n,basis:a,shadow:u}}get _blur(){const e=this.visible,n=this.blendMode,a="LAYER_AND_EFFECTS",u=this._effect.radius/2;return{type:"BLUR",visible:e,blendMode:n,basis:a,blur:u}}get _backgroundBlur(){const e=this.visible,n=this.blendMode,a="BACKGROUND",u=this._effect.radius;return{type:"BLUR",visible:e,blendMode:n,basis:a,blur:u}}convert(){const e=this._effect.type;switch(e){case"INNER_SHADOW":return this._innerShadow;case"DROP_SHADOW":return this._dropShadow;case"LAYER_BLUR":return this._blur;case"BACKGROUND_BLUR":return this._backgroundBlur;default:return Ae==null||Ae.warn("Unknown Effect type",{type:e}),null}}}var Vd=Object.defineProperty,Gd=Object.getOwnPropertyDescriptor,Wd=(t,e,n,a)=>{for(var u=a>1?void 0:a?Gd(e,n):e,c=t.length-1,p;c>=0;c--)(p=t[c])&&(u=(a?p(e,n,u):p(u))||u);return a&&u&&Vd(e,n,u),u};const xu=class{constructor(t){this._parent=t.parent,this._sourceLayer=t.sourceLayer,this._id=Ks(this._sourceLayer.id,Us())}get sourceLayer(){return this._sourceLayer}get parentArtboard(){const t=this._parent;return t instanceof zl?t:t.parentArtboard}get id(){return bn(this._id)}get name(){return Ks(this._sourceLayer.name,"Layer")}get visible(){return this._sourceLayer.visible}get blendMode(){return ta(this._sourceLayer.blendMode)}get transform(){var t;return(t=this.sourceLayer.transform)!=null?t:kt.TRANSFORM}get opacity(){return this._sourceLayer.opacity}get type(){const t=String(this._sourceLayer.type),e=Xt(t,xu.LAYER_TYPE_MAP,void 0);return e||(Ae==null||Ae.warn("Unknown Layer type",{type:t}),null)}get isConvertible(){return this.type!==null}get effects(){return this.sourceLayer.effects.reduce((t,e)=>{const n=new Hd(e).convert();return n?mt(t,n):t},[])}convertBase(){if(!this.isConvertible)return null;const t=this.type;return{id:this.id,name:this.name,type:t,transform:this.transform,visible:this.visible,blendMode:this.blendMode,opacity:this.opacity,effects:this.effects}}};let xr=xu;xr.DEFAULT_TRANSLATION=[0,0],xr.LAYER_TYPE_MAP={FRAME:"GROUP",SHAPE:"SHAPE",TEXT:"TEXT"},Wd([Mt()],xr.prototype,"effects",1);class Kd extends xr{constructor(e){super(e),this._layers=Pa(this._sourceLayer.layers,this)}get layers(){return this._layers}_convertTypeSpecific(){return{type:"GROUP",layers:ai(this._layers)}}convert(){const e=this.convertBase();if(!e)return null;const n=this._convertTypeSpecific();return n?Te(Te({},e),n):null}}var wn={};Object.defineProperty(wn,"__esModule",{value:!0}),wn.multiplyAlpha=Ou=wn.lerpColor=void 0;const ia=at;function ui(t=0,e=0,n,a=0,u=255){return(0,ia.clamp)((0,ia.lerp)(t,e,n),a,u)}function Yd(t,e,n){const{r:a,g:u,b:c,a:p}=t!=null?t:{},{r:E,g:k,b:$,a:B}=e!=null?e:{};return{r:ui(a,E,n),g:ui(u,k,n),b:ui(c,$,n),a:ui(p!=null?p:1,B!=null?B:1,n,0,1)}}var Ou=wn.lerpColor=Yd;function Jd(t,e=1){const{r:n,g:a,b:u,a:c}=t;return{r:n,g:a,b:u,a:(0,ia.round)(c*e)}}wn.multiplyAlpha=Jd;class jr{static convertFills(e,n){return e.reduce((a,u)=>{const c=new jr({fill:u,parentLayer:n}).convert();return c?mt(a,c):a},[])}constructor(e){this._fill=e.fill,this._parentLayer=e.parentLayer}get fillType(){switch(this._fill.type){case"SOLID":return"COLOR";case"GRADIENT_LINEAR":case"GRADIENT_RADIAL":case"GRADIENT_ANGULAR":case"GRADIENT_DIAMOND":return"GRADIENT";case"IMAGE":return"IMAGE";default:return null}}get visible(){return this._fill.visible}get blendMode(){return ta(this._fill.blendMode)}get opacity(){return this._fill.opacity}get _color(){return ra(this._fill.color,this.opacity)}get _gradientStops(){const e=this._fill.gradientStops.reduce((n,a)=>{const u=qd(a,this.opacity);return u?mt(n,u):n},[]);if(!e.length)return null;if(this._gradientType==="ANGULAR"){const n=e[0],a=e[e.length-1];if(Xe(n.position)===0&&Xe(a.position)===1)return e;if(Xe(n.position)===0)return mt(e,st(Te({},n),{position:1}));if(Xe(a.position)===0)return[st(Te({},a),{position:0}),...e];const u=n.position+(1-a.position),c=_u(0,u,n.position),p=Ou(n.color,a.color,c);return[{color:p,position:0},...e,{color:p,position:1}]}return e}get _gradientType(){switch(this._fill.type){case"GRADIENT_LINEAR":return"LINEAR";case"GRADIENT_RADIAL":return"RADIAL";case"GRADIENT_ANGULAR":return"ANGULAR";case"GRADIENT_DIAMOND":return"DIAMOND";default:return null}}get _gradient(){const e=this._gradientType;if(e===null)return null;const n=this._gradientStops;return n===null?null:{type:e,stops:n}}get _transform(){const e=this._fill.gradientHandlePositions;if(e===null)return null;const[n,a,u]=e,c=this._parentLayer.size;if(c===null)return null;const{x:p,y:E}=c,k={x:n.x*p,y:n.y*E},$={x:a.x*p,y:a.y*E},B={x:u.x*p,y:u.y*E},j=$.x-k.x,Y=$.y-k.y,R=B.x-k.x,Z=B.y-k.y,Q=k.x,ae=k.y;return[j,Y,R,Z,Q,ae]}get _gradientPositioning(){const e="FILL",n="LAYER",a=this._transform;return a===null?null:{layout:e,origin:n,transform:a}}get _imagePositioning(){var E;const e=(E=this._fill.scaleMode)!=null?E:"FILL",n="LAYER",a=this._parentLayer.size;if(a===null)return null;const{x:u,y:c}=a;return{layout:e,origin:n,transform:[u,0,0,c,0,0]}}get _fillColor(){const e=this._color;if(!e)return null;const n=this.visible,a=this.blendMode;return{type:"COLOR",visible:n,blendMode:a,color:e}}get _fillGradient(){const e=this.visible,n=this.blendMode,a=this._gradient;if(a===null)return null;const u=this._gradientPositioning;return u===null?null:{type:"GRADIENT",visible:e,blendMode:n,gradient:a,positioning:u}}get _filterOpacity(){return{type:"OPACITY_MULTIPLIER",opacity:this.opacity}}get _filterAdjustment(){var $;const{exposure:e,contrast:n,saturation:a,temperature:u,tint:c,highlights:p,shadows:E}=($=this._fill.filters)!=null?$:{};return{type:"FIGMA_COLOR_ADJUSTMENT",colorAdjustment:{hue:e,contrast:n,saturation:a,temperature:u,tint:c,highlights:p,shadows:E}}}get _fillImage(){const e=this._fill.imageRef;if(!e)return null;const n={ref:{type:"PATH",value:`images/${e}.png`}},a=this.visible,u=this.blendMode,c=this._imagePositioning;if(c===null)return null;const p=[this._filterOpacity,this._filterAdjustment];return{type:"IMAGE",visible:a,blendMode:u,image:n,positioning:c,filters:p}}convert(){switch(this.fillType){case"COLOR":return this._fillColor;case"GRADIENT":return this._fillGradient;case"IMAGE":return this._fillImage;default:return null}}}var Tu={exports:{}},Zd=new Proxy({},{get(){throw new Error('Module "" has been externalized for browser compatibility and cannot be accessed in client code.')}}),Xd=Object.freeze(Object.defineProperty({__proto__:null,default:Zd},Symbol.toStringTag,{value:"Module"})),Pu=vt(Xd);/*!
 * Paper.js v0.12.15 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Mar 17 10:49:48 2021 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(t){(function(e,n){e=e||Pu;var a=e.window,u=e.document,c=new function(){var r=/^(statics|enumerable|beans|preserve)$/,i=[],s=i.slice,o=Object.create,l=Object.getOwnPropertyDescriptor,f=Object.defineProperty,d=i.forEach||function(y,m){for(var I=0,C=this.length;I<C;I++)y.call(m,this[I],I,this)},h=function(y,m){for(var I in this)this.hasOwnProperty(I)&&y.call(m,this[I],I,this)},_=Object.assign||function(y){for(var m=1,I=arguments.length;m<I;m++){var C=arguments[m];for(var A in C)C.hasOwnProperty(A)&&(y[A]=C[A])}return y},g=function(y,m,I){if(y){var C=l(y,"length");(C&&typeof C.value=="number"?d:h).call(y,m,I=I||y)}return I};function b(y,m,I,C,A){var w={};function O(T,M){M=M||(M=l(m,T))&&(M.get?M:M.value),typeof M=="string"&&M[0]==="#"&&(M=y[M.substring(1)]||M);var D=typeof M=="function",F=M,U=A||D&&!M.base?M&&M.get?T in y:y[T]:null,N;(!A||!U)&&(D&&U&&(M.base=U),D&&C!==!1&&(N=T.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(w[N[3].toLowerCase()+N[4]]=N[2]),(!F||D||!F.get||typeof F.get!="function"||!S.isPlainObject(F))&&(F={value:F,writable:!0}),(l(y,T)||{configurable:!0}).configurable&&(F.configurable=!0,F.enumerable=I!=null?I:!N),f(y,T,F))}if(m){for(var v in m)m.hasOwnProperty(v)&&!r.test(v)&&O(v);for(var v in w){var x=w[v],P=y["set"+x],L=y["get"+x]||P&&y["is"+x];L&&(C===!0||L.length===0)&&O(v,{get:L,set:P})}}return y}function S(){for(var y=0,m=arguments.length;y<m;y++){var I=arguments[y];I&&_(this,I)}return this}return b(S,{inject:function(y){if(y){var m=y.statics===!0?y:y.statics,I=y.beans,C=y.preserve;m!==y&&b(this.prototype,y,y.enumerable,I,C),b(this,m,null,I,C)}for(var A=1,w=arguments.length;A<w;A++)this.inject(arguments[A]);return this},extend:function(){for(var y=this,m,I,C=0,A,w=arguments.length;C<w&&!(m&&I);C++)A=arguments[C],m=m||A.initialize,I=I||A.prototype;return m=m||function(){y.apply(this,arguments)},I=m.prototype=I||o(this.prototype),f(I,"constructor",{value:m,writable:!0,configurable:!0}),b(m,this),arguments.length&&this.inject.apply(m,arguments),m.base=y,m}}).inject({enumerable:!1,initialize:S,set:S,inject:function(){for(var y=0,m=arguments.length;y<m;y++){var I=arguments[y];I&&b(this,I,I.enumerable,I.beans,I.preserve)}return this},extend:function(){var y=o(this);return y.inject.apply(y,arguments)},each:function(y,m){return g(this,y,m)},clone:function(){return new this.constructor(this)},statics:{set:_,each:g,create:o,define:f,describe:l,clone:function(y){return _(new y.constructor,y)},isPlainObject:function(y){var m=y!=null&&y.constructor;return m&&(m===Object||m===S||m.name==="Object")},pick:function(y,m){return y!==n?y:m},slice:function(y,m,I){return s.call(y,m,I)}}})};t.exports=c,c.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+c.each(this,function(r,i){if(!/^_/.test(i)){var s=typeof r;this.push(i+": "+(s==="number"?B.instance.number(r):s==="string"?"'"+r+"'":r))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(r){return c.importJSON(r,this)},exportJSON:function(r){return c.exportJSON(this,r)},toJSON:function(){return c.serialize(this)},set:function(r,i){return r&&c.filter(this,r,i,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function r(){var i=r.base.apply(this,arguments),s=i.prototype._class;return s&&!c.exports[s]&&(c.exports[s]=i),i},equals:function(r,i){if(r===i)return!0;if(r&&r.equals)return r.equals(i);if(i&&i.equals)return i.equals(r);if(r&&i&&typeof r=="object"&&typeof i=="object"){if(Array.isArray(r)&&Array.isArray(i)){var s=r.length;if(s!==i.length)return!1;for(;s--;)if(!c.equals(r[s],i[s]))return!1}else{var o=Object.keys(r),s=o.length;if(s!==Object.keys(i).length)return!1;for(;s--;){var l=o[s];if(!(i.hasOwnProperty(l)&&c.equals(r[l],i[l])))return!1}}return!0}return!1},read:function(r,i,s,o){if(this===c){var l=this.peek(r,i);return r.__index++,l}var f=this.prototype,d=f._readIndex,h=i||d&&r.__index||0,_=r.length,g=r[h];if(o=o||_-h,g instanceof this||s&&s.readNull&&g==null&&o<=1)return d&&(r.__index=h+1),g&&s&&s.clone?g.clone():g;if(g=c.create(f),d&&(g.__read=!0),g=g.initialize.apply(g,h>0||h+o<_?c.slice(r,h,h+o):r)||g,d){r.__index=h+g.__read;var b=g.__filtered;b&&(r.__filtered=b,g.__filtered=n),g.__read=n}return g},peek:function(r,i){return r[r.__index=i||r.__index||0]},remain:function(r){return r.length-(r.__index||0)},readList:function(r,i,s,o){for(var l=[],f,d=i||0,h=o?d+o:r.length,_=d;_<h;_++)l.push(Array.isArray(f=r[_])?this.read(f,0,s):this.read(r,_,s,1));return l},readNamed:function(r,i,s,o,l){var f=this.getNamed(r,i),d=f!==n;if(d){var h=r.__filtered;if(!h){var _=this.getSource(r);h=r.__filtered=c.create(_),h.__unfiltered=_}h[i]=n}return this.read(d?[f]:r,s,o,l)},readSupported:function(r,i){var s=this.getSource(r),o=this,l=!1;return s&&Object.keys(s).forEach(function(f){if(f in i){var d=o.readNamed(r,f);d!==n&&(i[f]=d),l=!0}}),l},getSource:function(r){var i=r.__source;if(i===n){var s=r.length===1&&r[0];i=r.__source=s&&c.isPlainObject(s)?s:null}return i},getNamed:function(r,i){var s=this.getSource(r);if(s)return i?s[i]:r.__filtered||s},hasNamed:function(r,i){return!!this.getNamed(r,i)},filter:function(r,i,s,o){var l;function f(b){if(!(s&&b in s)&&!(l&&b in l)){var S=i[b];S!==n&&(r[b]=S)}}if(o){for(var d={},h=0,_,g=o.length;h<g;h++)(_=o[h])in i&&(f(_),d[_]=!0);l=d}return Object.keys(i.__unfiltered||i).forEach(f),r},isPlainValue:function(r,i){return c.isPlainObject(r)||Array.isArray(r)||i&&typeof r=="string"},serialize:function(r,i,s,o){i=i||{};var l=!o,f;if(l&&(i.formatter=new B(i.precision),o={length:0,definitions:{},references:{},add:function(S,y){var m="#"+S._id,I=this.references[m];if(!I){this.length++;var C=y.call(S),A=S._class;A&&C[0]!==A&&C.unshift(A),this.definitions[m]=C,I=this.references[m]=[m]}return I}}),r&&r._serialize){f=r._serialize(i,o);var d=r._class;d&&!r._compactSerialize&&(l||!s)&&f[0]!==d&&f.unshift(d)}else if(Array.isArray(r)){f=[];for(var h=0,_=r.length;h<_;h++)f[h]=c.serialize(r[h],i,s,o)}else if(c.isPlainObject(r)){f={};for(var g=Object.keys(r),h=0,_=g.length;h<_;h++){var b=g[h];f[b]=c.serialize(r[b],i,s,o)}}else typeof r=="number"?f=i.formatter.number(r,i.precision):f=r;return l&&o.length>0?[["dictionary",o.definitions],f]:f},deserialize:function(r,i,s,o,l){var f=r,d=!s,h=d&&r&&r.length&&r[0][0]==="dictionary";if(s=s||{},Array.isArray(r)){var _=r[0],g=_==="dictionary";if(r.length==1&&/^#/.test(_))return s.dictionary[_];_=c.exports[_],f=[];for(var b=_?1:0,S=r.length;b<S;b++)f.push(c.deserialize(r[b],i,s,g,h));if(_){var y=f;i?f=i(_,y,d||l):f=new _(y)}}else if(c.isPlainObject(r)){f={},o&&(s.dictionary=f);for(var m in r)f[m]=c.deserialize(r[m],i,s)}return h?f[1]:f},exportJSON:function(r,i){var s=c.serialize(r,i);return i&&i.asString==!1?s:JSON.stringify(s)},importJSON:function(r,i){return c.deserialize(typeof r=="string"?JSON.parse(r):r,function(s,o,l){var f=l&&i&&i.constructor===s,d=f?i:c.create(s.prototype);if(o.length===1&&d instanceof Ie&&(f||!(d instanceof Qn))){var h=o[0];c.isPlainObject(h)&&(h.insert=!1,f&&(o=o.concat([{insert:!0}])))}return(f?d.set:s).apply(d,o),f&&(i=null),d})},push:function(r,i){var s=i.length;if(s<4096)r.push.apply(r,i);else{var o=r.length;r.length+=s;for(var l=0;l<s;l++)r[o+l]=i[l]}return r},splice:function(r,i,s,o){var l=i&&i.length,f=s===n;s=f?r.length:s,s>r.length&&(s=r.length);for(var d=0;d<l;d++)i[d]._index=s+d;if(f)return c.push(r,i),[];var h=[s,o];i&&c.push(h,i);for(var _=r.splice.apply(r,h),d=0,g=_.length;d<g;d++)_[d]._index=n;for(var d=s+l,g=r.length;d<g;d++)r[d]._index=d;return _},capitalize:function(r){return r.replace(/\b[a-z]/g,function(i){return i.toUpperCase()})},camelize:function(r){return r.replace(/-(.)/g,function(i,s){return s.toUpperCase()})},hyphenate:function(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var p={on:function(r,i){if(typeof r!="string")c.each(r,function(f,d){this.on(d,f)},this);else{var s=this._eventTypes,o=s&&s[r],l=this._callbacks=this._callbacks||{};l=l[r]=l[r]||[],l.indexOf(i)===-1&&(l.push(i),o&&o.install&&l.length===1&&o.install.call(this,r))}return this},off:function(r,i){if(typeof r!="string"){c.each(r,function(d,h){this.off(h,d)},this);return}var s=this._eventTypes,o=s&&s[r],l=this._callbacks&&this._callbacks[r],f;return l&&(!i||(f=l.indexOf(i))!==-1&&l.length===1?(o&&o.uninstall&&o.uninstall.call(this,r),delete this._callbacks[r]):f!==-1&&l.splice(f,1)),this},once:function(r,i){return this.on(r,function s(){i.apply(this,arguments),this.off(r,s)})},emit:function(r,i){var s=this._callbacks&&this._callbacks[r];if(!s)return!1;var o=c.slice(arguments,1),l=i&&i.target&&!i.currentTarget;s=s.slice(),l&&(i.currentTarget=this);for(var f=0,d=s.length;f<d;f++)if(s[f].apply(this,o)==!1){i&&i.stop&&i.stop();break}return l&&delete i.currentTarget,!0},responds:function(r){return!!(this._callbacks&&this._callbacks[r])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(r){var i=this._eventTypes,s=this._callbacks,o=r?"install":"uninstall";if(i){for(var l in s)if(s[l].length>0){var f=i[l],d=f&&f[o];d&&d.call(this,l)}}},statics:{inject:function r(i){var s=i._events;if(s){var o={};c.each(s,function(l,f){var d=typeof l=="string",h=d?l:f,_=c.capitalize(h),g=h.substring(2).toLowerCase();o[g]=d?{}:l,h="_"+h,i["get"+_]=function(){return this[h]},i["set"+_]=function(b){var S=this[h];S&&this.off(g,S),b&&this.on(g,b),this[h]=b}}),i._eventTypes=o}return r.base.apply(this,arguments)}}},E=c.extend({_class:"PaperScope",initialize:function r(){Oe=this,this.settings=new c({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=r._id++,r._scopes[this._id]=this;var i=r.prototype;if(!this.support){var s=tt.getContext(1,1)||{};i.support={nativeDash:"setLineDash"in s||"mozDash"in s,nativeBlendModes:qo.nativeModes},tt.release(s)}if(!this.agent){var o=e.navigator.userAgent.toLowerCase(),l=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(o)||[])[0],f=l==="darwin"?"mac":l,d=i.agent=i.browser={platform:f};f&&(d[f]=!0),o.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(h,_,g,b,S){if(!d.chrome){var y=_==="opera"?b:/^(node|trident)$/.test(_)?S:g;d.version=y,d.versionNumber=parseFloat(y),_={trident:"msie",jsdom:"node"}[_]||_,d.name=_,d[_]=!0}}),d.chrome&&delete d.webkit,d.atom&&delete d.chrome}},version:"0.12.15",getView:function(){var r=this.project;return r&&r._view},getPaper:function(){return this},execute:function(r,i){var s=Oe.PaperScript.execute(r,this,i);return qe.updateFocus(),s},install:function(r){var i=this;c.each(["project","view","tool"],function(o){c.define(r,o,{configurable:!0,get:function(){return i[o]}})});for(var s in this)!/^_/.test(s)&&this[s]&&(r[s]=this[s])},setup:function(r){return Oe=this,this.project=new bt(r),this},createCanvas:function(r,i){return tt.getCanvas(r,i)},activate:function(){Oe=this},clear:function(){for(var r=this.projects,i=this.tools,s=r.length-1;s>=0;s--)r[s].remove();for(var s=i.length-1;s>=0;s--)i[s].remove()},remove:function(){this.clear(),delete E._scopes[this._id]},statics:new function(){function r(i){return i+="Attribute",function(s,o){return s[i](o)||s[i]("data-paper-"+o)}}return{_scopes:{},_id:0,get:function(i){return this._scopes[i]||null},getAttribute:r("get"),hasAttribute:r("has")}}}),k=c.extend(p,{initialize:function(r){this._scope=Oe,this._index=this._scope[this._list].push(this)-1,(r||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var r=this._scope[this._reference];return r&&r!==this&&r.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",r),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(c.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),$={findItemBoundsCollisions:function(r,i,s){function o(d){for(var h=new Array(d.length),_=0;_<d.length;_++){var g=d[_].getBounds();h[_]=[g.left,g.top,g.right,g.bottom]}return h}var l=o(r),f=!i||i===r?l:o(i);return this.findBoundsCollisions(l,f,s||0)},findCurveBoundsCollisions:function(r,i,s,o){function l(y){for(var m=Math.min,I=Math.max,C=new Array(y.length),A=0;A<y.length;A++){var w=y[A];C[A]=[m(w[0],w[2],w[4],w[6]),m(w[1],w[3],w[5],w[7]),I(w[0],w[2],w[4],w[6]),I(w[1],w[3],w[5],w[7])]}return C}var f=l(r),d=!i||i===r?f:l(i);if(o){for(var h=this.findBoundsCollisions(f,d,s||0,!1,!0),_=this.findBoundsCollisions(f,d,s||0,!0,!0),g=[],b=0,S=h.length;b<S;b++)g[b]={hor:h[b],ver:_[b]};return g}return this.findBoundsCollisions(f,d,s||0)},findBoundsCollisions:function(r,i,s,o,l){var f=!i||r===i,d=f?r:r.concat(i),h=r.length,_=d.length;function g(ie,se,fe){for(var X=0,ee=ie.length;X<ee;){var oe=ee+X>>>1;d[ie[oe]][se]<fe?X=oe+1:ee=oe}return X-1}for(var b=o?1:0,S=b+2,y=o?0:1,m=y+2,I=new Array(_),C=0;C<_;C++)I[C]=C;I.sort(function(ie,se){return d[ie][b]-d[se][b]});for(var A=[],w=new Array(h),C=0;C<_;C++){var O=I[C],v=d[O],x=f?O:O-h,P=O<h,L=f||!P,T=P?[]:null;if(A.length){var M=g(A,S,v[b]-s)+1;if(A.splice(0,M),f&&l){T=T.concat(A);for(var D=0;D<A.length;D++){var F=A[D];w[F].push(x)}}else for(var U=v[m],N=v[y],D=0;D<A.length;D++){var F=A[D],q=d[F],H=F<h,G=f||F>=h;(l||(P&&G||L&&H)&&U>=q[y]-s&&N<=q[m]+s)&&(P&&G&&T.push(f?F:F-h),L&&H&&w[F].push(x))}}if(P&&(r===i&&T.push(O),w[O]=T),A.length){var W=v[S],K=g(A,S,W);A.splice(K+1,0,O)}else A.push(O)}for(var C=0;C<w.length;C++){var re=w[C];re&&re.sort(function(se,fe){return se-fe})}return w}},B=c.extend({initialize:function(r){this.precision=c.pick(r,5),this.multiplier=Math.pow(10,this.precision)},number:function(r){return this.precision<16?Math.round(r*this.multiplier)/this.multiplier:r},pair:function(r,i,s){return this.number(r)+(s||",")+this.number(i)},point:function(r,i){return this.number(r.x)+(i||",")+this.number(r.y)},size:function(r,i){return this.number(r.width)+(i||",")+this.number(r.height)},rectangle:function(r,i){return this.point(r,i)+(i||",")+this.size(r,i)}});B.instance=new B;var j=new function(){var r=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],i=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],s=Math.abs,o=Math.sqrt,l=Math.pow,f=Math.log2||function(S){return Math.log(S)*Math.LOG2E},d=1e-12,h=112e-18;function _(S,y,m){return S<y?y:S>m?m:S}function g(S,y,m){function I(M){var D=M*134217729,F=M-D,U=F+D,N=M-U;return[U,N]}var C=y*y-S*m,A=y*y+S*m;if(s(C)*3<A){var w=I(S),O=I(y),v=I(m),x=y*y,P=O[0]*O[0]-x+2*O[0]*O[1]+O[1]*O[1],L=S*m,T=w[0]*v[0]-L+w[0]*v[1]+w[1]*v[0]+w[1]*v[1];C=x-L+(P-T)}return C}function b(){var S=Math.max.apply(Math,arguments);return S&&(S<1e-8||S>1e8)?l(2,-Math.round(f(S))):0}return{EPSILON:d,MACHINE_EPSILON:h,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(o(2)-1)/3,isZero:function(S){return S>=-d&&S<=d},isMachineZero:function(S){return S>=-h&&S<=h},clamp:_,integrate:function(S,y,m,I){for(var C=r[I-2],A=i[I-2],w=(m-y)*.5,O=w+y,v=0,x=I+1>>1,P=I&1?A[v++]*S(O):0;v<x;){var L=w*C[v];P+=A[v++]*(S(O+L)+S(O-L))}return w*P},findRoot:function(S,y,m,I,C,A,w){for(var O=0;O<A;O++){var v=S(m),x=v/y(m),P=m-x;if(s(x)<w){m=P;break}v>0?(C=m,m=P<=I?(I+C)*.5:P):(I=m,m=P>=C?(I+C)*.5:P)}return _(m,I,C)},solveQuadratic:function(S,y,m,I,C,A){var w,O=1/0;if(s(S)<d){if(s(y)<d)return s(m)<d?-1:0;w=-m/y}else{y*=-.5;var v=g(S,y,m);if(v&&s(v)<h){var x=b(s(S),s(y),s(m));x&&(S*=x,y*=x,m*=x,v=g(S,y,m))}if(v>=-h){var P=v<0?0:o(v),L=y+(y<0?-P:P);L===0?(w=m/S,O=-w):(w=L/S,O=m/L)}}var T=0,M=C==null,D=C-d,F=A+d;return isFinite(w)&&(M||w>D&&w<F)&&(I[T++]=M?w:_(w,C,A)),O!==w&&isFinite(O)&&(M||O>D&&O<F)&&(I[T++]=M?O:_(O,C,A)),T},solveCubic:function(S,y,m,I,C,A,w){var O=b(s(S),s(y),s(m),s(I)),v,x,P,L,T;O&&(S*=O,y*=O,m*=O,I*=O);function M(K){v=K;var re=S*v;x=re+y,P=x*v+m,L=(re+x)*v+P,T=P*v+I}if(s(S)<d)S=y,x=m,P=I,v=1/0;else if(s(I)<d)x=y,P=m,v=0;else{M(-(y/S)/3);var D=T/S,F=l(s(D),1/3),U=D<0?-1:1,N=-L/S,q=N>0?1.324717957244746*Math.max(F,o(N)):F,H=v-U*q;if(H!==v){do M(H),H=L===0?v:v-T/L/(1+h);while(U*H>U*v);s(S)*v*v>s(I/v)&&(P=-I/v,x=(P-m)/v)}}var G=j.solveQuadratic(S,x,P,C,A,w),W=A==null;return isFinite(v)&&(G===0||G>0&&v!==C[0]&&v!==C[1])&&(W||v>A-d&&v<w+d)&&(C[G++]=W?v:_(v,A,w)),G}}},Y={_id:1,_pools:{},get:function(r){if(r){var i=this._pools[r];return i||(i=this._pools[r]={_id:1}),i._id++}else return this._id++}},R=c.extend({_class:"Point",_readIndex:!0,initialize:function(i,s){var o=typeof i,l=this.__read,f=0;if(o==="number"){var d=typeof s=="number";this._set(i,d?s:i),l&&(f=d?2:1)}else if(o==="undefined"||i===null)this._set(0,0),l&&(f=i===null?1:0);else{var h=o==="string"?i.split(/[\s,]+/)||[]:i;f=1,Array.isArray(h)?this._set(+h[0],+(h.length>1?h[1]:h[0])):"x"in h?this._set(h.x||0,h.y||0):"width"in h?this._set(h.width||0,h.height||0):"angle"in h?(this._set(h.length||0,0),this.setAngle(h.angle||0)):(this._set(0,0),f=0)}return l&&(this.__read=f),this},set:"#initialize",_set:function(r,i){return this.x=r,this.y=i,this},equals:function(r){return this===r||r&&(this.x===r.x&&this.y===r.y||Array.isArray(r)&&this.x===r[0]&&this.y===r[1])||!1},clone:function(){return new R(this.x,this.y)},toString:function(){var r=B.instance;return"{ x: "+r.number(this.x)+", y: "+r.number(this.y)+" }"},_serialize:function(r){var i=r.formatter;return[i.number(this.x),i.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(r){if(this.isZero()){var i=this._angle||0;this._set(Math.cos(i)*r,Math.sin(i)*r)}else{var s=r/this.getLength();j.isZero(s)&&this.getAngle(),this._set(this.x*s,this.y*s)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(r){this.setAngleInRadians.call(this,r*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var r=R.read(arguments),i=this.getLength()*r.getLength();if(j.isZero(i))return NaN;var s=this.dot(r)/i;return Math.acos(s<-1?-1:s>1?1:s)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(r){if(this._angle=r,!this.isZero()){var i=this.getLength();this._set(Math.cos(r)*i,Math.sin(r)*i)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var r=R.read(arguments);return Math.atan2(this.cross(r),this.dot(r))*180/Math.PI},getDistance:function(){var r=arguments,i=R.read(r),s=i.x-this.x,o=i.y-this.y,l=s*s+o*o,f=c.read(r);return f?l:Math.sqrt(l)},normalize:function(r){r===n&&(r=1);var i=this.getLength(),s=i!==0?r/i:0,o=new R(this.x*s,this.y*s);return s>=0&&(o._angle=this._angle),o},rotate:function(r,i){if(r===0)return this.clone();r=r*Math.PI/180;var s=i?this.subtract(i):this,o=Math.sin(r),l=Math.cos(r);return s=new R(s.x*l-s.y*o,s.x*o+s.y*l),i?s.add(i):s},transform:function(r){return r?r._transformPoint(this):this},add:function(){var r=R.read(arguments);return new R(this.x+r.x,this.y+r.y)},subtract:function(){var r=R.read(arguments);return new R(this.x-r.x,this.y-r.y)},multiply:function(){var r=R.read(arguments);return new R(this.x*r.x,this.y*r.y)},divide:function(){var r=R.read(arguments);return new R(this.x/r.x,this.y/r.y)},modulo:function(){var r=R.read(arguments);return new R(this.x%r.x,this.y%r.y)},negate:function(){return new R(-this.x,-this.y)},isInside:function(){return le.read(arguments).contains(this)},isClose:function(){var r=arguments,i=R.read(r),s=c.read(r);return this.getDistance(i)<=s},isCollinear:function(){var r=R.read(arguments);return R.isCollinear(this.x,this.y,r.x,r.y)},isColinear:"#isCollinear",isOrthogonal:function(){var r=R.read(arguments);return R.isOrthogonal(this.x,this.y,r.x,r.y)},isZero:function(){var r=j.isZero;return r(this.x)&&r(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(r){return this.x*(r>1&&r<4?-1:1)>=0&&this.y*(r>2?-1:1)>=0},dot:function(){var r=R.read(arguments);return this.x*r.x+this.y*r.y},cross:function(){var r=R.read(arguments);return this.x*r.y-this.y*r.x},project:function(){var r=R.read(arguments),i=r.isZero()?0:this.dot(r)/r.dot(r);return new R(r.x*i,r.y*i)},statics:{min:function(){var r=arguments,i=R.read(r),s=R.read(r);return new R(Math.min(i.x,s.x),Math.min(i.y,s.y))},max:function(){var r=arguments,i=R.read(r),s=R.read(r);return new R(Math.max(i.x,s.x),Math.max(i.y,s.y))},random:function(){return new R(Math.random(),Math.random())},isCollinear:function(r,i,s,o){return Math.abs(r*o-i*s)<=Math.sqrt((r*r+i*i)*(s*s+o*o))*1e-8},isOrthogonal:function(r,i,s,o){return Math.abs(r*s+i*o)<=Math.sqrt((r*r+i*i)*(s*s+o*o))*1e-8}}},c.each(["round","ceil","floor","abs"],function(r){var i=Math[r];this[r]=function(){return new R(i(this.x),i(this.y))}},{})),Z=R.extend({initialize:function(i,s,o,l){this._x=i,this._y=s,this._owner=o,this._setter=l},_set:function(r,i,s){return this._x=r,this._y=i,s||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(r){this._x=r,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(r){this._y=r,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(r){this._owner._changeSelection(this._getSelection(),r)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),Q=c.extend({_class:"Size",_readIndex:!0,initialize:function(i,s){var o=typeof i,l=this.__read,f=0;if(o==="number"){var d=typeof s=="number";this._set(i,d?s:i),l&&(f=d?2:1)}else if(o==="undefined"||i===null)this._set(0,0),l&&(f=i===null?1:0);else{var h=o==="string"?i.split(/[\s,]+/)||[]:i;f=1,Array.isArray(h)?this._set(+h[0],+(h.length>1?h[1]:h[0])):"width"in h?this._set(h.width||0,h.height||0):"x"in h?this._set(h.x||0,h.y||0):(this._set(0,0),f=0)}return l&&(this.__read=f),this},set:"#initialize",_set:function(r,i){return this.width=r,this.height=i,this},equals:function(r){return r===this||r&&(this.width===r.width&&this.height===r.height||Array.isArray(r)&&this.width===r[0]&&this.height===r[1])||!1},clone:function(){return new Q(this.width,this.height)},toString:function(){var r=B.instance;return"{ width: "+r.number(this.width)+", height: "+r.number(this.height)+" }"},_serialize:function(r){var i=r.formatter;return[i.number(this.width),i.number(this.height)]},add:function(){var r=Q.read(arguments);return new Q(this.width+r.width,this.height+r.height)},subtract:function(){var r=Q.read(arguments);return new Q(this.width-r.width,this.height-r.height)},multiply:function(){var r=Q.read(arguments);return new Q(this.width*r.width,this.height*r.height)},divide:function(){var r=Q.read(arguments);return new Q(this.width/r.width,this.height/r.height)},modulo:function(){var r=Q.read(arguments);return new Q(this.width%r.width,this.height%r.height)},negate:function(){return new Q(-this.width,-this.height)},isZero:function(){var r=j.isZero;return r(this.width)&&r(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(r,i){return new Q(Math.min(r.width,i.width),Math.min(r.height,i.height))},max:function(r,i){return new Q(Math.max(r.width,i.width),Math.max(r.height,i.height))},random:function(){return new Q(Math.random(),Math.random())}}},c.each(["round","ceil","floor","abs"],function(r){var i=Math[r];this[r]=function(){return new Q(i(this.width),i(this.height))}},{})),ae=Q.extend({initialize:function(i,s,o,l){this._width=i,this._height=s,this._owner=o,this._setter=l},_set:function(r,i,s){return this._width=r,this._height=i,s||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(r){this._width=r,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(r){this._height=r,this._owner[this._setter](this)}}),le=c.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(i,s,o,l){var f=arguments,d=typeof i,h;if(d==="number"?(this._set(i,s,o,l),h=4):d==="undefined"||i===null?(this._set(0,0,0,0),h=i===null?1:0):f.length===1&&(Array.isArray(i)?(this._set.apply(this,i),h=1):i.x!==n||i.width!==n?(this._set(i.x||0,i.y||0,i.width||0,i.height||0),h=1):i.from===n&&i.to===n&&(this._set(0,0,0,0),c.readSupported(f,this)&&(h=1))),h===n){var _=R.readNamed(f,"from"),g=c.peek(f),b=_.x,S=_.y,y,m;if(g&&g.x!==n||c.hasNamed(f,"to")){var I=R.readNamed(f,"to");y=I.x-b,m=I.y-S,y<0&&(b=I.x,y=-y),m<0&&(S=I.y,m=-m)}else{var C=Q.read(f);y=C.width,m=C.height}this._set(b,S,y,m),h=f.__index}var A=f.__filtered;return A&&(this.__filtered=A),this.__read&&(this.__read=h),this},set:"#initialize",_set:function(r,i,s,o){return this.x=r,this.y=i,this.width=s,this.height=o,this},clone:function(){return new le(this.x,this.y,this.width,this.height)},equals:function(r){var i=c.isPlainValue(r)?le.read(arguments):r;return i===this||i&&this.x===i.x&&this.y===i.y&&this.width===i.width&&this.height===i.height||!1},toString:function(){var r=B.instance;return"{ x: "+r.number(this.x)+", y: "+r.number(this.y)+", width: "+r.number(this.width)+", height: "+r.number(this.height)+" }"},_serialize:function(r){var i=r.formatter;return[i.number(this.x),i.number(this.y),i.number(this.width),i.number(this.height)]},getPoint:function(r){var i=r?R:Z;return new i(this.x,this.y,this,"setPoint")},setPoint:function(){var r=R.read(arguments);this.x=r.x,this.y=r.y},getSize:function(r){var i=r?Q:ae;return new i(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var r=Q.read(arguments),i=this._sx,s=this._sy,o=r.width,l=r.height;i&&(this.x+=(this.width-o)*i),s&&(this.y+=(this.height-l)*s),this.width=o,this.height=l,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(r){if(!this._fw){var i=r-this.x;this.width-=this._sx===.5?i*2:i}this.x=r,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(r){if(!this._fh){var i=r-this.y;this.height-=this._sy===.5?i*2:i}this.y=r,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(r){if(!this._fw){var i=r-this.x;this.width=this._sx===.5?i*2:i}this.x=r-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(r){if(!this._fh){var i=r-this.y;this.height=this._sy===.5?i*2:i}this.y=r-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(r){this._fw||this._sx===.5?this.x=r-this.width/2:(this._sx&&(this.x+=(r-this.x)*2*this._sx),this.width=(r-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(r){this._fh||this._sy===.5?this.y=r-this.height/2:(this._sy&&(this.y+=(r-this.y)*2*this._sy),this.height=(r-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(r){var i=r?R:Z;return new i(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var r=R.read(arguments);return this.setCenterX(r.x),this.setCenterY(r.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(r){return r&&r.width!==n||(Array.isArray(r)?r:arguments).length===4?this._containsRectangle(le.read(arguments)):this._containsPoint(R.read(arguments))},_containsPoint:function(r){var i=r.x,s=r.y;return i>=this.x&&s>=this.y&&i<=this.x+this.width&&s<=this.y+this.height},_containsRectangle:function(r){var i=r.x,s=r.y;return i>=this.x&&s>=this.y&&i+r.width<=this.x+this.width&&s+r.height<=this.y+this.height},intersects:function(){var r=le.read(arguments),i=c.read(arguments)||0;return r.x+r.width>this.x-i&&r.y+r.height>this.y-i&&r.x<this.x+this.width+i&&r.y<this.y+this.height+i},intersect:function(){var r=le.read(arguments),i=Math.max(this.x,r.x),s=Math.max(this.y,r.y),o=Math.min(this.x+this.width,r.x+r.width),l=Math.min(this.y+this.height,r.y+r.height);return new le(i,s,o-i,l-s)},unite:function(){var r=le.read(arguments),i=Math.min(this.x,r.x),s=Math.min(this.y,r.y),o=Math.max(this.x+this.width,r.x+r.width),l=Math.max(this.y+this.height,r.y+r.height);return new le(i,s,o-i,l-s)},include:function(){var r=R.read(arguments),i=Math.min(this.x,r.x),s=Math.min(this.y,r.y),o=Math.max(this.x+this.width,r.x),l=Math.max(this.y+this.height,r.y);return new le(i,s,o-i,l-s)},expand:function(){var r=Q.read(arguments),i=r.width,s=r.height;return new le(this.x-i/2,this.y-s/2,this.width+i,this.height+s)},scale:function(r,i){return this.expand(this.width*r-this.width,this.height*(i===n?r:i)-this.height)}},c.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(r,i){var s=r.join(""),o=/^[RL]/.test(s);i>=4&&(r[1]+=o?"Y":"X");var l=r[o?0:1],f=r[o?1:0],d="get"+l,h="get"+f,_="set"+l,g="set"+f,b="get"+s,S="set"+s;this[b]=function(y){var m=y?R:Z;return new m(this[d](),this[h](),this,S)},this[S]=function(){var y=R.read(arguments);this[_](y.x),this[g](y.y)}},{beans:!0})),$e=le.extend({initialize:function(i,s,o,l,f,d){this._set(i,s,o,l,!0),this._owner=f,this._setter=d},_set:function(r,i,s,o,l){return this._x=r,this._y=i,this._width=s,this._height=o,l||this._owner[this._setter](this),this}},new function(){var r=le.prototype;return c.each(["x","y","width","height"],function(i){var s=c.capitalize(i),o="_"+i;this["get"+s]=function(){return this[o]},this["set"+s]=function(l){this[o]=l,this._dontNotify||this._owner[this._setter](this)}},c.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(i){var s="set"+i;this[s]=function(){this._dontNotify=!0,r[s].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(i){var s=this._owner;s._changeSelection&&s._changeSelection(2,i)}}))}),_e=c.extend({_class:"Matrix",initialize:function r(i,s){var o=arguments,l=o.length,f=!0;if(l>=6?this._set.apply(this,o):l===1||l===2?i instanceof r?this._set(i._a,i._b,i._c,i._d,i._tx,i._ty,s):Array.isArray(i)?this._set.apply(this,s?i.concat([s]):i):f=!1:l?f=!1:this.reset(),!f)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(r,i,s,o,l,f,d){return this._a=r,this._b=i,this._c=s,this._d=o,this._tx=l,this._ty=f,d||this._changed(),this},_serialize:function(r,i){return c.serialize(this.getValues(),r,!0,i)},_changed:function(){var r=this._owner;r&&(r._applyMatrix?r.transform(null,!0):r._changed(25))},clone:function(){return new _e(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(r){return r===this||r&&this._a===r._a&&this._b===r._b&&this._c===r._c&&this._d===r._d&&this._tx===r._tx&&this._ty===r._ty},toString:function(){var r=B.instance;return"[["+[r.number(this._a),r.number(this._c),r.number(this._tx)].join(", ")+"], ["+[r.number(this._b),r.number(this._d),r.number(this._ty)].join(", ")+"]]"},reset:function(r){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,r||this._changed(),this},apply:function(r,i){var s=this._owner;return s?(s.transform(null,c.pick(r,!0),i),this.isIdentity()):!1},translate:function(){var r=R.read(arguments),i=r.x,s=r.y;return this._tx+=i*this._a+s*this._c,this._ty+=i*this._b+s*this._d,this._changed(),this},scale:function(){var r=arguments,i=R.read(r),s=R.read(r,0,{readNull:!0});return s&&this.translate(s),this._a*=i.x,this._b*=i.x,this._c*=i.y,this._d*=i.y,s&&this.translate(s.negate()),this._changed(),this},rotate:function(r){r*=Math.PI/180;var i=R.read(arguments,1),s=i.x,o=i.y,l=Math.cos(r),f=Math.sin(r),d=s-s*l+o*f,h=o-s*f-o*l,_=this._a,g=this._b,b=this._c,S=this._d;return this._a=l*_+f*b,this._b=l*g+f*S,this._c=-f*_+l*b,this._d=-f*g+l*S,this._tx+=d*_+h*b,this._ty+=d*g+h*S,this._changed(),this},shear:function(){var r=arguments,i=R.read(r),s=R.read(r,0,{readNull:!0});s&&this.translate(s);var o=this._a,l=this._b;return this._a+=i.y*this._c,this._b+=i.y*this._d,this._c+=i.x*o,this._d+=i.x*l,s&&this.translate(s.negate()),this._changed(),this},skew:function(){var r=arguments,i=R.read(r),s=R.read(r,0,{readNull:!0}),o=Math.PI/180,l=new R(Math.tan(i.x*o),Math.tan(i.y*o));return this.shear(l,s)},append:function(r,i){if(r){var s=this._a,o=this._b,l=this._c,f=this._d,d=r._a,h=r._c,_=r._b,g=r._d,b=r._tx,S=r._ty;this._a=d*s+_*l,this._c=h*s+g*l,this._b=d*o+_*f,this._d=h*o+g*f,this._tx+=b*s+S*l,this._ty+=b*o+S*f,i||this._changed()}return this},prepend:function(r,i){if(r){var s=this._a,o=this._b,l=this._c,f=this._d,d=this._tx,h=this._ty,_=r._a,g=r._c,b=r._b,S=r._d,y=r._tx,m=r._ty;this._a=_*s+g*o,this._c=_*l+g*f,this._b=b*s+S*o,this._d=b*l+S*f,this._tx=_*d+g*h+y,this._ty=b*d+S*h+m,i||this._changed()}return this},appended:function(r){return this.clone().append(r)},prepended:function(r){return this.clone().prepend(r)},invert:function(){var r=this._a,i=this._b,s=this._c,o=this._d,l=this._tx,f=this._ty,d=r*o-i*s,h=null;return d&&!isNaN(d)&&isFinite(l)&&isFinite(f)&&(this._a=o/d,this._b=-i/d,this._c=-s/d,this._d=r/d,this._tx=(s*f-o*l)/d,this._ty=(i*l-r*f)/d,h=this),h},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new _e(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var r=this._a*this._d-this._c*this._b;return r&&!isNaN(r)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(r,i,s){return arguments.length<3?this._transformPoint(R.read(arguments)):this._transformCoordinates(r,i,s)},_transformPoint:function(r,i,s){var o=r.x,l=r.y;return i||(i=new R),i._set(o*this._a+l*this._c+this._tx,o*this._b+l*this._d+this._ty,s)},_transformCoordinates:function(r,i,s){for(var o=0,l=2*s;o<l;o+=2){var f=r[o],d=r[o+1];i[o]=f*this._a+d*this._c+this._tx,i[o+1]=f*this._b+d*this._d+this._ty}return i},_transformCorners:function(r){var i=r.x,s=r.y,o=i+r.width,l=s+r.height,f=[i,s,o,s,o,l,i,l];return this._transformCoordinates(f,f,4)},_transformBounds:function(r,i,s){for(var o=this._transformCorners(r),l=o.slice(0,2),f=l.slice(),d=2;d<8;d++){var h=o[d],_=d&1;h<l[_]?l[_]=h:h>f[_]&&(f[_]=h)}return i||(i=new le),i._set(l[0],l[1],f[0]-l[0],f[1]-l[1],s)},inverseTransform:function(){return this._inverseTransform(R.read(arguments))},_inverseTransform:function(r,i,s){var o=this._a,l=this._b,f=this._c,d=this._d,h=this._tx,_=this._ty,g=o*d-l*f,b=null;if(g&&!isNaN(g)&&isFinite(h)&&isFinite(_)){var S=r.x-this._tx,y=r.y-this._ty;i||(i=new R),b=i._set((S*d-y*f)/g,(y*o-S*l)/g,s)}return b},decompose:function(){var r=this._a,i=this._b,s=this._c,o=this._d,l=r*o-i*s,f=Math.sqrt,d=Math.atan2,h=180/Math.PI,_,g,b;if(r!==0||i!==0){var S=f(r*r+i*i);_=Math.acos(r/S)*(i>0?1:-1),g=[S,l/S],b=[d(r*s+i*o,S*S),0]}else if(s!==0||o!==0){var y=f(s*s+o*o);_=Math.asin(s/y)*(o>0?1:-1),g=[l/y,y],b=[0,d(r*s+i*o,y*y)]}else _=0,b=g=[0,0];return{translation:this.getTranslation(),rotation:_*h,scaling:new R(g),skewing:new R(b[0]*h,b[1]*h)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new R(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(r){this.isIdentity()||r.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},c.each(["a","b","c","d","tx","ty"],function(r){var i=c.capitalize(r),s="_"+r;this["get"+i]=function(){return this[s]},this["set"+i]=function(o){this[s]=o,this._changed()}},{})),Ce=c.extend({_class:"Line",initialize:function(i,s,o,l,f){var d=!1;arguments.length>=4?(this._px=i,this._py=s,this._vx=o,this._vy=l,d=f):(this._px=i.x,this._py=i.y,this._vx=s.x,this._vy=s.y,d=o),d||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new R(this._px,this._py)},getVector:function(){return new R(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(r,i){return Ce.intersect(this._px,this._py,this._vx,this._vy,r._px,r._py,r._vx,r._vy,!0,i)},getSide:function(r,i){return Ce.getSide(this._px,this._py,this._vx,this._vy,r.x,r.y,!0,i)},getDistance:function(r){return Math.abs(this.getSignedDistance(r))},getSignedDistance:function(r){return Ce.getSignedDistance(this._px,this._py,this._vx,this._vy,r.x,r.y,!0)},isCollinear:function(r){return R.isCollinear(this._vx,this._vy,r._vx,r._vy)},isOrthogonal:function(r){return R.isOrthogonal(this._vx,this._vy,r._vx,r._vy)},statics:{intersect:function(r,i,s,o,l,f,d,h,_,g){_||(s-=r,o-=i,d-=l,h-=f);var b=s*h-o*d;if(!j.isMachineZero(b)){var S=r-l,y=i-f,m=(d*y-h*S)/b,I=(s*y-o*S)/b,C=1e-12,A=-C,w=1+C;if(g||A<m&&m<w&&A<I&&I<w)return g||(m=m<=0?0:m>=1?1:m),new R(r+m*s,i+m*o)}},getSide:function(r,i,s,o,l,f,d,h){d||(s-=r,o-=i);var _=l-r,g=f-i,b=_*o-g*s;return!h&&j.isMachineZero(b)&&(b=(_*s+_*s)/(s*s+o*o),b>=0&&b<=1&&(b=0)),b<0?-1:b>0?1:0},getSignedDistance:function(r,i,s,o,l,f,d){return d||(s-=r,o-=i),s===0?o>0?l-r:r-l:o===0?s<0?f-i:i-f:((l-r)*o-(f-i)*s)/(o>s?o*Math.sqrt(1+s*s/(o*o)):s*Math.sqrt(1+o*o/(s*s)))},getDistance:function(r,i,s,o,l,f,d){return Math.abs(Ce.getSignedDistance(r,i,s,o,l,f,d))}}}),bt=k.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(i){k.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Bo(null,null,this),this._view=qe.create(this,i||tt.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(r,i){return c.serialize(this._children,r,!0,i)},_changed:function(r,i){if(r&1){var s=this._view;s&&(s._needsUpdate=!0,!s._requested&&s._autoUpdate&&s.requestUpdate())}var o=this._changes;if(o&&i){var l=this._changesById,f=i._id,d=l[f];d?d.flags|=r:o.push(l[f]={item:i,flags:r})}},clear:function(){for(var r=this._children,i=r.length-1;i>=0;i--)r[i].remove()},isEmpty:function(){return!this._children.length},remove:function r(){return r.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(r){this._currentStyle.set(r)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new Qn({project:this,insert:!0})},getSymbolDefinitions:function(){var r=[],i={};return this.getItems({class:Fo,match:function(s){var o=s._definition,l=o._id;return i[l]||(i[l]=!0,r.push(o)),!1}}),r},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var r=this._selectionItems,i=[];for(var s in r){var o=r[s],l=o._selection;l&1&&o.isInserted()?i.push(o):l||this._updateSelection(o)}return i},_updateSelection:function(r){var i=r._id,s=this._selectionItems;r._selection?s[i]!==r&&(this._selectionCount++,s[i]=r):s[i]===r&&(this._selectionCount--,delete s[i])},selectAll:function(){for(var r=this._children,i=0,s=r.length;i<s;i++)r[i].setFullySelected(!0)},deselectAll:function(){var r=this._selectionItems;for(var i in r)r[i].setFullySelected(!1)},addLayer:function(r){return this.insertLayer(n,r)},insertLayer:function(r,i){if(i instanceof Qn){i._remove(!1,!0),c.splice(this._children,[i],r,0),i._setProject(this,!0);var s=i._name;s&&i.setName(s),this._changes&&i._changed(5),this._activeLayer||(this._activeLayer=i)}else i=null;return i},_insertItem:function(r,i,s){return i=this.insertLayer(r,i)||(this._activeLayer||this._insertItem(n,new Qn(Ie.NO_INSERT),!0)).insertChild(r,i),s&&i.activate&&i.activate(),i},getItems:function(r){return Ie._getItems(this,r)},getItem:function(r){return Ie._getItems(this,r,null,null,!0)[0]||null},importJSON:function(r){this.activate();var i=this._activeLayer;return c.importJSON(r,i&&i.isEmpty()&&i)},removeOn:function(r){var i=this._removeSets;if(i){r==="mouseup"&&(i.mousedrag=null);var s=i[r];if(s){for(var o in s){var l=s[o];for(var f in i){var d=i[f];d&&d!=s&&delete d[l._id]}l.remove()}i[r]=null}}},draw:function(r,i,s){this._updateVersion++,r.save(),i.applyToContext(r);for(var o=this._children,l=new c({offset:new R(0,0),pixelRatio:s,viewMatrix:i.isIdentity()?null:i,matrices:[new _e],updateMatrix:!0}),f=0,d=o.length;f<d;f++)o[f].draw(r,l);if(r.restore(),this._selectionCount>0){r.save(),r.strokeWidth=1;var h=this._selectionItems,_=this._scope.settings.handleSize,g=this._updateVersion;for(var b in h)h[b]._drawSelection(r,i,_,h,g);r.restore()}}}),Ie=c.extend(p,{statics:{extend:function r(i){return i._serializeFields&&(i._serializeFields=c.set({},this.prototype._serializeFields,i._serializeFields)),r.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new _e,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var r=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return c.each(r,function(i){this._events[i]={install:function(s){this.getView()._countItemEvent(s,1)},uninstall:function(s){this.getView()._countItemEvent(s,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:r}})},{initialize:function(){},_initialize:function(r,i){var s=r&&c.isPlainObject(r),o=s&&r.internal===!0,l=this._matrix=new _e,f=s&&r.project||Oe.project,d=Oe.settings;return this._id=o?null:Y.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&d.applyMatrix,i&&l.translate(i),l._owner=this,this._style=new Bo(f._currentStyle,this,f),o||s&&r.insert==!1||!d.insertItems&&!(s&&r.insert===!0)?this._setProject(f):(s&&r.parent||f)._insertItem(n,this,!0),s&&r!==Ie.NO_INSERT&&this.set(r,{internal:!0,insert:!0,project:!0,parent:!0}),s},_serialize:function(r,i){var s={},o=this;function l(f){for(var d in f){var h=o[d];c.equals(h,d==="leading"?f.fontSize*1.2:f[d])||(s[d]=c.serialize(h,r,d!=="data",i))}}return l(this._serializeFields),this instanceof sr||l(this._style._defaults),[this._class,s]},_changed:function(r){var i=this._symbol,s=this._parent||i,o=this._project;r&8&&(this._bounds=this._position=this._decomposed=n),r&16&&(this._globalMatrix=n),s&&r&72&&Ie._clearBoundsCache(s),r&2&&Ie._clearBoundsCache(this),o&&o._changed(r,this),i&&i._changed(r)},getId:function(){return this._id},getName:function(){return this._name},setName:function(r){if(this._name&&this._removeNamed(),r===+r+"")throw new Error("Names consisting only of numbers are not supported.");var i=this._getOwner();if(r&&i){var s=i._children,o=i._namedChildren;(o[r]=o[r]||[]).push(this),r in s||(s[r]=this)}this._name=r||n,this._changed(256)},getStyle:function(){return this._style},setStyle:function(r){this.getStyle().set(r)}},c.each(["locked","visible","blendMode","opacity","guide"],function(r){var i=c.capitalize(r),s="_"+r,o={locked:256,visible:265};this["get"+i]=function(){return this[s]},this["set"+i]=function(l){l!=this[s]&&(this[s]=l,this._changed(o[r]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(r){if(r!==this._selection){this._selection=r;var i=this._project;i&&(i._updateSelection(this),this._changed(257))}},_changeSelection:function(r,i){var s=this._selection;this.setSelection(i?s|r:s&~r)},isSelected:function(){if(this._selectChildren){for(var r=this._children,i=0,s=r.length;i<s;i++)if(r[i].isSelected())return!0}return!!(this._selection&1)},setSelected:function(r){if(this._selectChildren)for(var i=this._children,s=0,o=i.length;s<o;s++)i[s].setSelected(r);this._changeSelection(1,r)},isFullySelected:function(){var r=this._children,i=!!(this._selection&1);if(r&&i){for(var s=0,o=r.length;s<o;s++)if(!r[s].isFullySelected())return!1;return!0}return i},setFullySelected:function(r){var i=this._children;if(i)for(var s=0,o=i.length;s<o;s++)i[s].setFullySelected(r);this._changeSelection(1,r)},isClipMask:function(){return this._clipMask},setClipMask:function(r){this._clipMask!=(r=!!r)&&(this._clipMask=r,r&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(r){this._data=r},getPosition:function(r){var i=r?R:Z,s=this._position||(this._position=this._getPositionFromBounds());return new i(s.x,s.y,this,"setPosition")},setPosition:function(){this.translate(R.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(r){return this._pivot?this._matrix._transformPoint(this._pivot):(r||this.getBounds()).getCenter(!0)},getPivot:function(){var r=this._pivot;return r?new Z(r.x,r.y,this,"setPivot"):null},setPivot:function(){this._pivot=R.read(arguments,0,{clone:!0,readNull:!0}),this._position=n}},c.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(r,i){this[i]=function(s){return this.getBounds(s,r)}},{beans:!0,getBounds:function(r,i){var s=i||r instanceof _e,o=c.set({},s?i:r,this._boundsOptions);(!o.stroke||this.getStrokeScaling())&&(o.cacheItem=this);var l=this._getCachedBounds(s&&r,o).rect;return arguments.length?l:new $e(l.x,l.y,l.width,l.height,this,"setBounds")},setBounds:function(){var r=le.read(arguments),i=this.getBounds(),s=this._matrix,o=new _e,l=r.getCenter();o.translate(l),(r.width!=i.width||r.height!=i.height)&&(s.isInvertible()||(s.set(s._backup||new _e().translate(s.getTranslation())),i=this.getBounds()),o.scale(i.width!==0?r.width/i.width:0,i.height!==0?r.height/i.height:0)),l=i.getCenter(),o.translate(-l.x,-l.y),this.transform(o)},_getBounds:function(r,i){var s=this._children;return!s||!s.length?new le:(Ie._updateBoundsCache(this,i.cacheItem),Ie._getBounds(s,r,i))},_getBoundsCacheKey:function(r,i){return[r.stroke?1:0,r.handle?1:0,i?1:0].join("")},_getCachedBounds:function(r,i,s){r=r&&r._orNullIfIdentity();var o=i.internal&&!s,l=i.cacheItem,f=o?null:this._matrix._orNullIfIdentity(),d=l&&(!r||r.equals(f))&&this._getBoundsCacheKey(i,o),h=this._bounds;if(Ie._updateBoundsCache(this._parent||this._symbol,l),d&&h&&d in h){var _=h[d];return{rect:_.rect.clone(),nonscaling:_.nonscaling}}var g=this._getBounds(r||f,i),b=g.rect||g,S=this._style,y=g.nonscaling||S.hasStroke()&&!S.getStrokeScaling();if(d){h||(this._bounds=h={});var _=h[d]={rect:b.clone(),nonscaling:y,internal:o}}return{rect:b,nonscaling:y}},_getStrokeMatrix:function(r,i){var s=this.getStrokeScaling()?null:i&&i.internal?this:this._parent||this._symbol&&this._symbol._item,o=s?s.getViewMatrix().invert():r;return o&&o._shiftless()},statics:{_updateBoundsCache:function(r,i){if(r&&i){var s=i._id,o=r._boundsCache=r._boundsCache||{ids:{},list:[]};o.ids[s]||(o.list.push(i),o.ids[s]=i)}},_clearBoundsCache:function(r){var i=r._boundsCache;if(i){r._bounds=r._position=r._boundsCache=n;for(var s=0,o=i.list,l=o.length;s<l;s++){var f=o[s];f!==r&&(f._bounds=f._position=n,f._boundsCache&&Ie._clearBoundsCache(f))}}},_getBounds:function(r,i,s){var o=1/0,l=-o,f=o,d=l,h=!1;s=s||{};for(var _=0,g=r.length;_<g;_++){var b=r[_];if(b._visible&&!b.isEmpty(!0)){var S=b._getCachedBounds(i&&i.appended(b._matrix),s,!0),y=S.rect;o=Math.min(y.x,o),f=Math.min(y.y,f),l=Math.max(y.x+y.width,l),d=Math.max(y.y+y.height,d),S.nonscaling&&(h=!0)}}return{rect:isFinite(o)?new le(o,f,l-o,d-f):new le,nonscaling:h}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var r=this._decompose();return r?r.rotation:0},setRotation:function(r){var i=this.getRotation();if(i!=null&&r!=null){var s=this._decomposed;this.rotate(r-i),s&&(s.rotation=r,this._decomposed=s)}},getScaling:function(){var r=this._decompose(),i=r&&r.scaling;return new Z(i?i.x:1,i?i.y:1,this,"setScaling")},setScaling:function(){var r=this.getScaling(),i=R.read(arguments,0,{clone:!0,readNull:!0});if(r&&i&&!r.equals(i)){var s=this.getRotation(),o=this._decomposed,l=new _e,f=j.isZero;if(f(r.x)||f(r.y))l.translate(o.translation),s&&l.rotate(s),l.scale(i.x,i.y),this._matrix.set(l);else{var d=this.getPosition(!0);l.translate(d),s&&l.rotate(s),l.scale(i.x/r.x,i.y/r.y),s&&l.rotate(-s),l.translate(d.negate()),this.transform(l)}o&&(o.scaling=i,this._decomposed=o)}},getMatrix:function(){return this._matrix},setMatrix:function(){var r=this._matrix;r.set.apply(r,arguments)},getGlobalMatrix:function(r){var i=this._globalMatrix;if(i)for(var s=this._parent,o=[];s;){if(!s._globalMatrix){i=null;for(var l=0,f=o.length;l<f;l++)o[l]._globalMatrix=null;break}o.push(s),s=s._parent}if(!i){i=this._globalMatrix=this._matrix.clone();var s=this._parent;s&&i.prepend(s.getGlobalMatrix(!0))}return r?i:i.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(r){(this._applyMatrix=this._canApplyMatrix&&!!r)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(r,i){if(this._project!==r){this._project&&this._installEvents(!1),this._project=r;for(var s=this._children,o=0,l=s&&s.length;o<l;o++)s[o]._setProject(r);i=!0}i&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function r(i){r.base.call(this,i);for(var s=this._children,o=0,l=s&&s.length;o<l;o++)s[o]._installEvents(i)},getLayer:function(){for(var r=this;r=r._parent;)if(r instanceof Qn)return r;return null},getParent:function(){return this._parent},setParent:function(r){return r.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(r){this.removeChildren(),this.addChildren(r)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var r=this._getOwner();return r&&r._children[this._index+1]||null},getPreviousSibling:function(){var r=this._getOwner();return r&&r._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(r){return r===this||r&&this._class===r._class&&this._style.equals(r._style)&&this._matrix.equals(r._matrix)&&this._locked===r._locked&&this._visible===r._visible&&this._blendMode===r._blendMode&&this._opacity===r._opacity&&this._clipMask===r._clipMask&&this._guide===r._guide&&this._equals(r)||!1},_equals:function(r){return c.equals(this._children,r._children)},clone:function(r){var i=new this.constructor(Ie.NO_INSERT),s=this._children,o=c.pick(r?r.insert:n,r===n||r===!0),l=c.pick(r?r.deep:n,!0);s&&i.copyAttributes(this),(!s||l)&&i.copyContent(this),s||i.copyAttributes(this),o&&i.insertAbove(this);var f=this._name,d=this._parent;if(f&&d){for(var s=d._children,h=f,_=1;s[f];)f=h+" "+_++;f!==h&&i.setName(f)}return i},copyContent:function(r){for(var i=r._children,s=0,o=i&&i.length;s<o;s++)this.addChild(i[s].clone(!1),!0)},copyAttributes:function(r,i){this.setStyle(r._style);for(var s=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],o=0,l=s.length;o<l;o++){var f=s[o];r.hasOwnProperty(f)&&(this[f]=r[f])}i||this._matrix.set(r._matrix,!0),this.setApplyMatrix(r._applyMatrix),this.setPivot(r._pivot),this.setSelection(r._selection);var d=r._data,h=r._name;this._data=d?c.clone(d):null,h&&this.setName(h)},rasterize:function(r,i){var s,o,l;c.isPlainObject(r)?(s=r.resolution,o=r.insert,l=r.raster):(s=r,o=i),l?l.matrix.reset(!0):l=new ei(Ie.NO_INSERT);var f=this.getStrokeBounds(),d=(s||this.getView().getResolution())/72,h=f.getTopLeft().floor(),_=f.getBottomRight().ceil(),g=new Q(_.subtract(h)),b=g.multiply(d);if(l.setSize(b,!0),!b.isZero()){var S=l.getContext(!0),y=new _e().scale(d).translate(h.negate());S.save(),y.applyToContext(S),this.draw(S,new c({matrices:[y]})),S.restore()}return l.transform(new _e().translate(h.add(g.divide(2))).scale(1/d)),(o===n||o)&&l.insertAbove(this),l},contains:function(){var r=this._matrix;return r.isInvertible()&&!!this._contains(r._inverseTransform(R.read(arguments)))},_contains:function(r){var i=this._children;if(i){for(var s=i.length-1;s>=0;s--)if(i[s].contains(r))return!0;return!1}return r.isInside(this.getInternalBounds())},isInside:function(){return le.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Le.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(r,i){return r instanceof Ie?this._asPathItem().getIntersections(r._asPathItem(),null,i,!0).length>0:!1}},new function(){function r(){var o=arguments;return this._hitTest(R.read(o),ar.getOptions(o))}function i(){var o=arguments,l=R.read(o),f=ar.getOptions(o),d=[];return this._hitTest(l,new c({all:d},f)),d}function s(o,l,f,d){var h=this._children;if(h)for(var _=h.length-1;_>=0;_--){var g=h[_],b=g!==d&&g._hitTest(o,l,f);if(b&&!l.all)return b}return null}return bt.inject({hitTest:r,hitTestAll:i,_hitTest:s}),{hitTest:r,hitTestAll:i,_hitTestChildren:s}},{_hitTest:function(r,i,s){if(this._locked||!this._visible||this._guide&&!i.guides||this.isEmpty())return null;var o=this._matrix,l=s?s.appended(o):this.getGlobalMatrix().prepend(this.getView()._matrix),f=Math.max(i.tolerance,1e-12),d=i._tolerancePadding=new Q(Le._getStrokePadding(f,o._shiftless().invert()));if(r=o._inverseTransform(r),!r||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(d.multiply(2))._containsPoint(r))return null;var h=!(i.guides&&!this._guide||i.selected&&!this.isSelected()||i.type&&i.type!==c.hyphenate(this._class)||i.class&&!(this instanceof i.class)),_=i.match,g=this,b,S;function y(v){return v&&_&&!_(v)&&(v=null),v&&i.all&&i.all.push(v),v}function m(v,x){var P=x?b["get"+x]():g.getPosition();if(r.subtract(P).divide(d).length<=1)return new ar(v,g,{name:x?c.hyphenate(x):v,point:P})}var I=i.position,C=i.center,A=i.bounds;if(h&&this._parent&&(I||C||A)){if((C||A)&&(b=this.getInternalBounds()),S=I&&m("position")||C&&m("center","Center"),!S&&A)for(var w=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],O=0;O<8&&!S;O++)S=m("bounds",w[O]);S=y(S)}return S||(S=this._hitTestChildren(r,i,l)||h&&y(this._hitTestSelf(r,i,l,this.getStrokeScaling()?null:l._shiftless().invert()))||null),S&&S.point&&(S.point=o.transform(S.point)),S},_hitTestSelf:function(r,i){if(i.fill&&this.hasFill()&&this._contains(r))return new ar("fill",this)},matches:function(r,i){function s(d,h){for(var _ in d)if(d.hasOwnProperty(_)){var g=d[_],b=h[_];if(c.isPlainObject(g)&&c.isPlainObject(b)){if(!s(g,b))return!1}else if(!c.equals(g,b))return!1}return!0}var o=typeof r;if(o==="object"){for(var l in r)if(r.hasOwnProperty(l)&&!this.matches(l,r[l]))return!1;return!0}else{if(o==="function")return r(this);if(r==="match")return i(this);var f=/^(empty|editable)$/.test(r)?this["is"+c.capitalize(r)]():r==="type"?c.hyphenate(this._class):this[r];if(r==="class"){if(typeof i=="function")return this instanceof i;f=this._class}if(typeof i=="function")return!!i(f);if(i){if(i.test)return i.test(f);if(c.isPlainObject(i))return s(i,f)}return c.equals(f,i)}},getItems:function(r){return Ie._getItems(this,r,this._matrix)},getItem:function(r){return Ie._getItems(this,r,this._matrix,null,!0)[0]||null},statics:{_getItems:function r(i,s,o,l,f){if(!l){var d=typeof s=="object"&&s,h=d&&d.overlapping,_=d&&d.inside,g=h||_,y=g&&le.read([g]);l={items:[],recursive:d&&d.recursive!==!1,inside:!!_,overlapping:!!h,rect:y,path:h&&new Le.Rectangle({rectangle:y,insert:!1})},d&&(s=c.filter({},s,{recursive:!0,inside:!0,overlapping:!0}))}var b=i._children,S=l.items,y=l.rect;o=y&&(o||new _e);for(var m=0,I=b&&b.length;m<I;m++){var C=b[m],A=o&&o.appended(C._matrix),w=!0;if(y){var g=C.getBounds(A);if(!y.intersects(g))continue;y.contains(g)||l.overlapping&&(g.contains(y)||l.path.intersects(C,A))||(w=!1)}if(w&&C.matches(s)&&(S.push(C),f)||(l.recursive!==!1&&r(C,s,A,l,f),f&&S.length>0))break}return S}}},{importJSON:function(r){var i=c.importJSON(r,this);return i!==this?this.addChild(i):i},addChild:function(r){return this.insertChild(n,r)},insertChild:function(r,i){var s=i?this.insertChildren(r,[i]):null;return s&&s[0]},addChildren:function(r){return this.insertChildren(this._children.length,r)},insertChildren:function(r,i){var s=this._children;if(s&&i&&i.length>0){i=c.slice(i);for(var o={},l=i.length-1;l>=0;l--){var f=i[l],d=f&&f._id;!f||o[d]?i.splice(l,1):(f._remove(!1,!0),o[d]=!0)}c.splice(s,i,r,0);for(var h=this._project,_=h._changes,l=0,g=i.length;l<g;l++){var f=i[l],b=f._name;f._parent=this,f._setProject(h,!0),b&&f.setName(b),_&&f._changed(5)}this._changed(11)}else i=null;return i},_insertItem:"#insertChild",_insertAt:function(r,i){var s=r&&r._getOwner(),o=r!==this&&s?this:null;return o&&(o._remove(!1,!0),s._insertItem(r._index+i,o)),o},insertAbove:function(r){return this._insertAt(r,1)},insertBelow:function(r){return this._insertAt(r,0)},sendToBack:function(){var r=this._getOwner();return r?r._insertItem(0,this):null},bringToFront:function(){var r=this._getOwner();return r?r._insertItem(n,this):null},appendTop:"#addChild",appendBottom:function(r){return this.insertChild(0,r)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(r){return r._insertItem(n,this)},copyTo:function(r){return this.clone(!1).addTo(r)},reduce:function(r){var i=this._children;if(i&&i.length===1){var s=i[0].reduce(r);return this._parent?(s.insertAbove(this),this.remove()):s.remove(),s}return this},_removeNamed:function(){var r=this._getOwner();if(r){var i=r._children,s=r._namedChildren,o=this._name,l=s[o],f=l?l.indexOf(this):-1;f!==-1&&(i[o]==this&&delete i[o],l.splice(f,1),l.length?i[o]=l[0]:delete s[o])}},_remove:function(r,i){var s=this._getOwner(),o=this._project,l=this._index;return this._style&&this._style._dispose(),s?(this._name&&this._removeNamed(),l!=null&&(o._activeLayer===this&&(o._activeLayer=this.getNextSibling()||this.getPreviousSibling()),c.splice(s._children,null,l,1)),this._installEvents(!1),r&&o._changes&&this._changed(5),i&&s._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(r){var i=r&&r.insertBelow(this);return i&&this.remove(),i},removeChildren:function(r,i){if(!this._children)return null;r=r||0,i=c.pick(i,this._children.length);for(var s=c.splice(this._children,null,r,i-r),o=s.length-1;o>=0;o--)s[o]._remove(!0,!1);return s.length>0&&this._changed(11),s},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var r=0,i=this._children.length;r<i;r++)this._children[r]._index=r;this._changed(11)}},isEmpty:function(r){var i=this._children,s=i?i.length:0;if(r){for(var o=0;o<s;o++)if(!i[o].isEmpty(r))return!1;return!0}return!s},isEditable:function(){for(var r=this;r;){if(!r._visible||r._locked)return!1;r=r._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(r){function i(d){var h=[];do h.unshift(d);while(d=d._parent);return h}for(var s=i(this),o=i(r),l=0,f=Math.min(s.length,o.length);l<f;l++)if(s[l]!=o[l])return s[l]._index<o[l]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(r){return this._getOrder(r)===-1},isBelow:function(r){return this._getOrder(r)===1},isParent:function(r){return this._parent===r},isChild:function(r){return r&&r._parent===this},isDescendant:function(r){for(var i=this;i=i._parent;)if(i===r)return!0;return!1},isAncestor:function(r){return r?r.isDescendant(this):!1},isSibling:function(r){return this._parent===r._parent},isGroupedWith:function(r){for(var i=this._parent;i;){if(i._parent&&/^(Group|Layer|CompoundPath)$/.test(i._class)&&r.isDescendant(i))return!0;i=i._parent}return!1}},c.each(["rotate","scale","shear","skew"],function(r){var i=r==="rotate";this[r]=function(){var s=arguments,o=(i?c:R).read(s),l=R.read(s,0,{readNull:!0});return this.transform(new _e()[r](o,l||this.getPosition(!0)))}},{translate:function(){var r=new _e;return this.transform(r.translate.apply(r,arguments))},transform:function(r,i,s){var o=this._matrix,l=r&&!r.isIdentity(),f=s&&this._canApplyMatrix||this._applyMatrix&&(l||!o.isIdentity()||i&&this._children);if(!l&&!f)return this;if(l){!r.isInvertible()&&o.isInvertible()&&(o._backup=o.getValues()),o.prepend(r,!0);var d=this._style,h=d.getFillColor(!0),_=d.getStrokeColor(!0);h&&h.transform(r),_&&_.transform(r)}if(f&&(f=this._transformContent(o,i,s))){var g=this._pivot;g&&o._transformPoint(g,g,!0),o.reset(!0),s&&this._canApplyMatrix&&(this._applyMatrix=!0)}var b=this._bounds,S=this._position;(l||f)&&this._changed(25);var y=l&&b&&r.decompose();if(y&&y.skewing.isZero()&&y.rotation%90===0){for(var m in b){var I=b[m];if(I.nonscaling)delete b[m];else if(f||!I.internal){var C=I.rect;r._transformBounds(C,C)}}this._bounds=b;var A=b[this._getBoundsCacheKey(this._boundsOptions||{})];A&&(this._position=this._getPositionFromBounds(A.rect))}else l&&S&&this._pivot&&(this._position=r._transformPoint(S,S));return this},_transformContent:function(r,i,s){var o=this._children;if(o){for(var l=0,f=o.length;l<f;l++)o[l].transform(r,i,s);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(R.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(R.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(R.read(arguments))},localToParent:function(){return this._matrix._transformPoint(R.read(arguments))},fitBounds:function(r,i){r=le.read(arguments);var s=this.getBounds(),o=s.height/s.width,l=r.height/r.width,f=(i?o>l:o<l)?r.width/s.width:r.height/s.height,d=new le(new R,new Q(s.width*f,s.height*f));d.setCenter(r.getCenter()),this.setBounds(d)}}),{_setStyles:function(r,i,s){var o=this._style,l=this._matrix;if(o.hasFill()&&(r.fillStyle=o.getFillColor().toCanvasStyle(r,l)),o.hasStroke()){r.strokeStyle=o.getStrokeColor().toCanvasStyle(r,l),r.lineWidth=o.getStrokeWidth();var f=o.getStrokeJoin(),d=o.getStrokeCap(),h=o.getMiterLimit();if(f&&(r.lineJoin=f),d&&(r.lineCap=d),h&&(r.miterLimit=h),Oe.support.nativeDash){var _=o.getDashArray(),g=o.getDashOffset();_&&_.length&&("setLineDash"in r?(r.setLineDash(_),r.lineDashOffset=g):(r.mozDash=_,r.mozDashOffset=g))}}if(o.hasShadow()){var b=i.pixelRatio||1,S=s._shiftless().prepend(new _e().scale(b,b)),y=S.transform(new R(o.getShadowBlur(),0)),m=S.transform(this.getShadowOffset());r.shadowColor=o.getShadowColor().toCanvasStyle(r),r.shadowBlur=y.getLength(),r.shadowOffsetX=m.x,r.shadowOffsetY=m.y}},draw:function(r,i,s){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var o=i.matrices,l=i.viewMatrix,f=this._matrix,d=o[o.length-1].appended(f);if(!!d.isInvertible()){l=l?l.appended(d):d,o.push(d),i.updateMatrix&&(this._globalMatrix=d);var h=this._blendMode,_=j.clamp(this._opacity,0,1),g=h==="normal",b=qo.nativeModes[h],S=g&&_===1||i.dontStart||i.clip||(b||g&&_<1)&&this._canComposite(),y=i.pixelRatio||1,m,I,C;if(!S){var A=this.getStrokeBounds(l);if(!A.width||!A.height){o.pop();return}C=i.offset,I=i.offset=A.getTopLeft().floor(),m=r,r=tt.getContext(A.getSize().ceil().add(1).multiply(y)),y!==1&&r.scale(y,y)}r.save();var w=s?s.appended(f):this._canScaleStroke&&!this.getStrokeScaling(!0)&&l,O=!S&&i.clipItem,v=!w||O;if(S?(r.globalAlpha=_,b&&(r.globalCompositeOperation=h)):v&&r.translate(-I.x,-I.y),v&&(S?f:l).applyToContext(r),O&&i.clipItem.draw(r,i.extend({clip:!0})),w){r.setTransform(y,0,0,y,0,0);var x=i.offset;x&&r.translate(-x.x,-x.y)}this._draw(r,i,l,w),r.restore(),o.pop(),i.clip&&!i.dontFinish&&r.clip(this.getFillRule()),S||(qo.process(h,r,m,_,I.subtract(C).multiply(y)),tt.release(r),i.offset=C)}}},_isUpdated:function(r){var i=this._parent;if(i instanceof Yt)return i._isUpdated(r);var s=this._updateVersion===r;return!s&&i&&i._visible&&i._isUpdated(r)&&(this._updateVersion=r,s=!0),s},_drawSelection:function(r,i,s,o,l){var f=this._selection,d=f&1,h=f&2||d&&this._selectBounds,_=f&4;if(this._drawSelected||(d=!1),(d||h||_)&&this._isUpdated(l)){var g,b=this.getSelectedColor(!0)||(g=this.getLayer())&&g.getSelectedColor(!0),S=i.appended(this.getGlobalMatrix(!0)),y=s/2;if(r.strokeStyle=r.fillStyle=b?b.toCanvasStyle(r):"#009dec",d&&this._drawSelected(r,S,o),_){var m=this.getPosition(!0),I=this._parent,C=I?I.localToGlobal(m):m,A=C.x,w=C.y;r.beginPath(),r.arc(A,w,y,0,Math.PI*2,!0),r.stroke();for(var O=[[0,-1],[1,0],[0,1],[-1,0]],v=y,x=s+1,P=0;P<4;P++){var L=O[P],T=L[0],M=L[1];r.moveTo(A+T*v,w+M*v),r.lineTo(A+T*x,w+M*x),r.stroke()}}if(h){var D=S._transformCorners(this.getInternalBounds());r.beginPath();for(var P=0;P<8;P++)r[P?"lineTo":"moveTo"](D[P],D[++P]);r.closePath(),r.stroke();for(var P=0;P<8;P++)r.fillRect(D[P]-y,D[++P]-y,s,s)}}},_canComposite:function(){return!1}},c.each(["down","drag","up","move"],function(r){this["removeOn"+c.capitalize(r)]=function(){var i={};return i[r]=!0,this.removeOn(i)}},{removeOn:function(r){for(var i in r)if(r[i]){var s="mouse"+i,o=this._project,l=o._removeSets=o._removeSets||{};l[s]=l[s]||{},l[s][this._id]=this}return this}}),{tween:function(r,i,s){s||(s=i,i=r,r=null,s||(s=i,i=null));var o=s&&s.easing,l=s&&s.start,f=s!=null&&(typeof s=="number"?s:s.duration),d=new T3(this,r,i,f,o,l);function h(_){d._handleFrame(_.time*1e3),d.running||this.off("frame",h)}return f&&this.on("frame",h),d},tweenTo:function(r,i){return this.tween(null,r,i)},tweenFrom:function(r,i){return this.tween(r,null,i)}}),sr=Ie.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(i){this._children=[],this._namedChildren={},this._initialize(i)||this.addChildren(Array.isArray(i)?i:arguments)},_changed:function r(i){r.base.call(this,i),i&2050&&(this._clipItem=n)},_getClipItem:function(){var r=this._clipItem;if(r===n){r=null;for(var i=this._children,s=0,o=i.length;s<o;s++)if(i[s]._clipMask){r=i[s];break}this._clipItem=r}return r},isClipped:function(){return!!this._getClipItem()},setClipped:function(r){var i=this.getFirstChild();i&&i.setClipMask(r)},_getBounds:function r(i,s){var o=this._getClipItem();return o?o._getCachedBounds(o._matrix.prepended(i),c.set({},s,{stroke:!1})):r.base.call(this,i,s)},_hitTestChildren:function r(i,s,o){var l=this._getClipItem();return(!l||l.contains(i))&&r.base.call(this,i,s,o,l)},_draw:function(r,i){var s=i.clip,o=!s&&this._getClipItem();i=i.extend({clipItem:o,clip:!1}),s?(r.beginPath(),i.dontStart=i.dontFinish=!0):o&&o.draw(r,i.extend({clip:!0}));for(var l=this._children,f=0,d=l.length;f<d;f++){var h=l[f];h!==o&&h.draw(r,i)}}}),Qn=sr.extend({_class:"Layer",initialize:function(){sr.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function r(){return this._parent?r.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),It=Ie.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(i,s){this._initialize(i,s)},_equals:function(r){return this._type===r._type&&this._size.equals(r._size)&&c.equals(this._radius,r._radius)},copyContent:function(r){this.setType(r._type),this.setSize(r._size),this.setRadius(r._radius)},getType:function(){return this._type},setType:function(r){this._type=r},getShape:"#getType",setShape:"#setType",getSize:function(){var r=this._size;return new ae(r.width,r.height,this,"setSize")},setSize:function(){var r=Q.read(arguments);if(!this._size)this._size=r.clone();else if(!this._size.equals(r)){var i=this._type,s=r.width,o=r.height;i==="rectangle"?this._radius.set(Q.min(this._radius,r.divide(2).abs())):i==="circle"?(s=o=(s+o)/2,this._radius=s/2):i==="ellipse"&&this._radius._set(s/2,o/2),this._size._set(s,o),this._changed(9)}},getRadius:function(){var r=this._radius;return this._type==="circle"?r:new ae(r.width,r.height,this,"setRadius")},setRadius:function(r){var i=this._type;if(i==="circle"){if(r===this._radius)return;var s=r*2;this._radius=r,this._size._set(s,s)}else if(r=Q.read(arguments),!this._radius)this._radius=r.clone();else{if(this._radius.equals(r))return;if(this._radius.set(r),i==="rectangle"){var s=Q.max(this._size,r.multiply(2));this._size.set(s)}else i==="ellipse"&&this._size._set(r.width*2,r.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(r){var i=new Le[c.capitalize(this._type)]({center:new R,size:this._size,radius:this._radius,insert:!1});return i.copyAttributes(this),Oe.settings.applyMatrix&&i.setApplyMatrix(!0),(r===n||r)&&i.insertAbove(this),i},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(r,i,s,o){var l=this._style,f=l.hasFill(),d=l.hasStroke(),h=i.dontFinish||i.clip,_=!o;if(f||d||h){var g=this._type,b=this._radius,S=g==="circle";if(i.dontStart||r.beginPath(),_&&S)r.arc(0,0,b,0,Math.PI*2,!0);else{var y=S?b:b.width,m=S?b:b.height,I=this._size,C=I.width,A=I.height;if(_&&g==="rectangle"&&y===0&&m===0)r.rect(-C/2,-A/2,C,A);else{var w=C/2,O=A/2,v=1-.5522847498307936,x=y*v,P=m*v,L=[-w,-O+m,-w,-O+P,-w+x,-O,-w+y,-O,w-y,-O,w-x,-O,w,-O+P,w,-O+m,w,O-m,w,O-P,w-x,O,w-y,O,-w+y,O,-w+x,O,-w,O-P,-w,O-m];o&&o.transform(L,L,32),r.moveTo(L[0],L[1]),r.bezierCurveTo(L[2],L[3],L[4],L[5],L[6],L[7]),w!==y&&r.lineTo(L[8],L[9]),r.bezierCurveTo(L[10],L[11],L[12],L[13],L[14],L[15]),O!==m&&r.lineTo(L[16],L[17]),r.bezierCurveTo(L[18],L[19],L[20],L[21],L[22],L[23]),w!==y&&r.lineTo(L[24],L[25]),r.bezierCurveTo(L[26],L[27],L[28],L[29],L[30],L[31])}}r.closePath()}!h&&(f||d)&&(this._setStyles(r,i,s),f&&(r.fill(l.getFillRule()),r.shadowColor="rgba(0,0,0,0)"),d&&r.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(r,i){var s=new le(this._size).setCenter(0,0),o=this._style,l=i.stroke&&o.hasStroke()&&o.getStrokeWidth();return r&&(s=r._transformBounds(s)),l?s.expand(Le._getStrokePadding(l,this._getStrokeMatrix(r,i))):s}},new function(){function r(s,o,l){var f=s._radius;if(!f.isZero())for(var d=s._size.divide(2),h=1;h<=4;h++){var _=new R(h>1&&h<4?-1:1,h>2?-1:1),g=_.multiply(d),b=g.subtract(_.multiply(f)),S=new le(l?g.add(_.multiply(l)):g,b);if(S.contains(o))return{point:b,quadrant:h}}}function i(s,o,l,f){var d=s.divide(o);return(!f||d.isInQuadrant(f))&&d.subtract(d.normalize()).multiply(o).divide(l).length<=1}return{_contains:function s(o){if(this._type==="rectangle"){var l=r(this,o);return l?o.subtract(l.point).divide(this._radius).getLength()<=1:s.base.call(this,o)}else return o.divide(this.size).getLength()<=.5},_hitTestSelf:function s(o,l,f,d){var h=!1,_=this._style,g=l.stroke&&_.hasStroke(),b=l.fill&&_.hasFill();if(g||b){var S=this._type,y=this._radius,m=g?_.getStrokeWidth()/2:0,I=l._tolerancePadding.add(Le._getStrokePadding(m,!_.getStrokeScaling()&&d));if(S==="rectangle"){var C=I.multiply(2),A=r(this,o,C);if(A)h=i(o.subtract(A.point),y,I,A.quadrant);else{var w=new le(this._size).setCenter(0,0),O=w.expand(C),v=w.expand(C.negate());h=O._containsPoint(o)&&!v._containsPoint(o)}}else h=i(o,y,I)}return h?new ar(g?"stroke":"fill",this):s.base.apply(this,arguments)}}},{statics:new function(){function r(i,s,o,l,f){var d=c.create(It.prototype);return d._type=i,d._size=o,d._radius=l,d._initialize(c.getNamed(f),s),d}return{Circle:function(){var i=arguments,s=R.readNamed(i,"center"),o=c.readNamed(i,"radius");return r("circle",s,new Q(o*2),o,i)},Rectangle:function(){var i=arguments,s=le.readNamed(i,"rectangle"),o=Q.min(Q.readNamed(i,"radius"),s.getSize(!0).divide(2));return r("rectangle",s.getCenter(!0),s.getSize(!0),o,i)},Ellipse:function(){var i=arguments,s=It._readEllipse(i),o=s.radius;return r("ellipse",s.center,o.multiply(2),o,i)},_readEllipse:function(i){var s,o;if(c.hasNamed(i,"radius"))s=R.readNamed(i,"center"),o=Q.readNamed(i,"radius");else{var l=le.readNamed(i,"rectangle");s=l.getCenter(!0),o=l.getSize(!0).divide(2)}return{center:s,radius:o}}}}}),ei=Ie.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(i,s){if(!this._initialize(i,s!==n&&R.read(arguments))){var o,l=typeof i,f=l==="string"?u.getElementById(i):l==="object"?i:null;if(f&&f!==Ie.NO_INSERT){if(f.getContext||f.naturalHeight!=null)o=f;else if(f){var d=Q.read(arguments);d.isZero()||(o=tt.getCanvas(d))}}o?this.setImage(o):this.setSource(i)}this._size||(this._size=new Q,this._loaded=!1)},_equals:function(r){return this.getSource()===r.getSource()},copyContent:function(r){var i=r._image,s=r._canvas;if(i)this._setImage(i);else if(s){var o=tt.getCanvas(r._size);o.getContext("2d").drawImage(s,0,0),this._setImage(o)}this._crossOrigin=r._crossOrigin},getSize:function(){var r=this._size;return new ae(r?r.width:0,r?r.height:0,this,"setSize")},setSize:function(r,i){var s=Q.read(arguments);if(s.equals(this._size))i&&this.clear();else if(s.width>0&&s.height>0){var o=!i&&this.getElement();this._setImage(tt.getCanvas(s)),o&&this.getContext(!0).drawImage(o,0,0,s.width,s.height)}else this._canvas&&tt.release(this._canvas),this._size=s.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(r){this.setSize(r,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(r){this.setSize(this.getWidth(),r)},getLoaded:function(){return this._loaded},isEmpty:function(){var r=this._size;return!r||r.width===0&&r.height===0},getResolution:function(){var r=this._matrix,i=new R(0,0).transform(r),s=new R(1,0).transform(r).subtract(i),o=new R(0,1).transform(r).subtract(i);return new Q(72/s.getLength(),72/o.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(r){var i=this;function s(o){var l=i.getView(),f=o&&o.type||"load";l&&i.responds(f)&&(Oe=l._scope,i.emit(f,new Ps(o)))}this._setImage(r),this._loaded?setTimeout(s,0):r&&et.add(r,{load:function(o){i._setImage(r),s(o)},error:s})},_setImage:function(r){this._canvas&&tt.release(this._canvas),r&&r.getContext?(this._image=null,this._canvas=r,this._loaded=!0):(this._image=r,this._canvas=null,this._loaded=!!(r&&r.src&&r.complete)),this._size=new Q(r?r.naturalWidth||r.width:0,r?r.naturalHeight||r.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var r=tt.getContext(this._size);try{this._image&&r.drawImage(this._image,0,0),this._canvas=r.canvas}catch{tt.release(r)}}return this._canvas},setCanvas:"#setImage",getContext:function(r){return this._context||(this._context=this.getCanvas().getContext("2d")),r&&(this._image=null,this._changed(1025)),this._context},setContext:function(r){this._context=r},getSource:function(){var r=this._image;return r&&r.src||this.toDataURL()},setSource:function(r){var i=new e.Image,s=this._crossOrigin;s&&(i.crossOrigin=s),r&&(i.src=r),this.setImage(i)},getCrossOrigin:function(){var r=this._image;return r&&r.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(r){this._crossOrigin=r;var i=this._image;i&&(i.crossOrigin=r)},getSmoothing:function(){return this._smoothing},setSmoothing:function(r){this._smoothing=typeof r=="string"?r:r?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var r=le.read(arguments),i=tt.getContext(r.getSize());return i.drawImage(this.getCanvas(),r.x,r.y,r.width,r.height,0,0,r.width,r.height),i.canvas},getSubRaster:function(){var r=le.read(arguments),i=new ei(Ie.NO_INSERT);return i._setImage(this.getSubCanvas(r)),i.translate(r.getCenter().subtract(this.getSize().divide(2))),i._matrix.prepend(this._matrix),i.insertAbove(this),i},toDataURL:function(){var r=this._image,i=r&&r.src;if(/^data:/.test(i))return i;var s=this.getCanvas();return s?s.toDataURL.apply(s,arguments):null},drawImage:function(r){var i=R.read(arguments,1);this.getContext(!0).drawImage(r,i.x,i.y)},getAverageColor:function(r){var i,s;if(r?r instanceof hn?(s=r,i=r.getBounds()):typeof r=="object"&&("width"in r?i=new le(r):"x"in r&&(i=new le(r.x-.5,r.y-.5,1,1))):i=this.getBounds(),!i)return null;var o=32,l=Math.min(i.width,o),f=Math.min(i.height,o),d=ei._sampleContext;d?d.clearRect(0,0,o+1,o+1):d=ei._sampleContext=tt.getContext(new Q(o)),d.save();var h=new _e().scale(l/i.width,f/i.height).translate(-i.x,-i.y);h.applyToContext(d),s&&s.draw(d,new c({clip:!0,matrices:[h]})),this._matrix.applyToContext(d);var _=this.getElement(),g=this._size;_&&d.drawImage(_,-g.width/2,-g.height/2),d.restore();for(var b=d.getImageData(.5,.5,Math.ceil(l),Math.ceil(f)).data,S=[0,0,0],y=0,m=0,I=b.length;m<I;m+=4){var C=b[m+3];y+=C,C/=255,S[0]+=b[m]*C,S[1]+=b[m+1]*C,S[2]+=b[m+2]*C}for(var m=0;m<3;m++)S[m]/=y;return y?Qe.read(S):null},getPixel:function(){var r=R.read(arguments),i=this.getContext().getImageData(r.x,r.y,1,1).data;return new Qe("rgb",[i[0]/255,i[1]/255,i[2]/255],i[3]/255)},setPixel:function(){var r=arguments,i=R.read(r),s=Qe.read(r),o=s._convert("rgb"),l=s._alpha,f=this.getContext(!0),d=f.createImageData(1,1),h=d.data;h[0]=o[0]*255,h[1]=o[1]*255,h[2]=o[2]*255,h[3]=l!=null?l*255:255,f.putImageData(d,i.x,i.y)},clear:function(){var r=this._size;this.getContext(!0).clearRect(0,0,r.width+1,r.height+1)},createImageData:function(){var r=Q.read(arguments);return this.getContext().createImageData(r.width,r.height)},getImageData:function(){var r=le.read(arguments);return r.isEmpty()&&(r=new le(this._size)),this.getContext().getImageData(r.x,r.y,r.width,r.height)},setImageData:function(r){var i=R.read(arguments,1);this.getContext(!0).putImageData(r,i.x,i.y)},_getBounds:function(r,i){var s=new le(this._size).setCenter(0,0);return r?r._transformBounds(s):s},_hitTestSelf:function(r){if(this._contains(r)){var i=this;return new ar("pixel",i,{offset:r.add(i._size.divide(2)).round(),color:{get:function(){return i.getPixel(this.offset)}}})}},_draw:function(r,i,s){var o=this.getElement();if(o&&o.width>0&&o.height>0){r.globalAlpha=j.clamp(this._opacity,0,1),this._setStyles(r,i,s);var l=this._smoothing,f=l==="off";He.setPrefixed(r,f?"imageSmoothingEnabled":"imageSmoothingQuality",f?!1:l),r.drawImage(o,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),Fo=Ie.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(i,s){this._initialize(i,s!==n&&R.read(arguments,1))||this.setDefinition(i instanceof pr?i:new pr(i))},_equals:function(r){return this._definition===r._definition},copyContent:function(r){this.setDefinition(r._definition)},getDefinition:function(){return this._definition},setDefinition:function(r){this._definition=r,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(r,i){var s=this._definition._item;return s._getCachedBounds(s._matrix.prepended(r),i)},_hitTestSelf:function(r,i,s){var o=i.extend({all:!1}),l=this._definition._item._hitTest(r,o,s);return l&&(l.item=this),l},_draw:function(r,i){this._definition._item.draw(r,i)}}),pr=c.extend({_class:"SymbolDefinition",initialize:function(i,s){this._id=Y.get(),this.project=Oe.project,i&&this.setItem(i,s)},_serialize:function(r,i){return i.add(this,function(){return c.serialize([this._class,this._item],r,!1,i)})},_changed:function(r){r&8&&Ie._clearBoundsCache(this),r&1&&this.project._changed(r)},getItem:function(){return this._item},setItem:function(r,i){r._symbol&&(r=r.clone()),this._item&&(this._item._symbol=null),this._item=r,r.remove(),r.setSelected(!1),i||r.setPosition(new R),r._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(r){return new Fo(this,r)},clone:function(){return new pr(this._item.clone(!1))},equals:function(r){return r===this||r&&this._item.equals(r._item)||!1}}),ar=c.extend({_class:"HitResult",initialize:function(i,s,o){this.type=i,this.item=s,o&&this.inject(o)},statics:{getOptions:function(r){var i=r&&c.read(r);return new c({type:null,tolerance:Oe.settings.hitTolerance,fill:!i,stroke:!i,segments:!i,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},i)}}}),pe=c.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(i,s,o,l,f,d){var h=arguments.length,_,g,b,S;h>0&&(i==null||typeof i=="object"?h===1&&i&&"point"in i?(_=i.point,g=i.handleIn,b=i.handleOut,S=i.selection):(_=i,g=s,b=o,S=l):(_=[i,s],g=o!==n?[o,l]:null,b=f!==n?[f,d]:null)),new zo(_,this,"_point"),new zo(g,this,"_handleIn"),new zo(b,this,"_handleOut"),S&&this.setSelection(S)},_serialize:function(r,i){var s=this._point,o=this._selection,l=o||this.hasHandles()?[s,this._handleIn,this._handleOut]:s;return o&&l.push(o),c.serialize(l,r,!0,i)},_changed:function(r){var i=this._path;if(!!i){var s=i._curves,o=this._index,l;s&&((!r||r===this._point||r===this._handleIn)&&(l=o>0?s[o-1]:i._closed?s[s.length-1]:null)&&l._changed(),(!r||r===this._point||r===this._handleOut)&&(l=s[o])&&l._changed()),i._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(R.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(R.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(R.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var r=this._handleIn,i=this._handleOut;return!r.isZero()&&!i.isZero()&&r.isCollinear(i)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(r){var i=this._selection,s=this._path;this._selection=r=r||0,s&&r!==i&&(s._updateSelection(this,i,r),s._changed(257))},_changeSelection:function(r,i){var s=this._selection;this.setSelection(i?s|r:s&~r)},isSelected:function(){return!!(this._selection&7)},setSelected:function(r){this._changeSelection(7,r)},getIndex:function(){return this._index!==n?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var r=this._path,i=this._index;return r?(i>0&&!r._closed&&i===r._segments.length-1&&i--,r.getCurves()[i]||null):null},getLocation:function(){var r=this.getCurve();return r?new Kt(r,this===r._segment1?0:1):null},getNext:function(){var r=this._path&&this._path._segments;return r&&(r[this._index+1]||this._path._closed&&r[0])||null},smooth:function(r,i,s){var o=r||{},l=o.type,f=o.factor,d=this.getPrevious(),h=this.getNext(),_=(d||this)._point,g=this._point,b=(h||this)._point,S=_.getDistance(g),y=g.getDistance(b);if(!l||l==="catmull-rom"){var m=f===n?.5:f,I=Math.pow(S,m),C=I*I,A=Math.pow(y,m),w=A*A;if(!i&&d){var O=2*w+3*A*I+C,v=3*A*(A+I);this.setHandleIn(v!==0?new R((w*_._x+O*g._x-C*b._x)/v-g._x,(w*_._y+O*g._y-C*b._y)/v-g._y):new R)}if(!s&&h){var O=2*C+3*I*A+w,v=3*I*(I+A);this.setHandleOut(v!==0?new R((C*b._x+O*g._x-w*_._x)/v-g._x,(C*b._y+O*g._y-w*_._y)/v-g._y):new R)}}else if(l==="geometric"){if(d&&h){var x=_.subtract(b),P=f===n?.4:f,L=P*S/(S+y);i||this.setHandleIn(x.multiply(L)),s||this.setHandleOut(x.multiply(L-P))}}else throw new Error("Smoothing method '"+l+"' not supported.")},getPrevious:function(){var r=this._path&&this._path._segments;return r&&(r[this._index-1]||this._path._closed&&r[r.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var r=this._path;return r&&this._index===r._segments.length-1||!1},reverse:function(){var r=this._handleIn,i=this._handleOut,s=r.clone();r.set(i),i.set(s)},reversed:function(){return new pe(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new pe(this._point,this._handleIn,this._handleOut)},equals:function(r){return r===this||r&&this._class===r._class&&this._point.equals(r._point)&&this._handleIn.equals(r._handleIn)&&this._handleOut.equals(r._handleOut)||!1},toString:function(){var r=["point: "+this._point];return this._handleIn.isZero()||r.push("handleIn: "+this._handleIn),this._handleOut.isZero()||r.push("handleOut: "+this._handleOut),"{ "+r.join(", ")+" }"},transform:function(r){this._transformCoordinates(r,new Array(6),!0),this._changed()},interpolate:function(r,i,s){var o=1-s,l=s,f=r._point,d=i._point,h=r._handleIn,_=i._handleIn,g=i._handleOut,b=r._handleOut;this._point._set(o*f._x+l*d._x,o*f._y+l*d._y,!0),this._handleIn._set(o*h._x+l*_._x,o*h._y+l*_._y,!0),this._handleOut._set(o*b._x+l*g._x,o*b._y+l*g._y,!0),this._changed()},_transformCoordinates:function(r,i,s){var o=this._point,l=!s||!this._handleIn.isZero()?this._handleIn:null,f=!s||!this._handleOut.isZero()?this._handleOut:null,d=o._x,h=o._y,_=2;return i[0]=d,i[1]=h,l&&(i[_++]=l._x+d,i[_++]=l._y+h),f&&(i[_++]=f._x+d,i[_++]=f._y+h),r&&(r._transformCoordinates(i,i,_/2),d=i[0],h=i[1],s?(o._x=d,o._y=h,_=2,l&&(l._x=i[_++]-d,l._y=i[_++]-h),f&&(f._x=i[_++]-d,f._y=i[_++]-h)):(l||(i[_++]=d,i[_++]=h),f||(i[_++]=d,i[_++]=h))),i}}),zo=R.extend({initialize:function(i,s,o){var l,f,d;if(!i)l=f=0;else if((l=i[0])!==n)f=i[1];else{var h=i;(l=h.x)===n&&(h=R.read(arguments),l=h.x),f=h.y,d=h.selected}this._x=l,this._y=f,this._owner=s,s[o]=this,d&&this.setSelected(!0)},_set:function(r,i){return this._x=r,this._y=i,this._owner._changed(this),this},getX:function(){return this._x},setX:function(r){this._x=r,this._owner._changed(this)},getY:function(){return this._y},setY:function(r){this._y=r,this._owner._changed(this)},isZero:function(){var r=j.isZero;return r(this._x)&&r(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(r){this._owner._changeSelection(this._getSelection(),r)},_getSelection:function(){var r=this._owner;return this===r._point?1:this===r._handleIn?2:this===r._handleOut?4:0}}),ue=c.extend({_class:"Curve",beans:!0,initialize:function(i,s,o,l,f,d,h,_){var g=arguments.length,b,S,y,m,I,C;g===3?(this._path=i,b=s,S=o):g?g===1?"segment1"in i?(b=new pe(i.segment1),S=new pe(i.segment2)):"point1"in i?(y=i.point1,I=i.handle1,C=i.handle2,m=i.point2):Array.isArray(i)&&(y=[i[0],i[1]],m=[i[6],i[7]],I=[i[2]-i[0],i[3]-i[1]],C=[i[4]-i[6],i[5]-i[7]]):g===2?(b=new pe(i),S=new pe(s)):g===4?(y=i,I=s,C=o,m=l):g===8&&(y=[i,s],m=[h,_],I=[o-i,l-s],C=[f-h,d-_]):(b=new pe,S=new pe),this._segment1=b||new pe(y,null,I),this._segment2=S||new pe(m,C,null)},_serialize:function(r,i){return c.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],r,!0,i)},_changed:function(){this._length=this._bounds=n},clone:function(){return new ue(this._segment1,this._segment2)},toString:function(){var r=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||r.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||r.push("handle2: "+this._segment2._handleIn),r.push("point2: "+this._segment2._point),"{ "+r.join(", ")+" }"},classify:function(){return ue.classify(this.getValues())},remove:function(){var r=!1;if(this._path){var i=this._segment2,s=i._handleOut;r=i.remove(),r&&this._segment1._handleOut.set(s)}return r},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(R.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(R.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(R.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(R.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var r=this._path&&this._path._curves;return r&&(r[this._segment1._index+1]||this._path._closed&&r[0])||null},getPrevious:function(){var r=this._path&&this._path._curves;return r&&(r[this._segment1._index-1]||this._path._closed&&r[r.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var r=this._path;return r&&this._segment1._index===r._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(r){this.getPoint1().setSelected(r),this.getHandle1().setSelected(r),this.getHandle2().setSelected(r),this.getPoint2().setSelected(r)},getValues:function(r){return ue.getValues(this._segment1,this._segment2,r)},getPoints:function(){for(var r=this.getValues(),i=[],s=0;s<8;s+=2)i.push(new R(r[s],r[s+1]));return i}},{getLength:function(){return this._length==null&&(this._length=ue.getLength(this.getValues(),0,1)),this._length},getArea:function(){return ue.getArea(this.getValues())},getLine:function(){return new Ce(this._segment1._point,this._segment2._point)},getPart:function(r,i){return new ue(ue.getPart(this.getValues(),r,i))},getPartLength:function(r,i){return ue.getLength(this.getValues(),r,i)},divideAt:function(r){return this.divideAtTime(r&&r.curve===this?r.time:this.getTimeAt(r))},divideAtTime:function(r,i){var s=1e-8,o=1-s,l=null;if(r>=s&&r<=o){var f=ue.subdivide(this.getValues(),r),d=f[0],h=f[1],_=i||this.hasHandles(),g=this._segment1,b=this._segment2,S=this._path;_&&(g._handleOut._set(d[2]-d[0],d[3]-d[1]),b._handleIn._set(h[4]-h[6],h[5]-h[7]));var y=d[6],m=d[7],I=new pe(new R(y,m),_&&new R(d[4]-y,d[5]-m),_&&new R(h[2]-y,h[3]-m));S?(S.insert(g._index+1,I),l=this.getNext()):(this._segment2=I,this._changed(),l=new ue(I,b))}return l},splitAt:function(r){var i=this._path;return i?i.splitAt(r):null},splitAtTime:function(r){return this.splitAt(this.getLocationAtTime(r))},divide:function(r,i){return this.divideAtTime(r===n?.5:i?r:this.getTimeAt(r))},split:function(r,i){return this.splitAtTime(r===n?.5:i?r:this.getTimeAt(r))},reversed:function(){return new ue(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(r,i,s,o){var l=r._point,f=r._handleOut,d=i._handleIn,h=i._point,_=l.x,g=l.y,b=h.x,S=h.y,y=o?[_,g,_,g,b,S,b,S]:[_,g,_+f._x,g+f._y,b+d._x,S+d._y,b,S];return s&&s._transformCoordinates(y,y,4),y},subdivide:function(r,i){var s=r[0],o=r[1],l=r[2],f=r[3],d=r[4],h=r[5],_=r[6],g=r[7];i===n&&(i=.5);var b=1-i,S=b*s+i*l,y=b*o+i*f,m=b*l+i*d,I=b*f+i*h,C=b*d+i*_,A=b*h+i*g,w=b*S+i*m,O=b*y+i*I,v=b*m+i*C,x=b*I+i*A,P=b*w+i*v,L=b*O+i*x;return[[s,o,S,y,w,O,P,L],[P,L,v,x,C,A,_,g]]},getMonoCurves:function(r,i){var s=[],o=i?0:1,l=r[o+0],f=r[o+2],d=r[o+4],h=r[o+6];if(l>=f==f>=d&&f>=d==d>=h||ue.isStraight(r))s.push(r);else{var _=3*(f-d)-l+h,g=2*(l+d)-4*f,b=f-l,S=1e-8,y=1-S,m=[],I=j.solveQuadratic(_,g,b,m,S,y);if(!I)s.push(r);else{m.sort();var C=m[0],A=ue.subdivide(r,C);s.push(A[0]),I>1&&(C=(m[1]-C)/(1-C),A=ue.subdivide(A[1],C),s.push(A[0])),s.push(A[1])}}return s},solveCubic:function(r,i,s,o,l,f){var d=r[i],h=r[i+2],_=r[i+4],g=r[i+6],b=0;if(!(d<s&&g<s&&h<s&&_<s||d>s&&g>s&&h>s&&_>s)){var S=3*(h-d),y=3*(_-h)-S,m=g-d-S-y;b=j.solveCubic(m,y,S,d-s,o,l,f)}return b},getTimeOf:function(r,i){var s=new R(r[0],r[1]),o=new R(r[6],r[7]),l=1e-12,f=1e-7,d=i.isClose(s,l)?0:i.isClose(o,l)?1:null;if(d===null)for(var h=[i.x,i.y],_=[],g=0;g<2;g++)for(var b=ue.solveCubic(r,g,h[g],_,0,1),S=0;S<b;S++){var y=_[S];if(i.isClose(ue.getPoint(r,y),f))return y}return i.isClose(s,f)?0:i.isClose(o,f)?1:null},getNearestTime:function(r,i){if(ue.isStraight(r)){var s=r[0],o=r[1],l=r[6],f=r[7],d=l-s,h=f-o,_=d*d+h*h;if(_===0)return 0;var g=((i.x-s)*d+(i.y-o)*h)/_;return g<1e-12?0:g>.999999999999?1:ue.getTimeOf(r,new R(s+g*d,o+g*h))}var b=100,S=1/0,y=0;function m(A){if(A>=0&&A<=1){var w=i.getDistance(ue.getPoint(r,A),!0);if(w<S)return S=w,y=A,!0}}for(var I=0;I<=b;I++)m(I/b);for(var C=1/(b*2);C>1e-8;)!m(y-C)&&!m(y+C)&&(C/=2);return y},getPart:function(r,i,s){var o=i>s;if(o){var l=i;i=s,s=l}return i>0&&(r=ue.subdivide(r,i)[1]),s<1&&(r=ue.subdivide(r,(s-i)/(1-i))[0]),o?[r[6],r[7],r[4],r[5],r[2],r[3],r[0],r[1]]:r},isFlatEnough:function(r,i){var s=r[0],o=r[1],l=r[2],f=r[3],d=r[4],h=r[5],_=r[6],g=r[7],b=3*l-2*s-_,S=3*f-2*o-g,y=3*d-2*_-s,m=3*h-2*g-o;return Math.max(b*b,y*y)+Math.max(S*S,m*m)<=16*i*i},getArea:function(r){var i=r[0],s=r[1],o=r[2],l=r[3],f=r[4],d=r[5],h=r[6],_=r[7];return 3*((_-s)*(o+f)-(h-i)*(l+d)+l*(i-f)-o*(s-d)+_*(f+i/3)-h*(d+s/3))/20},getBounds:function(r){for(var i=r.slice(0,2),s=i.slice(),o=[0,0],l=0;l<2;l++)ue._addBounds(r[l],r[l+2],r[l+4],r[l+6],l,0,i,s,o);return new le(i[0],i[1],s[0]-i[0],s[1]-i[1])},_addBounds:function(r,i,s,o,l,f,d,h,_){function g(P,L){var T=P-L,M=P+L;T<d[l]&&(d[l]=T),M>h[l]&&(h[l]=M)}f/=2;var b=d[l]+f,S=h[l]-f;if(r<b||i<b||s<b||o<b||r>S||i>S||s>S||o>S)if(i<r!=i<o&&s<r!=s<o)g(r,0),g(o,0);else{var y=3*(i-s)-r+o,m=2*(r+s)-4*i,I=i-r,C=j.solveQuadratic(y,m,I,_),A=1e-8,w=1-A;g(o,0);for(var O=0;O<C;O++){var v=_[O],x=1-v;A<=v&&v<=w&&g(x*x*x*r+3*x*x*v*i+3*x*v*v*s+v*v*v*o,f)}}}}},c.each(["getBounds","getStrokeBounds","getHandleBounds"],function(r){this[r]=function(){this._bounds||(this._bounds={});var i=this._bounds[r];return i||(i=this._bounds[r]=Le[r]([this._segment1,this._segment2],!1,this._path)),i.clone()}},{}),c.each({isStraight:function(r,i,s,o){if(i.isZero()&&s.isZero())return!0;var l=o.subtract(r);if(l.isZero())return!1;if(l.isCollinear(i)&&l.isCollinear(s)){var f=new Ce(r,o),d=1e-7;if(f.getDistance(r.add(i))<d&&f.getDistance(o.add(s))<d){var h=l.dot(l),_=l.dot(i)/h,g=l.dot(s)/h;return _>=0&&_<=1&&g<=0&&g>=-1}}return!1},isLinear:function(r,i,s,o){var l=o.subtract(r).divide(3);return i.equals(l)&&s.negate().equals(l)}},function(r,i){this[i]=function(s){var o=this._segment1,l=this._segment2;return r(o._point,o._handleOut,l._handleIn,l._point,s)},this.statics[i]=function(s,o){var l=s[0],f=s[1],d=s[6],h=s[7];return r(new R(l,f),new R(s[2]-l,s[3]-f),new R(s[4]-d,s[5]-h),new R(d,h),o)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(r){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(r||0)},isCollinear:function(r){return r&&this.isStraight()&&r.isStraight()&&this.getLine().isCollinear(r.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(r,i){return this.getLocationAtTime(i?r:this.getTimeAt(r))},getLocationAtTime:function(r){return r!=null&&r>=0&&r<=1?new Kt(this,r):null},getTimeAt:function(r,i){return ue.getTimeAt(this.getValues(),r,i)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var r=R.read(arguments);return r.isZero()?[]:ue.getTimesWithTangent(this.getValues(),r)},getOffsetAtTime:function(r){return this.getPartLength(0,r)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(R.read(arguments)))},getOffsetOf:function(){var r=this.getLocationOf.apply(this,arguments);return r?r.getOffset():null},getTimeOf:function(){return ue.getTimeOf(this.getValues(),R.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var r=R.read(arguments),i=this.getValues(),s=ue.getNearestTime(i,r),o=ue.getPoint(i,s);return new Kt(this,s,o,null,r.getDistance(o))},getNearestPoint:function(){var r=this.getNearestLocation.apply(this,arguments);return r&&r.getPoint()}},new function(){var r=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return c.each(r,function(i){this[i+"At"]=function(s,o){var l=this.getValues();return ue[i](l,o?s:ue.getTimeAt(l,s))},this[i+"AtTime"]=function(s){return ue[i](this.getValues(),s)}},{statics:{_evaluateMethods:r}})},new function(){function r(o){var l=o[0],f=o[1],d=o[2],h=o[3],_=o[4],g=o[5],b=o[6],S=o[7],y=9*(d-_)+3*(b-l),m=6*(l+_)-12*d,I=3*(d-l),C=9*(h-g)+3*(S-f),A=6*(f+g)-12*h,w=3*(h-f);return function(O){var v=(y*O+m)*O+I,x=(C*O+A)*O+w;return Math.sqrt(v*v+x*x)}}function i(o,l){return Math.max(2,Math.min(16,Math.ceil(Math.abs(l-o)*32)))}function s(o,l,f,d){if(l==null||l<0||l>1)return null;var h=o[0],_=o[1],g=o[2],b=o[3],S=o[4],y=o[5],m=o[6],I=o[7],C=j.isZero;C(g-h)&&C(b-_)&&(g=h,b=_),C(S-m)&&C(y-I)&&(S=m,y=I);var A=3*(g-h),w=3*(S-g)-A,O=m-h-A-w,v=3*(b-_),x=3*(y-b)-v,P=I-_-v-x,L,T;if(f===0)L=l===0?h:l===1?m:((O*l+w)*l+A)*l+h,T=l===0?_:l===1?I:((P*l+x)*l+v)*l+_;else{var M=1e-8,D=1-M;if(l<M?(L=A,T=v):l>D?(L=3*(m-S),T=3*(I-y)):(L=(3*O*l+2*w)*l+A,T=(3*P*l+2*x)*l+v),d){L===0&&T===0&&(l<M||l>D)&&(L=S-g,T=y-b);var F=Math.sqrt(L*L+T*T);F&&(L/=F,T/=F)}if(f===3){var S=6*O*l+2*w,y=6*P*l+2*x,U=Math.pow(L*L+T*T,3/2);L=U!==0?(L*y-T*S)/U:0,T=0}}return f===2?new R(T,-L):new R(L,T)}return{statics:{classify:function(o){var l=o[0],f=o[1],d=o[2],h=o[3],_=o[4],g=o[5],b=o[6],S=o[7],y=l*(S-g)+f*(_-b)+b*g-S*_,m=d*(f-S)+h*(b-l)+l*S-f*b,I=_*(h-f)+g*(l-d)+d*f-h*l,C=3*I,A=C-m,w=A-m+y,O=Math.sqrt(w*w+A*A+C*C),v=O!==0?1/O:0,x=j.isZero,P="serpentine";w*=v,A*=v,C*=v;function L(F,U,N){var q=U!==n,H=q&&U>0&&U<1,G=q&&N>0&&N<1;return q&&(!(H||G)||F==="loop"&&!(H&&G))&&(F="arch",H=G=!1),{type:F,roots:H||G?H&&G?U<N?[U,N]:[N,U]:[H?U:N]:null}}if(x(w))return x(A)?L(x(C)?"line":"quadratic"):L(P,C/(3*A));var T=3*A*A-4*w*C;if(x(T))return L("cusp",A/(2*w));var M=T>0?Math.sqrt(T/3):Math.sqrt(-T),D=2*w;return L(T>0?P:"loop",(A+M)/D,(A-M)/D)},getLength:function(o,l,f,d){if(l===n&&(l=0),f===n&&(f=1),ue.isStraight(o)){var h=o;f<1&&(h=ue.subdivide(h,f)[0],l/=f),l>0&&(h=ue.subdivide(h,l)[1]);var _=h[6]-h[0],g=h[7]-h[1];return Math.sqrt(_*_+g*g)}return j.integrate(d||r(o),l,f,i(l,f))},getTimeAt:function(o,l,f){if(f===n&&(f=l<0?1:0),l===0)return f;var d=Math.abs,h=1e-12,_=l>0,g=_?f:0,b=_?1:f,S=r(o),y=ue.getLength(o,g,b,S),m=d(l)-y;if(d(m)<h)return _?b:g;if(m>h)return null;var I=l/y,C=0;function A(w){return C+=j.integrate(S,f,w,i(f,w)),f=w,C-l}return j.findRoot(A,S,f+I,g,b,32,1e-12)},getPoint:function(o,l){return s(o,l,0,!1)},getTangent:function(o,l){return s(o,l,1,!0)},getWeightedTangent:function(o,l){return s(o,l,1,!1)},getNormal:function(o,l){return s(o,l,2,!0)},getWeightedNormal:function(o,l){return s(o,l,2,!1)},getCurvature:function(o,l){return s(o,l,3,!1).x},getPeaks:function(o){var l=o[0],f=o[1],d=o[2],h=o[3],_=o[4],g=o[5],b=o[6],S=o[7],y=-l+3*d-3*_+b,m=3*l-6*d+3*_,I=-3*l+3*d,C=-f+3*h-3*g+S,A=3*f-6*h+3*g,w=-3*f+3*h,O=1e-8,v=1-O,x=[];return j.solveCubic(9*(y*y+C*C),9*(y*m+A*C),2*(m*m+A*A)+3*(I*y+w*C),I*m+A*w,x,O,v),x.sort()}}}},new function(){function r(m,I,C,A,w,O,v){var x=!v&&C.getPrevious()===w,P=!v&&C!==w&&C.getNext()===w,L=1e-8,T=1-L;if(A!==null&&A>=(x?L:0)&&A<=(P?T:1)&&O!==null&&O>=(P?L:0)&&O<=(x?T:1)){var M=new Kt(C,A,null,v),D=new Kt(w,O,null,v);M._intersection=D,D._intersection=M,(!I||I(M))&&Kt.insert(m,M,!0)}}function i(m,I,C,A,w,O,v,x,P,L,T,M,D){if(++P>=4096||++x>=40)return P;var F=1e-9,U=I[0],N=I[1],q=I[6],H=I[7],G=Ce.getSignedDistance,W=G(U,N,q,H,I[2],I[3]),K=G(U,N,q,H,I[4],I[5]),re=W*K>0?3/4:4/9,ie=re*Math.min(0,W,K),se=re*Math.max(0,W,K),fe=G(U,N,q,H,m[0],m[1]),X=G(U,N,q,H,m[2],m[3]),ee=G(U,N,q,H,m[4],m[5]),oe=G(U,N,q,H,m[6],m[7]),de=s(fe,X,ee,oe),he=de[0],ve=de[1],ge,we;if(W===0&&K===0&&fe===0&&X===0&&ee===0&&oe===0||(ge=o(he,ve,ie,se))==null||(we=o(he.reverse(),ve.reverse(),ie,se))==null)return P;var Ee=L+(T-L)*ge,be=L+(T-L)*we;if(Math.max(D-M,be-Ee)<F){var rt=(Ee+be)/2,nt=(M+D)/2;r(w,O,v?A:C,v?nt:rt,v?C:A,v?rt:nt)}else{m=ue.getPart(m,ge,we);var ft=D-M;if(we-ge>.8)if(be-Ee>ft){var Ge=ue.subdivide(m,.5),rt=(Ee+be)/2;P=i(I,Ge[0],A,C,w,O,!v,x,P,M,D,Ee,rt),P=i(I,Ge[1],A,C,w,O,!v,x,P,M,D,rt,be)}else{var Ge=ue.subdivide(I,.5),nt=(M+D)/2;P=i(Ge[0],m,A,C,w,O,!v,x,P,M,nt,Ee,be),P=i(Ge[1],m,A,C,w,O,!v,x,P,nt,D,Ee,be)}else ft===0||ft>=F?P=i(I,m,A,C,w,O,!v,x,P,M,D,Ee,be):P=i(m,I,C,A,w,O,v,x,P,Ee,be,M,D)}return P}function s(m,I,C,A){var w=[0,m],O=[1/3,I],v=[2/3,C],x=[1,A],P=I-(2*m+A)/3,L=C-(m+2*A)/3,T;if(P*L<0)T=[[w,O,x],[w,v,x]];else{var M=P/L;T=[M>=2?[w,O,x]:M<=.5?[w,v,x]:[w,O,v,x],[w,x]]}return(P||L)<0?T.reverse():T}function o(m,I,C,A){return m[0][1]<C?l(m,!0,C):I[0][1]>A?l(I,!1,A):m[0][0]}function l(m,I,C){for(var A=m[0][0],w=m[0][1],O=1,v=m.length;O<v;O++){var x=m[O][0],P=m[O][1];if(I?P>=C:P<=C)return P===C?x:A+(C-w)*(x-A)/(P-w);A=x,w=P}return null}function f(m,I,C,A,w){var O=j.isZero;if(O(A)&&O(w)){var v=ue.getTimeOf(m,new R(I,C));return v===null?[]:[v]}for(var x=Math.atan2(-w,A),P=Math.sin(x),L=Math.cos(x),T=[],M=[],D=0;D<8;D+=2){var F=m[D]-I,U=m[D+1]-C;T.push(F*L-U*P,F*P+U*L)}return ue.solveCubic(T,1,0,M,0,1),M}function d(m,I,C,A,w,O,v){for(var x=I[0],P=I[1],L=I[6],T=I[7],M=f(m,x,P,L-x,T-P),D=0,F=M.length;D<F;D++){var U=M[D],N=ue.getPoint(m,U),q=ue.getTimeOf(I,N);q!==null&&r(w,O,v?A:C,v?q:U,v?C:A,v?U:q)}}function h(m,I,C,A,w,O){var v=Ce.intersect(m[0],m[1],m[6],m[7],I[0],I[1],I[6],I[7]);v&&r(w,O,C,ue.getTimeOf(m,v),A,ue.getTimeOf(I,v))}function _(m,I,C,A,w,O){var v=1e-12,x=Math.min,P=Math.max;if(P(m[0],m[2],m[4],m[6])+v>x(I[0],I[2],I[4],I[6])&&x(m[0],m[2],m[4],m[6])-v<P(I[0],I[2],I[4],I[6])&&P(m[1],m[3],m[5],m[7])+v>x(I[1],I[3],I[5],I[7])&&x(m[1],m[3],m[5],m[7])-v<P(I[1],I[3],I[5],I[7])){var L=S(m,I);if(L)for(var T=0;T<2;T++){var M=L[T];r(w,O,C,M[0],A,M[1],!0)}else{var D=ue.isStraight(m),F=ue.isStraight(I),U=D&&F,N=D&&!F,q=w.length;if((U?h:D||F?d:i)(N?I:m,N?m:I,N?A:C,N?C:A,w,O,N,0,0,0,1,0,1),!U||w.length===q)for(var T=0;T<4;T++){var H=T>>1,G=T&1,W=H*6,K=G*6,re=new R(m[W],m[W+1]),ie=new R(I[K],I[K+1]);re.isClose(ie,v)&&r(w,O,C,H,A,G)}}}return w}function g(m,I,C,A){var w=ue.classify(m);if(w.type==="loop"){var O=w.roots;r(C,A,I,O[0],I,O[1])}return C}function b(m,I,C,A,w,O){var v=1e-7,x=!I;x&&(I=m);for(var P=m.length,L=I.length,T=new Array(P),M=x?T:new Array(L),D=[],F=0;F<P;F++)T[F]=m[F].getValues(A);if(!x)for(var F=0;F<L;F++)M[F]=I[F].getValues(w);for(var U=$.findCurveBoundsCollisions(T,M,v),N=0;N<P;N++){var q=m[N],H=T[N];x&&g(H,q,D,C);var G=U[N];if(G)for(var W=0;W<G.length;W++){if(O&&D.length)return D;var K=G[W];if(!x||K>N){var re=I[K],ie=M[K];_(H,ie,q,re,D,C)}}}return D}function S(m,I){function C(oe){var de=oe[6]-oe[0],he=oe[7]-oe[1];return de*de+he*he}var A=Math.abs,w=Ce.getDistance,O=1e-8,v=1e-7,x=ue.isStraight(m),P=ue.isStraight(I),L=x&&P,T=C(m)<C(I),M=T?I:m,D=T?m:I,F=M[0],U=M[1],N=M[6]-F,q=M[7]-U;if(w(F,U,N,q,D[0],D[1],!0)<v&&w(F,U,N,q,D[6],D[7],!0)<v)!L&&w(F,U,N,q,M[2],M[3],!0)<v&&w(F,U,N,q,M[4],M[5],!0)<v&&w(F,U,N,q,D[2],D[3],!0)<v&&w(F,U,N,q,D[4],D[5],!0)<v&&(x=P=L=!0);else if(L)return null;if(x^P)return null;for(var H=[m,I],G=[],W=0;W<4&&G.length<2;W++){var K=W&1,re=K^1,ie=W>>1,se=ue.getTimeOf(H[K],new R(H[re][ie?6:0],H[re][ie?7:1]));if(se!=null){var fe=K?[ie,se]:[se,ie];(!G.length||A(fe[0]-G[0][0])>O&&A(fe[1]-G[0][1])>O)&&G.push(fe)}if(W>2&&!G.length)break}if(G.length!==2)G=null;else if(!L){var X=ue.getPart(m,G[0][0],G[1][0]),ee=ue.getPart(I,G[0][1],G[1][1]);(A(ee[2]-X[2])>v||A(ee[3]-X[3])>v||A(ee[4]-X[4])>v||A(ee[5]-X[5])>v)&&(G=null)}return G}function y(m,I){var C=m[0],A=m[1],w=m[2],O=m[3],v=m[4],x=m[5],P=m[6],L=m[7],T=I.normalize(),M=T.x,D=T.y,F=3*P-9*v+9*w-3*C,U=3*L-9*x+9*O-3*A,N=6*v-12*w+6*C,q=6*x-12*O+6*A,H=3*w-3*C,G=3*O-3*A,W=2*F*D-2*U*M,K=[];if(Math.abs(W)<j.CURVETIME_EPSILON){var re=F*G-U*H,W=F*q-U*N;if(W!=0){var ie=-re/W;ie>=0&&ie<=1&&K.push(ie)}}else{var se=(N*N-4*F*H)*D*D+(-2*N*q+4*U*H+4*F*G)*M*D+(q*q-4*U*G)*M*M,fe=N*D-q*M;if(se>=0&&W!=0){var X=Math.sqrt(se),ee=-(fe+X)/W,oe=(-fe+X)/W;ee>=0&&ee<=1&&K.push(ee),oe>=0&&oe<=1&&K.push(oe)}}return K}return{getIntersections:function(m){var I=this.getValues(),C=m&&m!==this&&m.getValues();return C?_(I,C,this,m,[]):g(I,this,[])},statics:{getOverlaps:S,getIntersections:b,getCurveLineIntersections:f,getTimesWithTangent:y}}}),Kt=c.extend({_class:"CurveLocation",initialize:function(i,s,o,l,f){if(s>=.99999999){var d=i.getNext();d&&(s=0,i=d)}this._setCurve(i),this._time=s,this._point=o||i.getPointAtTime(s),this._overlap=l,this._distance=f,this._intersection=this._next=this._previous=null},_setPath:function(r){this._path=r,this._version=r?r._version:0},_setCurve:function(r){this._setPath(r._path),this._curve=r,this._segment=null,this._segment1=r._segment1,this._segment2=r._segment2},_setSegment:function(r){var i=r.getCurve();i?this._setCurve(i):(this._setPath(r._path),this._segment1=r,this._segment2=null),this._segment=r,this._time=r===this._segment1?0:1,this._point=r._point.clone()},getSegment:function(){var r=this._segment;if(!r){var i=this.getCurve(),s=this.getTime();s===0?r=i._segment1:s===1?r=i._segment2:s!=null&&(r=i.getPartLength(0,s)<i.getPartLength(s,1)?i._segment1:i._segment2),this._segment=r}return r},getCurve:function(){var r=this._path,i=this;r&&r._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function s(o){var l=o&&o.getCurve();if(l&&(i._time=l.getTimeOf(i._point))!=null)return i._setCurve(l),l}return this._curve||s(this._segment)||s(this._segment1)||s(this._segment2.getPrevious())},getPath:function(){var r=this.getCurve();return r&&r._path},getIndex:function(){var r=this.getCurve();return r&&r.getIndex()},getTime:function(){var r=this.getCurve(),i=this._time;return r&&i==null?this._time=r.getTimeOf(this._point):i},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var r=this._offset;if(r==null){r=0;var i=this.getPath(),s=this.getIndex();if(i&&s!=null)for(var o=i.getCurves(),l=0;l<s;l++)r+=o[l].getLength();this._offset=r+=this.getCurveOffset()}return r},getCurveOffset:function(){var r=this._curveOffset;if(r==null){var i=this.getCurve(),s=this.getTime();this._curveOffset=r=s!=null&&i&&i.getPartLength(0,s)}return r},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var r=this.getCurve(),i=r&&r.divideAtTime(this.getTime());return i&&this._setSegment(i._segment1),i},split:function(){var r=this.getCurve(),i=r._path,s=r&&r.splitAtTime(this.getTime());return s&&this._setSegment(i.getLastSegment()),s},equals:function(r,i){var s=this===r;if(!s&&r instanceof Kt){var o=this.getCurve(),l=r.getCurve(),f=o._path,d=l._path;if(f===d){var h=Math.abs,_=1e-7,g=h(this.getOffset()-r.getOffset()),b=!i&&this._intersection,S=!i&&r._intersection;s=(g<_||f&&h(f.getLength()-g)<_)&&(!b&&!S||b&&S&&b.equals(S,!0))}}return s},toString:function(){var r=[],i=this.getPoint(),s=B.instance;i&&r.push("point: "+i);var o=this.getIndex();o!=null&&r.push("index: "+o);var l=this.getTime();return l!=null&&r.push("time: "+s.number(l)),this._distance!=null&&r.push("distance: "+s.number(this._distance)),"{ "+r.join(", ")+" }"},isTouching:function(){var r=this._intersection;if(r&&this.getTangent().isCollinear(r.getTangent())){var i=this.getCurve(),s=r.getCurve();return!(i.isStraight()&&s.isStraight()&&i.getLine().intersect(s.getLine()))}return!1},isCrossing:function(){var r=this._intersection;if(!r)return!1;var i=this.getTime(),s=r.getTime(),o=1e-8,l=1-o,f=i>=o&&i<=l,d=s>=o&&s<=l;if(f&&d)return!this.isTouching();var h=this.getCurve(),_=h&&i<o?h.getPrevious():h,g=r.getCurve(),b=g&&s<o?g.getPrevious():g;if(i>l&&(h=h.getNext()),s>l&&(g=g.getNext()),!_||!h||!b||!g)return!1;var S=[];function y(M,D){var F=M.getValues(),U=ue.classify(F).roots||ue.getPeaks(F),N=U.length,q=ue.getLength(F,D&&N?U[N-1]:0,!D&&N?U[0]:1);S.push(N?q:q/32)}function m(M,D,F){return D<F?M>D&&M<F:M>D||M<F}f||(y(_,!0),y(h,!1)),d||(y(b,!0),y(g,!1));var I=this.getPoint(),C=Math.min.apply(Math,S),A=f?h.getTangentAtTime(i):h.getPointAt(C).subtract(I),w=f?A.negate():_.getPointAt(-C).subtract(I),O=d?g.getTangentAtTime(s):g.getPointAt(C).subtract(I),v=d?O.negate():b.getPointAt(-C).subtract(I),x=w.getAngle(),P=A.getAngle(),L=v.getAngle(),T=O.getAngle();return!!(f?m(x,L,T)^m(P,L,T)&&m(x,T,L)^m(P,T,L):m(L,x,P)^m(T,x,P)&&m(L,P,x)^m(T,P,x))},hasOverlap:function(){return!!this._overlap}},c.each(ue._evaluateMethods,function(r){var i=r+"At";this[r]=function(){var s=this.getCurve(),o=this.getTime();return o!=null&&s&&s[i](o,!0)}},{preserve:!0}),new function(){function r(i,s,o){var l=i.length,f=0,d=l-1;function h(I,C){for(var A=I+C;A>=-1&&A<=l;A+=C){var w=i[(A%l+l)%l];if(!s.getPoint().isClose(w.getPoint(),1e-7))break;if(s.equals(w))return w}return null}for(;f<=d;){var _=f+d>>>1,g=i[_],b;if(o&&(b=s.equals(g)?g:h(_,-1)||h(_,1)))return s._overlap&&(b._overlap=b._intersection._overlap=!0),b;var S=s.getPath(),y=g.getPath(),m=S!==y?S._id-y._id:s.getIndex()+s.getTime()-(g.getIndex()+g.getTime());m<0?d=_-1:f=_+1}return i.splice(f,0,s),s}return{statics:{insert:r,expand:function(i){for(var s=i.slice(),o=i.length-1;o>=0;o--)r(s,i[o]._intersection,!1);return s}}}}),hn=Ie.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(r){var i,s,o;if(c.isPlainObject(r)?(s=r.segments,i=r.pathData):Array.isArray(r)?s=r:typeof r=="string"&&(i=r),s){var l=s[0];o=l&&Array.isArray(l[0])}else i&&(o=(i.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(i));var f=o?Yt:Le;return new f(r)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(r){this.isClockwise()!=(r=!!r)&&this.reverse()},setPathData:function(r){var i=r&&r.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),s,o=!1,l,f,d=new R,h=new R;function _(v,x){var P=+s[v];return o&&(P+=d[x]),P}function g(v){return new R(_(v,"x"),_(v+1,"y"))}this.clear();for(var b=0,S=i&&i.length;b<S;b++){var y=i[b],m=y[0],I=m.toLowerCase();s=y.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var C=s&&s.length;switch(o=m===I,l==="z"&&!/[mz]/.test(I)&&this.moveTo(d),I){case"m":case"l":for(var A=I==="m",w=0;w<C;w+=2)this[A?"moveTo":"lineTo"](d=g(w)),A&&(h=d,A=!1);f=d;break;case"h":case"v":var O=I==="h"?"x":"y";d=d.clone();for(var w=0;w<C;w++)d[O]=_(w,O),this.lineTo(d);f=d;break;case"c":for(var w=0;w<C;w+=6)this.cubicCurveTo(g(w),f=g(w+2),d=g(w+4));break;case"s":for(var w=0;w<C;w+=4)this.cubicCurveTo(/[cs]/.test(l)?d.multiply(2).subtract(f):d,f=g(w),d=g(w+2)),l=I;break;case"q":for(var w=0;w<C;w+=4)this.quadraticCurveTo(f=g(w),d=g(w+2));break;case"t":for(var w=0;w<C;w+=2)this.quadraticCurveTo(f=/[qt]/.test(l)?d.multiply(2).subtract(f):d,d=g(w)),l=I;break;case"a":for(var w=0;w<C;w+=7)this.arcTo(d=g(w+5),new Q(+s[w],+s[w+1]),+s[w+2],+s[w+4],+s[w+3]);break;case"z":this.closePath(1e-12),d=h;break}l=I}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(r){var i=r.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(r):{};return i.onPath||!!(this.getFillRule()==="evenodd"?i.windingL&1||i.windingR&1:i.winding)},getIntersections:function(r,i,s,o){var l=this===r||!r,f=this._matrix._orNullIfIdentity(),d=l?f:(s||r._matrix)._orNullIfIdentity();return l||this.getBounds(f).intersects(r.getBounds(d),1e-12)?ue.getIntersections(this.getCurves(),!l&&r.getCurves(),i,f,d,o):[]},getCrossings:function(r){return this.getIntersections(r,function(i){return i.isCrossing()})},getNearestLocation:function(){for(var r=R.read(arguments),i=this.getCurves(),s=1/0,o=null,l=0,f=i.length;l<f;l++){var d=i[l].getNearestLocation(r);d._distance<s&&(s=d._distance,o=d)}return o},getNearestPoint:function(){var r=this.getNearestLocation.apply(this,arguments);return r&&r.getPoint()},interpolate:function(r,i,s){var o=!this._children,l=o?"_segments":"_children",f=r[l],d=i[l],h=this[l];if(!f||!d||f.length!==d.length)throw new Error("Invalid operands in interpolate() call: "+r+", "+i);var _=h.length,g=d.length;if(_<g)for(var b=o?pe:Le,S=_;S<g;S++)this.add(new b);else _>g&&this[o?"removeSegments":"removeChildren"](g,_);for(var S=0;S<g;S++)h[S].interpolate(f[S],d[S],s);o&&(this.setClosed(r._closed),this._changed(9))},compare:function(r){var i=!1;if(r){var s=this._children||[this],o=r._children?r._children.slice():[r],l=s.length,f=o.length,d=[],h=0;i=!0;for(var _=$.findItemBoundsCollisions(s,o,j.GEOMETRIC_EPSILON),g=l-1;g>=0&&i;g--){var b=s[g];i=!1;var S=_[g];if(S)for(var y=S.length-1;y>=0&&!i;y--)b.compare(o[S[y]])&&(d[S[y]]||(d[S[y]]=!0,h++),i=!0)}i=i&&h===f}return i}}),Le=hn.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(i){this._closed=!1,this._segments=[],this._version=0;var s=arguments,o=Array.isArray(i)?typeof i[0]=="object"?i:s:i&&i.size===n&&(i.x!==n||i.point!==n)?s:null;o&&o.length>0?this.setSegments(o):(this._curves=n,this._segmentSelection=0,!o&&typeof i=="string"&&(this.setPathData(i),i=null)),this._initialize(!o&&i)},_equals:function(r){return this._closed===r._closed&&c.equals(this._segments,r._segments)},copyContent:function(r){this.setSegments(r._segments),this._closed=r._closed},_changed:function r(i){if(r.base.call(this,i),i&8){if(this._length=this._area=n,i&32)this._version++;else if(this._curves)for(var s=0,o=this._curves.length;s<o;s++)this._curves[s]._changed()}else i&64&&(this._bounds=n)},getStyle:function(){var r=this._parent;return(r instanceof Yt?r:this)._style},getSegments:function(){return this._segments},setSegments:function(r){var i=this.isFullySelected(),s=r&&r.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=n,s){var o=r[s-1];typeof o=="boolean"&&(this.setClosed(o),s--),this._add(pe.readList(r,0,{},s))}i&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var r=this._curves,i=this._segments;if(!r){var s=this._countCurves();r=this._curves=new Array(s);for(var o=0;o<s;o++)r[o]=new ue(this,i[o],i[o+1]||i[0])}return r},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var r=this.getCurves();return r[r.length-1]},isClosed:function(){return this._closed},setClosed:function(r){if(this._closed!=(r=!!r)){if(this._closed=r,this._curves){var i=this._curves.length=this._countCurves();r&&(this._curves[i-1]=new ue(this,this._segments[i-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(r,i){var s=this._segments,o=s.length,l=new B(i),f=new Array(6),d=!0,h,_,g,b,S,y,m,I,C=[];function A(O,v){if(O._transformCoordinates(r,f),h=f[0],_=f[1],d)C.push("M"+l.pair(h,_)),d=!1;else if(S=f[2],y=f[3],S===h&&y===_&&m===g&&I===b){if(!v){var x=h-g,P=_-b;C.push(x===0?"v"+l.number(P):P===0?"h"+l.number(x):"l"+l.pair(x,P))}}else C.push("c"+l.pair(m-g,I-b)+" "+l.pair(S-g,y-b)+" "+l.pair(h-g,_-b));g=h,b=_,m=f[4],I=f[5]}if(!o)return"";for(var w=0;w<o;w++)A(s[w]);return this._closed&&o>0&&(A(s[0],!0),C.push("z")),C.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(r){for(var i=this._segments,s=new Array(6),o=0,l=i.length;o<l;o++)i[o]._transformCoordinates(r,s,!0);return!0},_add:function(r,d){for(var s=this._segments,o=this._curves,l=r.length,f=d==null,d=f?s.length:d,h=0;h<l;h++){var _=r[h];_._path&&(_=r[h]=_.clone()),_._path=this,_._index=d+h,_._selection&&this._updateSelection(_,0,_._selection)}if(f)c.push(s,r);else{s.splice.apply(s,[d,0].concat(r));for(var h=d+l,g=s.length;h<g;h++)s[h]._index=h}if(o){var b=this._countCurves(),S=d>0&&d+l-1===b?d-1:d,y=S,m=Math.min(S+l,b);r._curves&&(o.splice.apply(o,[S,0].concat(r._curves)),y+=r._curves.length);for(var h=y;h<m;h++)o.splice(h,0,new ue(this,null,null));this._adjustCurves(S,m)}return this._changed(41),r},_adjustCurves:function(r,i){for(var s=this._segments,o=this._curves,l,f=r;f<i;f++)l=o[f],l._path=this,l._segment1=s[f],l._segment2=s[f+1]||s[0],l._changed();(l=o[this._closed&&!r?s.length-1:r-1])&&(l._segment2=s[r]||s[0],l._changed()),(l=o[i])&&(l._segment1=s[i],l._changed())},_countCurves:function(){var r=this._segments.length;return!this._closed&&r>0?r-1:r},add:function(r){var i=arguments;return i.length>1&&typeof r!="number"?this._add(pe.readList(i)):this._add([pe.read(i)])[0]},insert:function(r,i){var s=arguments;return s.length>2&&typeof i!="number"?this._add(pe.readList(s,1),r):this._add([pe.read(s,1)],r)[0]},addSegment:function(){return this._add([pe.read(arguments)])[0]},insertSegment:function(r){return this._add([pe.read(arguments,1)],r)[0]},addSegments:function(r){return this._add(pe.readList(r))},insertSegments:function(r,i){return this._add(pe.readList(i),r)},removeSegment:function(r){return this.removeSegments(r,r+1)[0]||null},removeSegments:function(r,i,s){r=r||0,i=c.pick(i,this._segments.length);var o=this._segments,l=this._curves,f=o.length,d=o.splice(r,i-r),h=d.length;if(!h)return d;for(var _=0;_<h;_++){var g=d[_];g._selection&&this._updateSelection(g,g._selection,0),g._index=g._path=null}for(var _=r,b=o.length;_<b;_++)o[_]._index=_;if(l){for(var S=r>0&&i===f+(this._closed?1:0)?r-1:r,l=l.splice(S,h),_=l.length-1;_>=0;_--)l[_]._path=null;s&&(d._curves=l.slice(1)),this._adjustCurves(S,S)}return this._changed(41),d},clear:"#removeSegments",hasHandles:function(){for(var r=this._segments,i=0,s=r.length;i<s;i++)if(r[i].hasHandles())return!0;return!1},clearHandles:function(){for(var r=this._segments,i=0,s=r.length;i<s;i++)r[i].clearHandles()},getLength:function(){if(this._length==null){for(var r=this.getCurves(),i=0,s=0,o=r.length;s<o;s++)i+=r[s].getLength();this._length=i}return this._length},getArea:function(){var r=this._area;if(r==null){var i=this._segments,s=this._closed;r=0;for(var o=0,l=i.length;o<l;o++){var f=o+1===l;r+=ue.getArea(ue.getValues(i[o],i[f?0:o+1],null,f&&!s))}this._area=r}return r},isFullySelected:function(){var r=this._segments.length;return this.isSelected()&&r>0&&this._segmentSelection===r*7},setFullySelected:function(r){r&&this._selectSegments(!0),this.setSelected(r)},setSelection:function r(i){i&1||this._selectSegments(!1),r.base.call(this,i)},_selectSegments:function(r){var i=this._segments,s=i.length,o=r?7:0;this._segmentSelection=o*s;for(var l=0;l<s;l++)i[l]._selection=o},_updateSelection:function(r,i,s){r._selection=s;var o=this._segmentSelection+=s-i;o>0&&this.setSelected(!0)},divideAt:function(r){var i=this.getLocationAt(r),s;return i&&(s=i.getCurve().divideAt(i.getCurveOffset()))?s._segment1:null},splitAt:function(r){var i=this.getLocationAt(r),s=i&&i.index,o=i&&i.time,l=1e-8,f=1-l;o>f&&(s++,o=0);var d=this.getCurves();if(s>=0&&s<d.length){o>=l&&d[s++].divideAtTime(o);var h=this.removeSegments(s,this._segments.length,!0),_;return this._closed?(this.setClosed(!1),_=this):(_=new Le(Ie.NO_INSERT),_.insertAbove(this),_.copyAttributes(this)),_._add(h,0),this.addSegment(h[0]),_}return null},split:function(r,i){var s,o=i===n?r:(s=this.getCurves()[r])&&s.getLocationAtTime(i);return o!=null?this.splitAt(o):null},join:function(r,i){var s=i||0;if(r&&r!==this){var o=r._segments,l=this.getLastSegment(),f=r.getLastSegment();if(!f)return this;l&&l._point.isClose(f._point,s)&&r.reverse();var d=r.getFirstSegment();if(l&&l._point.isClose(d._point,s))l.setHandleOut(d._handleOut),this._add(o.slice(1));else{var h=this.getFirstSegment();h&&h._point.isClose(d._point,s)&&r.reverse(),f=r.getLastSegment(),h&&h._point.isClose(f._point,s)?(h.setHandleIn(f._handleIn),this._add(o.slice(0,o.length-1),0)):this._add(o.slice())}r._closed&&this._add([o[0]]),r.remove()}var _=this.getFirstSegment(),g=this.getLastSegment();return _!==g&&_._point.isClose(g._point,s)&&(_.setHandleIn(g._handleIn),g.remove(),this.setClosed(!0)),this},reduce:function(r){for(var i=this.getCurves(),s=r&&r.simplify,o=s?1e-7:0,l=i.length-1;l>=0;l--){var f=i[l];!f.hasHandles()&&(!f.hasLength(o)||s&&f.isCollinear(f.getNext()))&&f.remove()}return this},reverse:function(){this._segments.reverse();for(var r=0,i=this._segments.length;r<i;r++){var s=this._segments[r],o=s._handleIn;s._handleIn=s._handleOut,s._handleOut=o,s._index=r}this._curves=null,this._changed(9)},flatten:function(r){for(var i=new ih(this,r||.25,256,!0),s=i.parts,o=s.length,l=[],f=0;f<o;f++)l.push(new pe(s[f].curve.slice(0,2)));!this._closed&&o>0&&l.push(new pe(s[o-1].curve.slice(6))),this.setSegments(l)},simplify:function(r){var i=new b3(this).fit(r||2.5);return i&&this.setSegments(i),!!i},smooth:function(r){var i=this,s=r||{},o=s.type||"asymmetric",l=this._segments,f=l.length,d=this._closed;function h(he,ve){var ge=he&&he.index;if(ge!=null){var we=he.path;if(we&&we!==i)throw new Error(he._class+" "+ge+" of "+we+" is not part of "+i);ve&&he instanceof ue&&ge++}else ge=typeof he=="number"?he:ve;return Math.min(ge<0&&d?ge%f:ge<0?ge+f:ge,f-1)}var _=d&&s.from===n&&s.to===n,g=h(s.from,0),b=h(s.to,f-1);if(g>b)if(d)g-=f;else{var S=g;g=b,b=S}if(/^(?:asymmetric|continuous)$/.test(o)){var y=o==="asymmetric",m=Math.min,I=b-g+1,C=I-1,A=_?m(I,4):1,w=A,O=A,v=[];if(d||(w=m(1,g),O=m(1,f-b-1)),C+=w+O,C<=1)return;for(var x=0,P=g-w;x<=C;x++,P++)v[x]=l[(P<0?P+f:P)%f]._point;for(var L=v[0]._x+2*v[1]._x,T=v[0]._y+2*v[1]._y,M=2,D=C-1,F=[L],U=[T],N=[M],q=[],H=[],x=1;x<C;x++){var G=x<D,W=G||y?1:2,K=G?4:y?2:7,re=G?4:y?3:8,ie=G?2:y?0:1,se=W/M;M=N[x]=K-se,L=F[x]=re*v[x]._x+ie*v[x+1]._x-se*L,T=U[x]=re*v[x]._y+ie*v[x+1]._y-se*T}q[D]=F[D]/N[D],H[D]=U[D]/N[D];for(var x=C-2;x>=0;x--)q[x]=(F[x]-q[x+1])/N[x],H[x]=(U[x]-H[x+1])/N[x];q[C]=(3*v[C]._x-q[D])/2,H[C]=(3*v[C]._y-H[D])/2;for(var x=w,fe=C-O,P=g;x<=fe;x++,P++){var X=l[P<0?P+f:P],ee=X._point,oe=q[x]-ee._x,de=H[x]-ee._y;(_||x<fe)&&X.setHandleOut(oe,de),(_||x>w)&&X.setHandleIn(-oe,-de)}}else for(var x=g;x<=b;x++)l[x<0?x+f:x].smooth(s,!_&&x===g,!_&&x===b)},toShape:function(r){if(!this._closed)return null;var i=this._segments,s,o,l,f;function d(y,m){var I=i[y],C=I.getNext(),A=i[m],w=A.getNext();return I._handleOut.isZero()&&C._handleIn.isZero()&&A._handleOut.isZero()&&w._handleIn.isZero()&&C._point.subtract(I._point).isCollinear(w._point.subtract(A._point))}function h(y){var m=i[y],I=m.getPrevious(),C=m.getNext();return I._handleOut.isZero()&&m._handleIn.isZero()&&m._handleOut.isZero()&&C._handleIn.isZero()&&m._point.subtract(I._point).isOrthogonal(C._point.subtract(m._point))}function _(y){var m=i[y],I=m.getNext(),C=m._handleOut,A=I._handleIn,w=.5522847498307936;if(C.isOrthogonal(A)){var O=m._point,v=I._point,x=new Ce(O,C,!0).intersect(new Ce(v,A,!0),!0);return x&&j.isZero(C.getLength()/x.subtract(O).getLength()-w)&&j.isZero(A.getLength()/x.subtract(v).getLength()-w)}return!1}function g(y,m){return i[y]._point.getDistance(i[m]._point)}if(!this.hasHandles()&&i.length===4&&d(0,2)&&d(1,3)&&h(1)?(s=It.Rectangle,o=new Q(g(0,3),g(0,1)),f=i[1]._point.add(i[2]._point).divide(2)):i.length===8&&_(0)&&_(2)&&_(4)&&_(6)&&d(1,5)&&d(3,7)?(s=It.Rectangle,o=new Q(g(1,6),g(0,3)),l=o.subtract(new Q(g(0,7),g(1,2))).divide(2),f=i[3]._point.add(i[4]._point).divide(2)):i.length===4&&_(0)&&_(1)&&_(2)&&_(3)&&(j.isZero(g(0,2)-g(1,3))?(s=It.Circle,l=g(0,2)/2):(s=It.Ellipse,l=new Q(g(2,0)/2,g(3,1)/2)),f=i[1]._point),s){var b=this.getPosition(!0),S=new s({center:b,size:o,radius:l,insert:!1});return S.copyAttributes(this,!0),S._matrix.prepend(this._matrix),S.rotate(f.subtract(b).getAngle()+90),(r===n||r)&&S.insertAbove(this),S}return null},toPath:"#clone",compare:function r(i){if(!i||i instanceof Yt)return r.base.call(this,i);var s=this.getCurves(),o=i.getCurves(),l=s.length,f=o.length;if(!l||!f)return l==f;for(var d=s[0].getValues(),h=[],_=0,g,b=0,S,y=0;y<f;y++){var A=o[y].getValues();h.push(A);var m=ue.getOverlaps(d,A);if(m){g=!y&&m[0][0]>0?f-1:y,S=m[0][1];break}}for(var I=Math.abs,C=1e-8,A=h[g],w;d&&A;){var m=ue.getOverlaps(d,A);if(m){var O=m[0][0];if(I(O-b)<C){b=m[1][0],b===1&&(d=++_<l?s[_].getValues():null,b=0);var v=m[0][1];if(I(v-S)<C){if(w||(w=[g,v]),S=m[1][1],S===1&&(++g>=f&&(g=0),A=h[g]||o[g].getValues(),S=0),!d)return w[0]===g&&w[1]===S;continue}}}break}return!1},_hitTestSelf:function(r,i,s,o){var l=this,f=this.getStyle(),d=this._segments,h=d.length,_=this._closed,g=i._tolerancePadding,b=g,S,y,m,I,C,A,w=i.stroke&&f.hasStroke(),O=i.fill&&f.hasFill(),v=i.curves,x=w?f.getStrokeWidth()/2:O&&i.tolerance>0||v?0:null;x!==null&&(x>0?(S=f.getStrokeJoin(),y=f.getStrokeCap(),m=f.getMiterLimit(),b=b.add(Le._getStrokePadding(x,o))):S=y="round");function P(q,H){return r.subtract(q).divide(H).length<=1}function L(q,H,G){if(!i.selected||H.isSelected()){var W=q._point;if(H!==W&&(H=H.add(W)),P(H,b))return new ar(G,l,{segment:q,point:H})}}function T(q,H){return(H||i.segments)&&L(q,q._point,"segment")||!H&&i.handles&&(L(q,q._handleIn,"handle-in")||L(q,q._handleOut,"handle-out"))}function M(q){I.add(q)}function D(q){var H=_||q._index>0&&q._index<h-1;if((H?S:y)==="round")return P(q._point,b);if(I=new Le({internal:!0,closed:!0}),H?q.isSmooth()||Le._addBevelJoin(q,S,x,m,null,o,M,!0):y==="square"&&Le._addSquareCap(q,y,x,null,o,M,!0),!I.isEmpty()){var G;return I.contains(r)||(G=I.getNearestLocation(r))&&P(G.getPoint(),g)}}if(i.ends&&!i.segments&&!_){if(A=T(d[0],!0)||T(d[h-1],!0))return A}else if(i.segments||i.handles){for(var F=0;F<h;F++)if(A=T(d[F]))return A}if(x!==null){if(C=this.getNearestLocation(r),C){var U=C.getTime();U===0||U===1&&h>1?D(C.getSegment())||(C=null):P(C.getPoint(),b)||(C=null)}if(!C&&S==="miter"&&h>1)for(var F=0;F<h;F++){var N=d[F];if(r.getDistance(N._point)<=m*x&&D(N)){C=N.getLocation();break}}}return!C&&O&&this._contains(r)||C&&!w&&!v?new ar("fill",this):C?new ar(w?"stroke":"curve",this,{location:C,point:C.getPoint()}):null}},c.each(ue._evaluateMethods,function(r){this[r+"At"]=function(i){var s=this.getLocationAt(i);return s&&s[r]()}},{beans:!1,getLocationOf:function(){for(var r=R.read(arguments),i=this.getCurves(),s=0,o=i.length;s<o;s++){var l=i[s].getLocationOf(r);if(l)return l}return null},getOffsetOf:function(){var r=this.getLocationOf.apply(this,arguments);return r?r.getOffset():null},getLocationAt:function(r){if(typeof r=="number"){for(var i=this.getCurves(),s=0,o=0,l=i.length;o<l;o++){var f=s,d=i[o];if(s+=d.getLength(),s>r)return d.getLocationAt(r-f)}if(i.length>0&&r<=this.getLength())return new Kt(i[i.length-1],1)}else if(r&&r.getPath&&r.getPath()===this)return r;return null},getOffsetsWithTangent:function(){var r=R.read(arguments);if(r.isZero())return[];for(var i=[],s=0,o=this.getCurves(),l=0,f=o.length;l<f;l++){for(var d=o[l],h=d.getTimesWithTangent(r),_=0,g=h.length;_<g;_++){var b=s+d.getOffsetAtTime(h[_]);i.indexOf(b)<0&&i.push(b)}s+=d.length}return i}}),new function(){function r(s,o,l,f){if(f<=0)return;var d=f/2,h=f-2,_=d-1,g=new Array(6),b,S;function y(O){var v=g[O],x=g[O+1];(b!=v||S!=x)&&(s.beginPath(),s.moveTo(b,S),s.lineTo(v,x),s.stroke(),s.beginPath(),s.arc(v,x,d,0,Math.PI*2,!0),s.fill())}for(var m=0,I=o.length;m<I;m++){var C=o[m],A=C._selection;if(C._transformCoordinates(l,g),b=g[0],S=g[1],A&2&&y(2),A&4&&y(4),s.fillRect(b-d,S-d,f,f),h>0&&!(A&1)){var w=s.fillStyle;s.fillStyle="#ffffff",s.fillRect(b-_,S-_,h,h),s.fillStyle=w}}}function i(s,o,l){var f=o._segments,d=f.length,h=new Array(6),_=!0,g,b,S,y,m,I,C,A;function w(v){if(l)v._transformCoordinates(l,h),g=h[0],b=h[1];else{var x=v._point;g=x._x,b=x._y}if(_)s.moveTo(g,b),_=!1;else{if(l)m=h[2],I=h[3];else{var P=v._handleIn;m=g+P._x,I=b+P._y}m===g&&I===b&&C===S&&A===y?s.lineTo(g,b):s.bezierCurveTo(C,A,m,I,g,b)}if(S=g,y=b,l)C=h[4],A=h[5];else{var P=v._handleOut;C=S+P._x,A=y+P._y}}for(var O=0;O<d;O++)w(f[O]);o._closed&&d>0&&w(f[0])}return{_draw:function(s,o,l,f){var d=o.dontStart,h=o.dontFinish||o.clip,_=this.getStyle(),g=_.hasFill(),b=_.hasStroke(),S=_.getDashArray(),y=!Oe.support.nativeDash&&b&&S&&S.length;d||s.beginPath(),(g||b&&!y||h)&&(i(s,this,f),this._closed&&s.closePath());function m(v){return S[(v%y+y)%y]}if(!h&&(g||b)&&(this._setStyles(s,o,l),g&&(s.fill(_.getFillRule()),s.shadowColor="rgba(0,0,0,0)"),b)){if(y){d||s.beginPath();for(var I=new ih(this,.25,32,!1,f),C=I.length,A=-_.getDashOffset(),w,O=0;A>0;)A-=m(O--)+m(O--);for(;A<C;)w=A+m(O++),(A>0||w>0)&&I.drawPart(s,Math.max(A,0),Math.max(w,0)),A=w+m(O++)}s.stroke()}},_drawSelected:function(s,o){s.beginPath(),i(s,this,o),s.stroke(),r(s,this._segments,o,Oe.settings.handleSize)}}},new function(){function r(i){var s=i._segments;if(!s.length)throw new Error("Use a moveTo() command first");return s[s.length-1]}return{moveTo:function(){var i=this._segments;i.length===1&&this.removeSegment(0),i.length||this._add([new pe(R.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new pe(R.read(arguments))])},cubicCurveTo:function(){var i=arguments,s=R.read(i),o=R.read(i),l=R.read(i),f=r(this);f.setHandleOut(s.subtract(f._point)),this._add([new pe(l,o.subtract(l))])},quadraticCurveTo:function(){var i=arguments,s=R.read(i),o=R.read(i),l=r(this)._point;this.cubicCurveTo(s.add(l.subtract(s).multiply(1/3)),s.add(o.subtract(s).multiply(1/3)),o)},curveTo:function(){var i=arguments,s=R.read(i),o=R.read(i),l=c.pick(c.read(i),.5),f=1-l,d=r(this)._point,h=s.subtract(d.multiply(f*f)).subtract(o.multiply(l*l)).divide(2*l*f);if(h.isNaN())throw new Error("Cannot put a curve through points with parameter = "+l);this.quadraticCurveTo(h,o)},arcTo:function(){var i=arguments,s=Math.abs,o=Math.sqrt,l=r(this),f=l._point,d=R.read(i),h,_=c.peek(i),g=c.pick(_,!0),b,S,y,m;if(typeof g=="boolean")var I=f.add(d).divide(2),h=I.add(I.subtract(f).rotate(g?-90:90));else if(c.remain(i)<=2)h=d,d=R.read(i);else if(!f.equals(d)){var C=Q.read(i),A=j.isZero;if(A(C.width)||A(C.height))return this.lineTo(d);var w=c.read(i),g=!!c.read(i),O=!!c.read(i),I=f.add(d).divide(2),v=f.subtract(I).rotate(-w),x=v.x,P=v.y,L=s(C.width),T=s(C.height),M=L*L,D=T*T,F=x*x,U=P*P,N=o(F/M+U/D);if(N>1&&(L*=N,T*=N,M=L*L,D=T*T),N=(M*D-M*U-D*F)/(M*U+D*F),s(N)<1e-12&&(N=0),N<0)throw new Error("Cannot create an arc with the given arguments");b=new R(L*P/T,-T*x/L).multiply((O===g?-1:1)*o(N)).rotate(w).add(I),m=new _e().translate(b).rotate(w).scale(L,T),y=m._inverseTransform(f),S=y.getDirectedAngle(m._inverseTransform(d)),!g&&S>0?S-=360:g&&S<0&&(S+=360)}if(h){var q=new Ce(f.add(h).divide(2),h.subtract(f).rotate(90),!0),H=new Ce(h.add(d).divide(2),d.subtract(h).rotate(90),!0),G=new Ce(f,d),W=G.getSide(h);if(b=q.intersect(H,!0),!b){if(!W)return this.lineTo(d);throw new Error("Cannot create an arc with the given arguments")}y=f.subtract(b),S=y.getDirectedAngle(d.subtract(b));var K=G.getSide(b,!0);K===0?S=W*s(S):W===K&&(S+=S<0?360:-360)}if(S){for(var re=1e-7,ie=s(S),se=ie>=360?4:Math.ceil((ie-re)/90),fe=S/se,X=fe*Math.PI/360,ee=4/3*Math.sin(X)/(1+Math.cos(X)),oe=[],de=0;de<=se;de++){var v=d,he=null;if(de<se&&(he=y.rotate(90).multiply(ee),m?(v=m._transformPoint(y),he=m._transformPoint(y.add(he)).subtract(v)):v=b.add(y)),!de)l.setHandleOut(he);else{var ve=y.rotate(-90).multiply(ee);m&&(ve=m._transformPoint(y.add(ve)).subtract(v)),oe.push(new pe(v,ve,he))}y=y.rotate(fe)}this._add(oe)}},lineBy:function(){var i=R.read(arguments),s=r(this)._point;this.lineTo(s.add(i))},curveBy:function(){var i=arguments,s=R.read(i),o=R.read(i),l=c.read(i),f=r(this)._point;this.curveTo(f.add(s),f.add(o),l)},cubicCurveBy:function(){var i=arguments,s=R.read(i),o=R.read(i),l=R.read(i),f=r(this)._point;this.cubicCurveTo(f.add(s),f.add(o),f.add(l))},quadraticCurveBy:function(){var i=arguments,s=R.read(i),o=R.read(i),l=r(this)._point;this.quadraticCurveTo(l.add(s),l.add(o))},arcBy:function(){var i=arguments,s=r(this)._point,o=s.add(R.read(i)),l=c.pick(c.peek(i),!0);typeof l=="boolean"?this.arcTo(o,l):this.arcTo(o,s.add(R.read(i)))},closePath:function(i){this.setClosed(!0),this.join(this,i)}}},{_getBounds:function(r,i){var s=i.handle?"getHandleBounds":i.stroke?"getStrokeBounds":"getBounds";return Le[s](this._segments,this._closed,this,r,i)},statics:{getBounds:function(r,i,s,o,l,f){var d=r[0];if(!d)return new le;var h=new Array(6),_=d._transformCoordinates(o,new Array(6)),g=_.slice(0,2),b=g.slice(),S=new Array(2);function y(C){C._transformCoordinates(o,h);for(var A=0;A<2;A++)ue._addBounds(_[A],_[A+4],h[A+2],h[A],A,f?f[A]:0,g,b,S);var w=_;_=h,h=w}for(var m=1,I=r.length;m<I;m++)y(r[m]);return i&&y(d),new le(g[0],g[1],b[0]-g[0],b[1]-g[1])},getStrokeBounds:function(r,i,s,o,l){var f=s.getStyle(),d=f.hasStroke(),h=f.getStrokeWidth(),_=d&&s._getStrokeMatrix(o,l),g=d&&Le._getStrokePadding(h,_),b=Le.getBounds(r,i,s,o,l,g);if(!d)return b;var S=h/2,y=f.getStrokeJoin(),m=f.getStrokeCap(),I=f.getMiterLimit(),C=new le(new Q(g));function A(L){b=b.include(L)}function w(L){b=b.unite(C.setCenter(L._point.transform(o)))}function O(L,T){T==="round"||L.isSmooth()?w(L):Le._addBevelJoin(L,T,S,I,o,_,A)}function v(L,T){T==="round"?w(L):Le._addSquareCap(L,T,S,o,_,A)}var x=r.length-(i?0:1);if(x>0){for(var P=1;P<x;P++)O(r[P],y);i?O(r[0],y):(v(r[0],m),v(r[r.length-1],m))}return b},_getStrokePadding:function(r,i){if(!i)return[r,r];var s=new R(r,0).transform(i),o=new R(0,r).transform(i),l=s.getAngleInRadians(),f=s.getLength(),d=o.getLength(),h=Math.sin(l),_=Math.cos(l),g=Math.tan(l),b=Math.atan2(d*g,f),S=Math.atan2(d,g*f);return[Math.abs(f*Math.cos(b)*_+d*Math.sin(b)*h),Math.abs(d*Math.sin(S)*_+f*Math.cos(S)*h)]},_addBevelJoin:function(r,i,s,o,l,f,d,h){var _=r.getCurve(),g=_.getPrevious(),b=_.getPoint1().transform(l),S=g.getNormalAtTime(1).multiply(s).transform(f),y=_.getNormalAtTime(0).multiply(s).transform(f),m=S.getDirectedAngle(y);if((m<0||m>=180)&&(S=S.negate(),y=y.negate()),h&&d(b),d(b.add(S)),i==="miter"){var I=new Ce(b.add(S),new R(-S.y,S.x),!0).intersect(new Ce(b.add(y),new R(-y.y,y.x),!0),!0);I&&b.getDistance(I)<=o*s&&d(I)}d(b.add(y))},_addSquareCap:function(r,i,s,o,l,f,d){var h=r._point.transform(o),_=r.getLocation(),g=_.getNormal().multiply(_.getTime()===0?s:-s).transform(l);i==="square"&&(d&&(f(h.subtract(g)),f(h.add(g))),h=h.add(g.rotate(-90))),f(h.add(g)),f(h.subtract(g))},getHandleBounds:function(r,i,s,o,l){var f=s.getStyle(),d=l.stroke&&f.hasStroke(),h,_;if(d){var g=s._getStrokeMatrix(o,l),b=f.getStrokeWidth()/2,S=b;f.getStrokeJoin()==="miter"&&(S=b*f.getMiterLimit()),f.getStrokeCap()==="square"&&(S=Math.max(S,b*Math.SQRT2)),h=Le._getStrokePadding(b,g),_=Le._getStrokePadding(S,g)}for(var y=new Array(6),m=1/0,I=-m,C=m,A=I,w=0,O=r.length;w<O;w++){var v=r[w];v._transformCoordinates(o,y);for(var x=0;x<6;x+=2){var P=x?h:_,L=P?P[0]:0,T=P?P[1]:0,M=y[x],D=y[x+1],F=M-L,U=M+L,N=D-T,q=D+T;F<m&&(m=F),U>I&&(I=U),N<C&&(C=N),q>A&&(A=q)}}return new le(m,C,I-m,A-C)}}});Le.inject({statics:new function(){var r=.5522847498307936,i=[new pe([-1,0],[0,r],[0,-r]),new pe([0,-1],[-r,0],[r,0]),new pe([1,0],[0,-r],[0,r]),new pe([0,1],[r,0],[-r,0])];function s(l,f,d){var h=c.getNamed(d),_=new Le(h&&h.insert==!1&&Ie.NO_INSERT);return _._add(l),_._closed=f,_.set(h,{insert:!0})}function o(l,f,d){for(var h=new Array(4),_=0;_<4;_++){var g=i[_];h[_]=new pe(g._point.multiply(f).add(l),g._handleIn.multiply(f),g._handleOut.multiply(f))}return s(h,!0,d)}return{Line:function(){var l=arguments;return s([new pe(R.readNamed(l,"from")),new pe(R.readNamed(l,"to"))],!1,l)},Circle:function(){var l=arguments,f=R.readNamed(l,"center"),d=c.readNamed(l,"radius");return o(f,new Q(d),l)},Rectangle:function(){var l=arguments,f=le.readNamed(l,"rectangle"),d=Q.readNamed(l,"radius",0,{readNull:!0}),h=f.getBottomLeft(!0),_=f.getTopLeft(!0),g=f.getTopRight(!0),b=f.getBottomRight(!0),S;if(!d||d.isZero())S=[new pe(h),new pe(_),new pe(g),new pe(b)];else{d=Q.min(d,f.getSize(!0).divide(2));var y=d.width,m=d.height,I=y*r,C=m*r;S=[new pe(h.add(y,0),null,[-I,0]),new pe(h.subtract(0,m),[0,C]),new pe(_.add(0,m),null,[0,-C]),new pe(_.add(y,0),[-I,0],null),new pe(g.subtract(y,0),null,[I,0]),new pe(g.add(0,m),[0,-C],null),new pe(b.subtract(0,m),null,[0,C]),new pe(b.subtract(y,0),[I,0])]}return s(S,!0,l)},RoundRectangle:"#Rectangle",Ellipse:function(){var l=arguments,f=It._readEllipse(l);return o(f.center,f.radius,l)},Oval:"#Ellipse",Arc:function(){var l=arguments,f=R.readNamed(l,"from"),d=R.readNamed(l,"through"),h=R.readNamed(l,"to"),_=c.getNamed(l),g=new Le(_&&_.insert==!1&&Ie.NO_INSERT);return g.moveTo(f),g.arcTo(d,h),g.set(_)},RegularPolygon:function(){for(var l=arguments,f=R.readNamed(l,"center"),d=c.readNamed(l,"sides"),h=c.readNamed(l,"radius"),_=360/d,g=d%3===0,b=new R(0,g?-h:h),S=g?-1:.5,y=new Array(d),m=0;m<d;m++)y[m]=new pe(f.add(b.rotate((m+S)*_)));return s(y,!0,l)},Star:function(){for(var l=arguments,f=R.readNamed(l,"center"),d=c.readNamed(l,"points")*2,h=c.readNamed(l,"radius1"),_=c.readNamed(l,"radius2"),g=360/d,b=new R(0,-1),S=new Array(d),y=0;y<d;y++)S[y]=new pe(f.add(b.rotate(g*y).multiply(y%2?_:h)));return s(S,!0,l)}}}});var Yt=hn.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(i){this._children=[],this._namedChildren={},this._initialize(i)||(typeof i=="string"?this.setPathData(i):this.addChildren(Array.isArray(i)?i:arguments))},insertChildren:function r(i,s){var o=s,l=o[0];l&&typeof l[0]=="number"&&(o=[o]);for(var f=s.length-1;f>=0;f--){var d=o[f];o===s&&!(d instanceof Le)&&(o=c.slice(o)),Array.isArray(d)?o[f]=new Le({segments:d,insert:!1}):d instanceof Yt&&(o.splice.apply(o,[f,1].concat(d.removeChildren())),d.remove())}return r.base.call(this,i,o)},reduce:function r(i){for(var s=this._children,o=s.length-1;o>=0;o--){var l=s[o].reduce(i);l.isEmpty()&&l.remove()}if(!s.length){var l=new Le(Ie.NO_INSERT);return l.copyAttributes(this),l.insertAbove(this),this.remove(),l}return r.base.call(this)},isClosed:function(){for(var r=this._children,i=0,s=r.length;i<s;i++)if(!r[i]._closed)return!1;return!0},setClosed:function(r){for(var i=this._children,s=0,o=i.length;s<o;s++)i[s].setClosed(r)},getFirstSegment:function(){var r=this.getFirstChild();return r&&r.getFirstSegment()},getLastSegment:function(){var r=this.getLastChild();return r&&r.getLastSegment()},getCurves:function(){for(var r=this._children,i=[],s=0,o=r.length;s<o;s++)c.push(i,r[s].getCurves());return i},getFirstCurve:function(){var r=this.getFirstChild();return r&&r.getFirstCurve()},getLastCurve:function(){var r=this.getLastChild();return r&&r.getLastCurve()},getArea:function(){for(var r=this._children,i=0,s=0,o=r.length;s<o;s++)i+=r[s].getArea();return i},getLength:function(){for(var r=this._children,i=0,s=0,o=r.length;s<o;s++)i+=r[s].getLength();return i},getPathData:function(r,i){for(var s=this._children,o=[],l=0,f=s.length;l<f;l++){var d=s[l],h=d._matrix;o.push(d.getPathData(r&&!h.isIdentity()?r.appended(h):r,i))}return o.join("")},_hitTestChildren:function r(i,s,o){return r.base.call(this,i,s.class===Le||s.type==="path"?s:c.set({},s,{fill:!1}),o)},_draw:function(r,i,s,o){var l=this._children;if(!!l.length){i=i.extend({dontStart:!0,dontFinish:!0}),r.beginPath();for(var f=0,d=l.length;f<d;f++)l[f].draw(r,i,o);if(!i.clip){this._setStyles(r,i,s);var h=this._style;h.hasFill()&&(r.fill(h.getFillRule()),r.shadowColor="rgba(0,0,0,0)"),h.hasStroke()&&r.stroke()}}},_drawSelected:function(r,i,s){for(var o=this._children,l=0,f=o.length;l<f;l++){var d=o[l],h=d._matrix;s[d._id]||d._drawSelected(r,h.isIdentity()?i:i.appended(h))}}},new function(){function r(i,s){var o=i._children;if(s&&!o.length)throw new Error("Use a moveTo() command first");return o[o.length-1]}return c.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(i){this[i]=function(){var s=r(this,!0);s[i].apply(s,arguments)}},{moveTo:function(){var i=r(this),s=i&&i.isEmpty()?i:new Le(Ie.NO_INSERT);s!==i&&this.addChild(s),s.moveTo.apply(s,arguments)},moveBy:function(){var i=r(this,!0),s=i&&i.getLastSegment(),o=R.read(arguments);this.moveTo(s?o.add(s._point):o)},closePath:function(i){r(this,!0).closePath(i)}})},c.each(["reverse","flatten","simplify","smooth"],function(r){this[r]=function(i){for(var s=this._children,o,l=0,f=s.length;l<f;l++)o=s[l][r](i)||o;return o}},{}));hn.inject(new function(){var r=Math.min,i=Math.max,s=Math.abs,o={unite:{"1":!0,"2":!0},intersect:{"2":!0},subtract:{"1":!0},exclude:{"1":!0,"-1":!0}};function l(w){return w._children||[w]}function f(w,O){var v=w.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(O){for(var x=l(v),P=0,L=x.length;P<L;P++){var w=x[P];!w._closed&&!w.isEmpty()&&(w.closePath(1e-12),w.getFirstSegment().setHandleIn(0,0),w.getLastSegment().setHandleOut(0,0))}v=v.resolveCrossings().reorient(v.getFillRule()==="nonzero",!0)}return v}function d(w,O,v,x,P){var L=new Yt(Ie.NO_INSERT);return L.addChildren(w,!0),L=L.reduce({simplify:O}),P&&P.insert==!1||L.insertAbove(x&&v.isSibling(x)&&v.getIndex()<x.getIndex()?x:v),L.copyAttributes(v,!0),L}function h(w){return w.hasOverlap()||w.isCrossing()}function _(w,O,v,x){if(x&&(x.trace==!1||x.stroke)&&/^(subtract|intersect)$/.test(v))return g(w,O,v);var P=f(w,!0),L=O&&w!==O&&f(O,!0),T=o[v];T[v]=!0,L&&(T.subtract||T.exclude)^(L.isClockwise()^P.isClockwise())&&L.reverse();var M=m(Kt.expand(P.getIntersections(L,h))),D=l(P),F=L&&l(L),U=[],N=[],q;function H(he){for(var ve=0,ge=he.length;ve<ge;ve++){var we=he[ve];c.push(U,we._segments),c.push(N,we.getCurves()),we._overlapsOnly=!0}}function G(he){for(var ve=[],ge=0,we=he&&he.length;ge<we;ge++)ve.push(N[he[ge]]);return ve}if(M.length){H(D),F&&H(F);for(var W=new Array(N.length),K=0,re=N.length;K<re;K++)W[K]=N[K].getValues();for(var ie=$.findCurveBoundsCollisions(W,W,0,!0),se={},K=0;K<N.length;K++){var fe=N[K],X=fe._path._id,ee=se[X]=se[X]||{};ee[fe.getIndex()]={hor:G(ie[K].hor),ver:G(ie[K].ver)}}for(var K=0,re=M.length;K<re;K++)C(M[K]._segment,P,L,se,T);for(var K=0,re=U.length;K<re;K++){var oe=U[K],de=oe._intersection;oe._winding||C(oe,P,L,se,T),de&&de._overlap||(oe._path._overlapsOnly=!1)}q=A(U,T)}else q=y(F?D.concat(F):D.slice(),function(he){return!!T[he]});return d(q,!0,w,O,x)}function g(w,O,v){var x=f(w),P=f(O),L=x.getIntersections(P,h),T=v==="subtract",M=v==="divide",D={},F=[];function U(H){if(!D[H._id]&&(M||P.contains(H.getPointAt(H.getLength()/2))^T))return F.unshift(H),D[H._id]=!0}for(var N=L.length-1;N>=0;N--){var q=L[N].split();q&&(U(q)&&q.getFirstSegment().setHandleIn(0,0),x.getLastSegment().setHandleOut(0,0))}return U(x),d(F,!1,w,O)}function b(w,O){for(var v=w;v;){if(v===O)return;v=v._previous}for(;w._next&&w._next!==O;)w=w._next;if(!w._next){for(;O._previous;)O=O._previous;w._next=O,O._previous=w}}function S(w){for(var O=w.length-1;O>=0;O--)w[O].clearHandles()}function y(w,O,v){var x=w&&w.length;if(x){var P=c.each(w,function(ie,se){this[ie._id]={container:null,winding:ie.isClockwise()?1:-1,index:se}},{}),L=w.slice().sort(function(ie,se){return s(se.getArea())-s(ie.getArea())}),T=L[0],M=$.findItemBoundsCollisions(L,null,j.GEOMETRIC_EPSILON);v==null&&(v=T.isClockwise());for(var D=0;D<x;D++){var F=L[D],U=P[F._id],N=0,q=M[D];if(q){for(var H=null,G=q.length-1;G>=0;G--)if(q[G]<D){H=H||F.getInteriorPoint();var W=L[q[G]];if(W.contains(H)){var K=P[W._id];N=K.winding,U.winding+=N,U.container=K.exclude?K.container:W;break}}}if(O(U.winding)===O(N))U.exclude=!0,w[U.index]=null;else{var re=U.container;F.setClockwise(re?!re.isClockwise():v)}}}return w}function m(w,O,v){var x=O&&[],P=1e-8,L=1-P,T=!1,M=v||[],D=v&&{},F,U,N;function q(ve){return ve._path._id+"."+ve._segment1._index}for(var H=(v&&v.length)-1;H>=0;H--){var G=v[H];G._path&&(D[q(G)]=!0)}for(var H=w.length-1;H>=0;H--){var W=w[H],K=W._time,re=K,ie=O&&!O(W),G=W._curve,se;if(G&&(G!==U?(T=!G.hasHandles()||D&&D[q(G)],F=[],N=null,U=G):N>=P&&(K/=N)),ie){F&&F.push(W);continue}else O&&x.unshift(W);if(N=re,K<P)se=G._segment1;else if(K>L)se=G._segment2;else{var fe=G.divideAtTime(K,!0);T&&M.push(G,fe),se=fe._segment1;for(var X=F.length-1;X>=0;X--){var ee=F[X];ee._time=(ee._time-K)/(1-K)}}W._setSegment(se);var oe=se._intersection,de=W._intersection;if(oe){b(oe,de);for(var he=oe;he;)b(he._intersection,oe),he=he._next}else se._intersection=de}return v||S(M),x||w}function I(w,O,v,x,P){var L=Array.isArray(O)?O:O[v?"hor":"ver"],T=v?1:0,M=T^1,D=[w.x,w.y],F=D[T],U=D[M],N=1e-9,q=1e-6,H=F-N,G=F+N,W=0,K=0,re=0,ie=0,se=!1,fe=!1,X=1,ee=[],oe,de;function he(Me){var We=Me[M+0],Et=Me[M+6];if(!(U<r(We,Et)||U>i(We,Et))){var it=Me[T+0],Rt=Me[T+2],vr=Me[T+4],jt=Me[T+6];if(We===Et){(it<G&&jt>H||jt<G&&it>H)&&(se=!0);return}var Bt=U===We?0:U===Et||H>i(it,Rt,vr,jt)||G<r(it,Rt,vr,jt)?1:ue.solveCubic(Me,M,U,ee,0,1)>0?ee[0]:1,Ct=Bt===0?it:Bt===1?jt:ue.getPoint(Me,Bt)[v?"y":"x"],At=We>Et?1:-1,mr=oe[M]>oe[M+6]?1:-1,qt=oe[T+6];return U!==We?(Ct<H?re+=At:Ct>G?ie+=At:se=!0,Ct>F-q&&Ct<F+q&&(X/=2)):(At!==mr?it<H?re+=At:it>G&&(ie+=At):it!=qt&&(qt<G&&Ct>G?(ie+=At,se=!0):qt>H&&Ct<H&&(re+=At,se=!0)),X/=4),oe=Me,!P&&Ct>H&&Ct<G&&ue.getTangent(Me,Bt)[v?"x":"y"]===0&&I(w,O,!v,x,!0)}}function ve(Me){var We=Me[M+0],Et=Me[M+2],it=Me[M+4],Rt=Me[M+6];if(U<=i(We,Et,it,Rt)&&U>=r(We,Et,it,Rt)){for(var vr=Me[T+0],jt=Me[T+2],Bt=Me[T+4],Ct=Me[T+6],At=H>i(vr,jt,Bt,Ct)||G<r(vr,jt,Bt,Ct)?[Me]:ue.getMonoCurves(Me,v),mr,qt=0,Is=At.length;qt<Is;qt++)if(mr=he(At[qt]))return mr}}for(var ge=0,we=L.length;ge<we;ge++){var Ee=L[ge],be=Ee._path,rt=Ee.getValues(),nt;if((!ge||L[ge-1]._path!==be)&&(oe=null,be._closed||(de=ue.getValues(be.getLastCurve().getSegment2(),Ee.getSegment1(),null,!x),de[M]!==de[M+6]&&(oe=de)),!oe)){oe=rt;for(var ft=be.getLastCurve();ft&&ft!==Ee;){var Ge=ft.getValues();if(Ge[M]!==Ge[M+6]){oe=Ge;break}ft=ft.getPrevious()}}if(nt=ve(rt))return nt;if(ge+1===we||L[ge+1]._path!==be){if(de&&(nt=ve(de)))return nt;se&&!re&&!ie&&(re=ie=be.isClockwise(x)^v?1:-1),W+=re,K+=ie,re=ie=0,se&&(fe=!0,se=!1),de=null}}return W=s(W),K=s(K),{winding:i(W,K),windingL:W,windingR:K,quality:X,onPath:fe}}function C(w,O,v,x,P){var L=[],T=w,M=0,N;do{var D=w.getCurve();if(D){var F=D.getLength();L.push({segment:w,curve:D,length:F}),M+=F}w=w.getNext()}while(w&&!w._intersection&&w!==T);for(var U=[.5,.25,.75],N={winding:0,quality:-1},q=.001,H=1-q,G=0;G<U.length&&N.quality<.5;G++)for(var F=M*U[G],W=0,K=L.length;W<K;W++){var re=L[W],ie=re.length;if(F<=ie){var D=re.curve,se=D._path,fe=se._parent,X=fe instanceof Yt?fe:se,ee=j.clamp(D.getTimeAt(F),q,H),oe=D.getPointAtTime(ee),de=s(D.getTangentAtTime(ee).y)<Math.SQRT1_2,he=null;if(P.subtract&&v){var ve=X===O?v:O,ge=ve._getWinding(oe,de,!0);if(X===O&&ge.winding||X===v&&!ge.winding){if(ge.quality<1)continue;he={winding:0,quality:1}}}he=he||I(oe,x[se._id][D.getIndex()],de,!0),he.quality>N.quality&&(N=he);break}F-=ie}for(var W=L.length-1;W>=0;W--)L[W].segment._winding=N}function A(w,O){var v=[],x;function P(we){var Ee;return!!(we&&!we._visited&&(!O||O[(Ee=we._winding||{}).winding]&&!(O.unite&&Ee.winding===2&&Ee.windingL&&Ee.windingR)))}function L(we){if(we){for(var Ee=0,be=x.length;Ee<be;Ee++)if(we===x[Ee])return!0}return!1}function T(we){for(var Ee=we._segments,be=0,rt=Ee.length;be<rt;be++)Ee[be]._visited=!0}function M(we,Ee){var be=we._intersection,rt=be,nt=[];Ee&&(x=[we]);function ft(Ge,Me){for(;Ge&&Ge!==Me;){var We=Ge._segment,Et=We&&We._path;if(Et){var it=We.getNext()||Et.getFirstSegment(),Rt=it._intersection;We!==we&&(L(We)||L(it)||it&&P(We)&&(P(it)||Rt&&P(Rt._segment)))&&nt.push(We),Ee&&x.push(We)}Ge=Ge._next}}if(be){for(ft(be);be&&be._previous;)be=be._previous;ft(be,rt)}return nt}w.sort(function(we,Ee){var be=we._intersection,rt=Ee._intersection,nt=!!(be&&be._overlap),ft=!!(rt&&rt._overlap),Ge=we._path,Me=Ee._path;return nt^ft?nt?1:-1:!be^!rt?be?1:-1:Ge!==Me?Ge._id-Me._id:we._index-Ee._index});for(var D=0,F=w.length;D<F;D++){var U=w[D],N=P(U),q=null,H=!1,G=!0,W=[],K,re,ie;if(N&&U._path._overlapsOnly){var se=U._path,fe=U._intersection._segment._path;se.compare(fe)&&(se.getArea()&&v.push(se.clone(!1)),T(se),T(fe),N=!1)}for(;N;){var X=!q,ee=M(U,X),oe=ee.shift(),H=!X&&(L(U)||L(oe)),de=!H&&oe;if(X&&(q=new Le(Ie.NO_INSERT),K=null),H){(U.isFirst()||U.isLast())&&(G=U._path._closed),U._visited=!0;break}if(de&&K&&(W.push(K),K=null),K||(de&&ee.push(U),K={start:q._segments.length,crossings:ee,visited:re=[],handleIn:ie}),de&&(U=oe),!P(U)){q.removeSegments(K.start);for(var he=0,ve=re.length;he<ve;he++)re[he]._visited=!1;re.length=0;do U=K&&K.crossings.shift(),(!U||!U._path)&&(U=null,K=W.pop(),K&&(re=K.visited,ie=K.handleIn));while(K&&!P(U));if(!U)break}var ge=U.getNext();q.add(new pe(U._point,ie,ge&&U._handleOut)),U._visited=!0,re.push(U),U=ge||U._path.getFirstSegment(),ie=ge&&ge._handleIn}H&&(G&&(q.getFirstSegment().setHandleIn(ie),q.setClosed(G)),q.getArea()!==0&&v.push(q))}return v}return{_getWinding:function(w,O,v){return I(w,this.getCurves(),O,v)},unite:function(w,O){return _(this,w,"unite",O)},intersect:function(w,O){return _(this,w,"intersect",O)},subtract:function(w,O){return _(this,w,"subtract",O)},exclude:function(w,O){return _(this,w,"exclude",O)},divide:function(w,O){return O&&(O.trace==!1||O.stroke)?g(this,w,"divide"):d([this.subtract(w,O),this.intersect(w,O)],!0,this,w,O)},resolveCrossings:function(){var w=this._children,O=w||[this];function v(K,re){var ie=K&&K._intersection;return ie&&ie._overlap&&ie._path===re}var x=!1,P=!1,L=this.getIntersections(null,function(K){return K.hasOverlap()&&(x=!0)||K.isCrossing()&&(P=!0)}),T=x&&P&&[];if(L=Kt.expand(L),x)for(var M=m(L,function(K){return K.hasOverlap()},T),D=M.length-1;D>=0;D--){var F=M[D],U=F._path,N=F._segment,q=N.getPrevious(),H=N.getNext();v(q,U)&&v(H,U)&&(N.remove(),q._handleOut._set(0,0),H._handleIn._set(0,0),q!==N&&!q.getCurve().hasLength()&&(H._handleIn.set(q._handleIn),q.remove()))}P&&(m(L,x&&function(K){var re=K.getCurve(),ie=K.getSegment(),se=K._intersection,fe=se._curve,X=se._segment;if(re&&fe&&re._path&&fe._path)return!0;ie&&(ie._intersection=null),X&&(X._intersection=null)},T),T&&S(T),O=A(c.each(O,function(K){c.push(this,K._segments)},[])));var G=O.length,W;return G>1&&w?(O!==w&&this.setChildren(O),W=this):G===1&&!w&&(O[0]!==this&&this.setSegments(O[0].removeSegments()),W=this),W||(W=new Yt(Ie.NO_INSERT),W.addChildren(O),W=W.reduce(),W.copyAttributes(this),this.replaceWith(W)),W},reorient:function(w,O){var v=this._children;return v&&v.length?this.setChildren(y(this.removeChildren(),function(x){return!!(w?x:x&1)},O)):O!==n&&this.setClockwise(O),this},getInteriorPoint:function(){var w=this.getBounds(),O=w.getCenter(!0);if(!this.contains(O)){for(var v=this.getCurves(),x=O.y,P=[],L=[],T=0,M=v.length;T<M;T++){var D=v[T].getValues(),F=D[1],U=D[3],N=D[5],q=D[7];if(x>=r(F,U,N,q)&&x<=i(F,U,N,q))for(var H=ue.getMonoCurves(D),G=0,W=H.length;G<W;G++){var K=H[G],re=K[1],ie=K[7];if(re!==ie&&(x>=re&&x<=ie||x>=ie&&x<=re)){var se=x===re?K[0]:x===ie?K[6]:ue.solveCubic(K,1,x,L,0,1)===1?ue.getPoint(K,L[0]).x:(K[0]+K[6])/2;P.push(se)}}}P.length>1&&(P.sort(function(fe,X){return fe-X}),O.x=(P[0]+P[1])/2)}return O}}});var ih=c.extend({_class:"PathFlattener",initialize:function(r,i,s,o,l){var f=[],d=[],h=0,_=1/(s||32),g=r._segments,b=g[0],S;function y(A,w){var O=ue.getValues(A,w,l);f.push(O),m(O,A._index,0,1)}function m(A,w,O,v){if(v-O>_&&!(o&&ue.isStraight(A))&&!ue.isFlatEnough(A,i||.25)){var x=ue.subdivide(A,.5),P=(O+v)/2;m(x[0],w,O,P),m(x[1],w,P,v)}else{var L=A[6]-A[0],T=A[7]-A[1],M=Math.sqrt(L*L+T*T);M>0&&(h+=M,d.push({offset:h,curve:A,index:w,time:v}))}}for(var I=1,C=g.length;I<C;I++)S=g[I],y(b,S),b=S;r._closed&&y(S||b,g[0]),this.curves=f,this.parts=d,this.length=h,this.index=0},_get:function(r){for(var i=this.parts,s=i.length,o,l=this.index;o=l,!(!l||i[--l].offset<r););for(;o<s;o++){var f=i[o];if(f.offset>=r){this.index=o;var d=i[o-1],h=d&&d.index===f.index?d.time:0,_=d?d.offset:0;return{index:f.index,time:h+(f.time-h)*(r-_)/(f.offset-_)}}}return{index:i[s-1].index,time:1}},drawPart:function(r,i,s){for(var o=this._get(i),l=this._get(s),f=o.index,d=l.index;f<=d;f++){var h=ue.getPart(this.curves[f],f===o.index?o.time:0,f===l.index?l.time:1);f===o.index&&r.moveTo(h[0],h[1]),r.bezierCurveTo.apply(r,h.slice(2))}}},c.each(ue._evaluateMethods,function(r){this[r+"At"]=function(i){var s=this._get(i);return ue[r](this.curves[s.index],s.time)}},{})),b3=c.extend({initialize:function(r){for(var i=this.points=[],s=r._segments,o=r._closed,l=0,f,d=s.length;l<d;l++){var h=s[l].point;(!f||!f.equals(h))&&i.push(f=h.clone())}o&&(i.unshift(i[i.length-1]),i.push(i[1])),this.closed=o},fit:function(r){var i=this.points,s=i.length,o=null;return s>0&&(o=[new pe(i[0])],s>1&&(this.fitCubic(o,r,0,s-1,i[1].subtract(i[0]),i[s-2].subtract(i[s-1])),this.closed&&(o.shift(),o.pop()))),o},fitCubic:function(r,i,s,o,l,f){var d=this.points;if(o-s===1){var h=d[s],_=d[o],g=h.getDistance(_)/3;this.addCurve(r,[h,h.add(l.normalize(g)),_.add(f.normalize(g)),_]);return}for(var b=this.chordLengthParameterize(s,o),S=Math.max(i,i*i),y,m=!0,I=0;I<=4;I++){var C=this.generateBezier(s,o,b,l,f),A=this.findMaxError(s,o,C,b);if(A.error<i&&m){this.addCurve(r,C);return}if(y=A.index,A.error>=S)break;m=this.reparameterize(s,o,b,C),S=A.error}var w=d[y-1].subtract(d[y+1]);this.fitCubic(r,i,s,y,l,w),this.fitCubic(r,i,y,o,w.negate(),f)},addCurve:function(r,i){var s=r[r.length-1];s.setHandleOut(i[1].subtract(i[0])),r.push(new pe(i[3],i[2].subtract(i[3])))},generateBezier:function(r,i,s,o,l){for(var f=1e-12,d=Math.abs,h=this.points,_=h[r],g=h[i],b=[[0,0],[0,0]],S=[0,0],y=0,m=i-r+1;y<m;y++){var I=s[y],C=1-I,A=3*I*C,w=C*C*C,O=A*C,v=A*I,x=I*I*I,P=o.normalize(O),L=l.normalize(v),T=h[r+y].subtract(_.multiply(w+O)).subtract(g.multiply(v+x));b[0][0]+=P.dot(P),b[0][1]+=P.dot(L),b[1][0]=b[0][1],b[1][1]+=L.dot(L),S[0]+=P.dot(T),S[1]+=L.dot(T)}var M=b[0][0]*b[1][1]-b[1][0]*b[0][1],D,F;if(d(M)>f){var U=b[0][0]*S[1]-b[1][0]*S[0],N=S[0]*b[1][1]-S[1]*b[0][1];D=N/M,F=U/M}else{var q=b[0][0]+b[0][1],H=b[1][0]+b[1][1];D=F=d(q)>f?S[0]/q:d(H)>f?S[1]/H:0}var G=g.getDistance(_),W=f*G,K,re;if(D<W||F<W)D=F=G/3;else{var ie=g.subtract(_);K=o.normalize(D),re=l.normalize(F),K.dot(ie)-re.dot(ie)>G*G&&(D=F=G/3,K=re=null)}return[_,_.add(K||o.normalize(D)),g.add(re||l.normalize(F)),g]},reparameterize:function(r,i,s,o){for(var l=r;l<=i;l++)s[l-r]=this.findRoot(o,this.points[l],s[l-r]);for(var l=1,f=s.length;l<f;l++)if(s[l]<=s[l-1])return!1;return!0},findRoot:function(r,i,s){for(var o=[],l=[],f=0;f<=2;f++)o[f]=r[f+1].subtract(r[f]).multiply(3);for(var f=0;f<=1;f++)l[f]=o[f+1].subtract(o[f]).multiply(2);var d=this.evaluate(3,r,s),h=this.evaluate(2,o,s),_=this.evaluate(1,l,s),g=d.subtract(i),b=h.dot(h)+g.dot(_);return j.isMachineZero(b)?s:s-g.dot(h)/b},evaluate:function(r,i,s){for(var o=i.slice(),l=1;l<=r;l++)for(var f=0;f<=r-l;f++)o[f]=o[f].multiply(1-s).add(o[f+1].multiply(s));return o[0]},chordLengthParameterize:function(r,i){for(var s=[0],o=r+1;o<=i;o++)s[o-r]=s[o-r-1]+this.points[o].getDistance(this.points[o-1]);for(var o=1,l=i-r;o<=l;o++)s[o]/=s[l];return s},findMaxError:function(r,i,s,o){for(var l=Math.floor((i-r+1)/2),f=0,d=r+1;d<i;d++){var h=this.evaluate(3,s,o[d-r]),_=h.subtract(this.points[d]),g=_.x*_.x+_.y*_.y;g>=f&&(f=g,l=d)}return{error:f,index:l}}}),Os=Ie.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(i){this._content="",this._lines=[];var s=i&&c.isPlainObject(i)&&i.x===n&&i.y===n;this._initialize(s&&i,!s&&R.read(arguments))},_equals:function(r){return this._content===r._content},copyContent:function(r){this.setContent(r._content)},getContent:function(){return this._content},setContent:function(r){this._content=""+r,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),w3=Os.extend({_class:"PointText",initialize:function(){Os.apply(this,arguments)},getPoint:function(){var r=this._matrix.getTranslation();return new Z(r.x,r.y,this,"setPoint")},setPoint:function(){var r=R.read(arguments);this.translate(r.subtract(this._matrix.getTranslation()))},_draw:function(r,i,s){if(!!this._content){this._setStyles(r,i,s);var o=this._lines,l=this._style,f=l.hasFill(),d=l.hasStroke(),h=l.getLeading(),_=r.shadowColor;r.font=l.getFontStyle(),r.textAlign=l.getJustification();for(var g=0,b=o.length;g<b;g++){r.shadowColor=_;var S=o[g];f&&(r.fillText(S,0,0),r.shadowColor="rgba(0,0,0,0)"),d&&r.strokeText(S,0,0),r.translate(0,h)}}},_getBounds:function(r,i){var s=this._style,o=this._lines,l=o.length,f=s.getJustification(),d=s.getLeading(),h=this.getView().getTextWidth(s.getFontStyle(),o),_=0;f!=="left"&&(_-=h/(f==="center"?2:1));var g=new le(_,l?-.75*d:0,h,l*d);return r?r._transformBounds(g,g):g}}),Qe=c.extend(new function(){var r={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},i={},s={transparent:[0,0,0,0]},o;function l(h){var _=h.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||h.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),g="rgb",b;if(_){var S=_[4]?4:3;b=new Array(S);for(var y=0;y<S;y++){var m=_[y+1];b[y]=parseInt(m.length==1?m+m:m,16)/255}}else if(_=h.match(/^(rgb|hsl)a?\((.*)\)$/)){g=_[1],b=_[2].trim().split(/[,\s]+/g);for(var I=g==="hsl",y=0,C=Math.min(b.length,4);y<C;y++){var A=b[y],m=parseFloat(A);if(I)if(y===0){var w=A.match(/([a-z]*)$/)[1];m*={turn:360,rad:180/Math.PI,grad:.9}[w]||1}else y<3&&(m/=100);else y<3&&(m/=/%$/.test(A)?100:255);b[y]=m}}else{var O=s[h];if(!O)if(a){o||(o=tt.getContext(1,1),o.globalCompositeOperation="copy"),o.fillStyle="rgba(0,0,0,0)",o.fillStyle=h,o.fillRect(0,0,1,1);var v=o.getImageData(0,0,1,1).data;O=s[h]=[v[0]/255,v[1]/255,v[2]/255]}else O=[0,0,0];b=O.slice()}return[g,b]}var f=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],d={"rgb-hsb":function(h,_,g){var b=Math.max(h,_,g),S=Math.min(h,_,g),y=b-S,m=y===0?0:(b==h?(_-g)/y+(_<g?6:0):b==_?(g-h)/y+2:(h-_)/y+4)*60;return[m,b===0?0:y/b,b]},"hsb-rgb":function(h,_,g){h=(h/60%6+6)%6;var S=Math.floor(h),b=h-S,S=f[S],y=[g,g*(1-_),g*(1-_*b),g*(1-_*(1-b))];return[y[S[0]],y[S[1]],y[S[2]]]},"rgb-hsl":function(h,_,g){var b=Math.max(h,_,g),S=Math.min(h,_,g),y=b-S,m=y===0,I=m?0:(b==h?(_-g)/y+(_<g?6:0):b==_?(g-h)/y+2:(h-_)/y+4)*60,C=(b+S)/2,A=m?0:C<.5?y/(b+S):y/(2-b-S);return[I,A,C]},"hsl-rgb":function(h,_,g){if(h=(h/360%1+1)%1,_===0)return[g,g,g];for(var b=[h+1/3,h,h-1/3],S=g<.5?g*(1+_):g+_-g*_,y=2*g-S,m=[],I=0;I<3;I++){var C=b[I];C<0&&(C+=1),C>1&&(C-=1),m[I]=6*C<1?y+(S-y)*6*C:2*C<1?S:3*C<2?y+(S-y)*(2/3-C)*6:y}return m},"rgb-gray":function(h,_,g){return[h*.2989+_*.587+g*.114]},"gray-rgb":function(h){return[h,h,h]},"gray-hsb":function(h){return[0,0,h]},"gray-hsl":function(h){return[0,0,h]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return c.each(r,function(h,_){i[_]=[],c.each(h,function(g,b){var S=c.capitalize(g),y=/^(hue|saturation)$/.test(g),m=i[_][b]=_==="gradient"?g==="gradient"?function(I){var C=this._components[0];return I=Ts.read(Array.isArray(I)?I:arguments,0,{readNull:!0}),C!==I&&(C&&C._removeOwner(this),I&&I._addOwner(this)),I}:function(){return R.read(arguments,0,{readNull:g==="highlight",clone:!0})}:function(I){return I==null||isNaN(I)?0:+I};this["get"+S]=function(){return this._type===_||y&&/^hs[bl]$/.test(this._type)?this._components[b]:this._convert(_)[b]},this["set"+S]=function(I){this._type!==_&&!(y&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(_),this._properties=r[_],this._type=_),this._components[b]=m.call(this,I),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function h(_){var g=arguments,b=this.__read,S=0,y,m,I,C;Array.isArray(_)&&(g=_,_=g[0]);var A=_!=null&&typeof _;if(A==="string"&&_ in r&&(y=_,_=g[1],Array.isArray(_)?(m=_,I=g[2]):(b&&(S=1),g=c.slice(g,1),A=typeof _)),!m){if(C=A==="number"?g:A==="object"&&_.length!=null?_:null,C){y||(y=C.length>=3?"rgb":"gray");var w=r[y].length;I=C[w],b&&(S+=C===arguments?w+(I!=null?1:0):1),C.length>w&&(C=c.slice(C,0,w))}else if(A==="string"){var O=l(_);y=O[0],m=O[1],m.length===4&&(I=m[3],m.length--)}else if(A==="object")if(_.constructor===h){if(y=_._type,m=_._components.slice(),I=_._alpha,y==="gradient")for(var v=1,x=m.length;v<x;v++){var P=m[v];P&&(m[v]=P.clone())}}else if(_.constructor===Ts)y="gradient",C=g;else{y="hue"in _?"lightness"in _?"hsl":"hsb":"gradient"in _||"stops"in _||"radial"in _?"gradient":"gray"in _?"gray":"rgb";var L=r[y],T=i[y];this._components=m=[];for(var v=0,x=L.length;v<x;v++){var M=_[L[v]];M==null&&!v&&y==="gradient"&&"stops"in _&&(M={stops:_.stops,radial:_.radial}),M=T[v].call(this,M),M!=null&&(m[v]=M)}I=_.alpha}b&&y&&(S=1)}if(this._type=y||"rgb",!m){this._components=m=[];for(var T=i[this._type],v=0,x=T.length;v<x;v++){var M=T[v].call(this,C&&C[v]);M!=null&&(m[v]=M)}}return this._components=m,this._properties=r[this._type],this._alpha=I,b&&(this.__read=S),this},set:"#initialize",_serialize:function(h,_){var g=this.getComponents();return c.serialize(/^(gray|rgb)$/.test(this._type)?g:[this._type].concat(g),h,!0,_)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(h){var _;return this._type===h?this._components.slice():(_=d[this._type+"-"+h])?_.apply(this,this._components):d["rgb-"+h].apply(this,d[this._type+"-rgb"].apply(this,this._components))},convert:function(h){return new Qe(h,this._convert(h),this._alpha)},getType:function(){return this._type},setType:function(h){this._components=this._convert(h),this._properties=r[h],this._type=h},getComponents:function(){var h=this._components.slice();return this._alpha!=null&&h.push(this._alpha),h},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(h){this._alpha=h==null?null:Math.min(Math.max(h,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(h){var _=c.isPlainValue(h,!0)?Qe.read(arguments):h;return _===this||_&&this._class===_._class&&this._type===_._type&&this.getAlpha()===_.getAlpha()&&c.equals(this._components,_._components)||!1},toString:function(){for(var h=this._properties,_=[],g=this._type==="gradient",b=B.instance,S=0,y=h.length;S<y;S++){var m=this._components[S];m!=null&&_.push(h[S]+": "+(g?m:b.number(m)))}return this._alpha!=null&&_.push("alpha: "+b.number(this._alpha)),"{ "+_.join(", ")+" }"},toCSS:function(h){var _=this._convert("rgb"),g=h||this._alpha==null?1:this._alpha;function b(S){return Math.round((S<0?0:S>1?1:S)*255)}return _=[b(_[0]),b(_[1]),b(_[2])],g<1&&_.push(g<0?0:g),h?"#"+((1<<24)+(_[0]<<16)+(_[1]<<8)+_[2]).toString(16).slice(1):(_.length==4?"rgba(":"rgb(")+_.join(",")+")"},toCanvasStyle:function(h,_){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var g=this._components,b=g[0],S=b._stops,y=g[1],m=g[2],I=g[3],C=_&&_.inverted(),A;if(C&&(y=C._transformPoint(y),m=C._transformPoint(m),I&&(I=C._transformPoint(I))),b._radial){var w=m.getDistance(y);if(I){var O=I.subtract(y);O.getLength()>w&&(I=y.add(O.normalize(w-.1)))}var v=I||y;A=h.createRadialGradient(v.x,v.y,0,y.x,y.y,w)}else A=h.createLinearGradient(y.x,y.y,m.x,m.y);for(var x=0,P=S.length;x<P;x++){var L=S[x],T=L._offset;A.addColorStop(T==null?x/(P-1):T,L._color.toCanvasStyle())}return this._canvasStyle=A},transform:function(h){if(this._type==="gradient"){for(var _=this._components,g=1,b=_.length;g<b;g++){var S=_[g];h._transformPoint(S,S,!0)}this._changed()}},statics:{_types:r,random:function(){var h=Math.random;return new Qe(h(),h(),h())},_setOwner:function(h,_,g){return h&&(h._owner&&_&&h._owner!==_&&(h=h.clone()),!h._owner^!_&&(h._owner=_||null,h._setter=g||null)),h}}})},new function(){var r={add:function(i,s){return i+s},subtract:function(i,s){return i-s},multiply:function(i,s){return i*s},divide:function(i,s){return i/s}};return c.each(r,function(i,s){this[s]=function(o){o=Qe.read(arguments);for(var l=this._type,f=this._components,d=o._convert(l),h=0,_=f.length;h<_;h++)d[h]=i(f[h],d[h]);return new Qe(l,d,this._alpha!=null?i(this._alpha,o.getAlpha()):null)}},{})}),Ts=c.extend({_class:"Gradient",initialize:function(i,s){this._id=Y.get(),i&&c.isPlainObject(i)&&(this.set(i),i=s=null),this._stops==null&&this.setStops(i||["white","black"]),this._radial==null&&this.setRadial(typeof s=="string"&&s==="radial"||s||!1)},_serialize:function(r,i){return i.add(this,function(){return c.serialize([this._stops,this._radial],r,!0,i)})},_changed:function(){for(var r=0,i=this._owners&&this._owners.length;r<i;r++)this._owners[r]._changed()},_addOwner:function(r){this._owners||(this._owners=[]),this._owners.push(r)},_removeOwner:function(r){var i=this._owners?this._owners.indexOf(r):-1;i!=-1&&(this._owners.splice(i,1),this._owners.length||(this._owners=n))},clone:function(){for(var r=[],i=0,s=this._stops.length;i<s;i++)r[i]=this._stops[i].clone();return new Ts(r,this._radial)},getStops:function(){return this._stops},setStops:function(r){if(r.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var i=this._stops;if(i)for(var s=0,o=i.length;s<o;s++)i[s]._owner=n;i=this._stops=jo.readList(r,0,{clone:!0});for(var s=0,o=i.length;s<o;s++)i[s]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(r){this._radial=r,this._changed()},equals:function(r){if(r===this)return!0;if(r&&this._class===r._class){var i=this._stops,s=r._stops,o=i.length;if(o===s.length){for(var l=0;l<o;l++)if(!i[l].equals(s[l]))return!1;return!0}}return!1}}),jo=c.extend({_class:"GradientStop",initialize:function(i,s){var o=i,l=s;typeof i=="object"&&s===n&&(Array.isArray(i)&&typeof i[0]!="number"?(o=i[0],l=i[1]):("color"in i||"offset"in i||"rampPoint"in i)&&(o=i.color,l=i.offset||i.rampPoint||0)),this.setColor(o),this.setOffset(l)},clone:function(){return new jo(this._color.clone(),this._offset)},_serialize:function(r,i){var s=this._color,o=this._offset;return c.serialize(o==null?[s]:[s,o],r,!0,i)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(r){this._offset=r,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){Qe._setOwner(this._color,null),this._color=Qe._setOwner(Qe.read(arguments,0),this,"setColor"),this._changed()},equals:function(r){return r===this||r&&this._class===r._class&&this._color.equals(r._color)&&this._offset==r._offset||!1}}),Bo=c.extend(new function(){var r={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new R,selectedColor:null},i=c.set({},r,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),s=c.set({},i,{fillColor:new Qe}),o={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},l={beans:!0},f={_class:"Style",beans:!0,initialize:function(h,_,g){this._values={},this._owner=_,this._project=_&&_._project||g||Oe.project,this._defaults=!_||_ instanceof sr?i:_ instanceof Os?s:r,h&&this.set(h)}};return c.each(i,function(d,h){var _=/Color$/.test(h),g=h==="shadowOffset",b=c.capitalize(h),S=o[h],y="set"+b,m="get"+b;f[y]=function(I){var C=this._owner,A=C&&C._children,w=A&&A.length>0&&!(C instanceof Yt);if(w)for(var O=0,v=A.length;O<v;O++)A[O]._style[y](I);if((h==="selectedColor"||!w)&&h in this._defaults){var x=this._values[h];x!==I&&(_&&(x&&(Qe._setOwner(x,null),x._canvasStyle=null),I&&I.constructor===Qe&&(I=Qe._setOwner(I,C,w&&y))),this._values[h]=I,C&&C._changed(S||129))}},f[m]=function(I){var C=this._owner,A=C&&C._children,w=A&&A.length>0&&!(C instanceof Yt),O;if(w&&!I)for(var v=0,x=A.length;v<x;v++){var P=A[v]._style[m]();if(!v)O=P;else if(!c.equals(O,P))return n}else if(h in this._defaults){var O=this._values[h];if(O===n)O=this._defaults[h],O&&O.clone&&(O=O.clone());else{var L=_?Qe:g?R:null;L&&!(O&&O.constructor===L)&&(this._values[h]=O=L.read([O],0,{readNull:!0,clone:!0}))}}return O&&_&&(O=Qe._setOwner(O,C,w&&y)),O},l[m]=function(I){return this._style[m](I)},l[y]=function(I){this._style[y](I)}}),c.each({Font:"FontFamily",WindingRule:"FillRule"},function(d,h){var _="get"+h,g="set"+h;f[_]=l[_]="#get"+d,f[g]=l[g]="#set"+d}),Ie.inject(l),f},{set:function(r){var i=r instanceof Bo,s=i?r._values:r;if(s){for(var o in s)if(o in this._defaults){var l=s[o];this[o]=l&&i&&l.clone?l.clone():l}}},equals:function(r){function i(s,o,l){var f=s._values,d=o._values,h=o._defaults;for(var _ in f){var g=f[_],b=d[_];if(!(l&&_ in d)&&!c.equals(g,b===n?h[_]:b))return!1}return!0}return r===this||r&&this._class===r._class&&i(this,r)&&i(r,this,!0)||!1},_dispose:function(){var r;r=this.getFillColor(),r&&(r._canvasStyle=null),r=this.getStrokeColor(),r&&(r._canvasStyle=null),r=this.getShadowColor(),r&&(r._canvasStyle=null)},hasFill:function(){var r=this.getFillColor();return!!r&&r.alpha>0},hasStroke:function(){var r=this.getStrokeColor();return!!r&&r.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var r=this.getShadowColor();return!!r&&r.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var r=this.getFontSize();return this.getFontWeight()+" "+r+(/[a-z]/i.test(r+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function r(){var i=r.base.call(this),s=this.getFontSize();return/pt|em|%|px/.test(s)&&(s=this.getView().getPixelSize(s)),i!=null?i:s*1.2}}),He=new function(){function r(i,s,o,l){for(var f=["","webkit","moz","Moz","ms","o"],d=s[0].toUpperCase()+s.substring(1),h=0;h<6;h++){var _=f[h],g=_?_+d:s;if(g in i){if(o)i[g]=l;else return i[g];break}}}return{getStyles:function(i){var s=i&&i.nodeType!==9?i.ownerDocument:i,o=s&&s.defaultView;return o&&o.getComputedStyle(i,"")},getBounds:function(i,s){var o=i.ownerDocument,l=o.body,f=o.documentElement,d;try{d=i.getBoundingClientRect()}catch{d={left:0,top:0,width:0,height:0}}var h=d.left-(f.clientLeft||l.clientLeft||0),_=d.top-(f.clientTop||l.clientTop||0);if(!s){var g=o.defaultView;h+=g.pageXOffset||f.scrollLeft||l.scrollLeft,_+=g.pageYOffset||f.scrollTop||l.scrollTop}return new le(h,_,d.width,d.height)},getViewportBounds:function(i){var s=i.ownerDocument,o=s.defaultView,l=s.documentElement;return new le(0,0,o.innerWidth||l.clientWidth,o.innerHeight||l.clientHeight)},getOffset:function(i,s){return He.getBounds(i,s).getPoint()},getSize:function(i){return He.getBounds(i,!0).getSize()},isInvisible:function(i){return He.getSize(i).equals(new Q(0,0))},isInView:function(i){return!He.isInvisible(i)&&He.getViewportBounds(i).intersects(He.getBounds(i,!0))},isInserted:function(i){return u.body.contains(i)},getPrefixed:function(i,s){return i&&r(i,s)},setPrefixed:function(i,s,o){if(typeof s=="object")for(var l in s)r(i,l,!0,s[l]);else r(i,s,!0,o)}}},et={add:function(r,i){if(r)for(var s in i)for(var o=i[s],l=s.split(/[\s,]+/g),f=0,d=l.length;f<d;f++){var h=l[f],_=r===u&&(h==="touchstart"||h==="touchmove")?{passive:!1}:!1;r.addEventListener(h,o,_)}},remove:function(r,i){if(r)for(var s in i)for(var o=i[s],l=s.split(/[\s,]+/g),f=0,d=l.length;f<d;f++)r.removeEventListener(l[f],o,!1)},getPoint:function(r){var i=r.targetTouches?r.targetTouches.length?r.targetTouches[0]:r.changedTouches[0]:r;return new R(i.pageX||i.clientX+u.documentElement.scrollLeft,i.pageY||i.clientY+u.documentElement.scrollTop)},getTarget:function(r){return r.target||r.srcElement},getRelatedTarget:function(r){return r.relatedTarget||r.toElement},getOffset:function(r,i){return et.getPoint(r).subtract(He.getOffset(i||et.getTarget(r)))}};et.requestAnimationFrame=new function(){var r=He.getPrefixed(a,"requestAnimationFrame"),i=!1,s=[],o;function l(){var f=s;s=[];for(var d=0,h=f.length;d<h;d++)f[d]();i=r&&s.length,i&&r(l)}return function(f){s.push(f),r?i||(r(l),i=!0):o||(o=setInterval(l,1e3/60))}};var qe=c.extend(p,{_class:"View",initialize:function r(i,s){function o(S){return s[S]||parseInt(s.getAttribute(S),10)}function l(){var S=He.getSize(s);return S.isNaN()||S.isZero()?new Q(o("width"),o("height")):S}var f;if(a&&s){this._id=s.getAttribute("id"),this._id==null&&s.setAttribute("id",this._id="paper-view-"+r._id++),et.add(s,this._viewEvents);var d="none";if(He.setPrefixed(s.style,{userDrag:d,userSelect:d,touchCallout:d,contentZooming:d,tapHighlightColor:"rgba(0,0,0,0)"}),E.hasAttribute(s,"resize")){var h=this;et.add(a,this._windowEvents={resize:function(){h.setViewSize(l())}})}if(f=l(),E.hasAttribute(s,"stats")&&typeof Stats!="undefined"){this._stats=new Stats;var _=this._stats.domElement,g=_.style,b=He.getOffset(s);g.position="absolute",g.left=b.x+"px",g.top=b.y+"px",u.body.appendChild(_)}}else f=new Q(s),s=null;this._project=i,this._scope=i._scope,this._element=s,this._pixelRatio||(this._pixelRatio=a&&a.devicePixelRatio||1),this._setElementSize(f.width,f.height),this._viewSize=f,r._views.push(this),r._viewsById[this._id]=this,(this._matrix=new _e)._owner=this,r._focused||(r._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!Oe.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;qe._focused===this&&(qe._focused=null),qe._views.splice(qe._views.indexOf(this),1),delete qe._viewsById[this._id];var r=this._project;return r._view===this&&(r._view=null),et.remove(this._element,this._viewEvents),et.remove(a,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:c.each(Ie._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(r){this[r]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(r){this._autoUpdate=r,r&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var r=this;et.requestAnimationFrame(function(){if(r._requested=!1,r._animate){r.requestUpdate();var i=r._element;(!He.getPrefixed(u,"hidden")||E.getAttribute(i,"keepalive")==="true")&&He.isInView(i)&&r._handleFrame()}r._autoUpdate&&r.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){Oe=this._scope;var r=Date.now()/1e3,i=this._last?r-this._last:0;this._last=r,this.emit("frame",new c({delta:i,time:this._time+=i,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(r,i){var s=this._frameItems;i?(s[r._id]={item:r,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete s[r._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(r){for(var i in this._frameItems){var s=this._frameItems[i];s.item.emit("frame",new c(r,{time:s.time+=r.delta,count:s.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=n},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var r=this._viewSize;return new ae(r.width,r.height,this,"setViewSize")},setViewSize:function(){var r=Q.read(arguments),i=r.subtract(this._viewSize);i.isZero()||(this._setElementSize(r.width,r.height),this._viewSize.set(r),this._changed(),this.emit("resize",{size:r,delta:i}),this._autoUpdate&&this.update())},_setElementSize:function(r,i){var s=this._element;s&&(s.width!==r&&(s.width=r),s.height!==i&&(s.height=i))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new le(new R,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return He.isInView(this._element)},isInserted:function(){return He.isInserted(this._element)},getPixelSize:function(r){var i=this._element,s;if(i){var o=i.parentNode,l=u.createElement("div");l.style.fontSize=r,o.appendChild(l),s=parseFloat(He.getStyles(l).fontSize),o.removeChild(l)}else s=parseFloat(s);return s},getTextWidth:function(r,i){return 0}},c.each(["rotate","scale","shear","skew"],function(r){var i=r==="rotate";this[r]=function(){var s=arguments,o=(i?c:R).read(s),l=R.read(s,0,{readNull:!0});return this.transform(new _e()[r](o,l||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var r=new _e;return this.transform(r.translate.apply(r,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var r=R.read(arguments);this.translate(this.getCenter().subtract(r))},getZoom:function(){var r=this._decompose().scaling;return(r.x+r.y)/2},setZoom:function(r){this.transform(new _e().scale(r/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(r){var i=this.getRotation();i!=null&&r!=null&&this.rotate(r-i)},getScaling:function(){var r=this._decompose().scaling;return new Z(r.x,r.y,this,"setScaling")},setScaling:function(){var r=this.getScaling(),i=R.read(arguments,0,{clone:!0,readNull:!0});r&&i&&this.scale(i.x/r.x,i.y/r.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var r=this._matrix;r.set.apply(r,arguments)},transform:function(r){this._matrix.append(r)},scrollBy:function(){this.translate(R.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(R.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(R.read(arguments))},getEventPoint:function(r){return this.viewToProject(et.getOffset(r,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(r,i){u&&typeof i=="string"&&(i=u.getElementById(i));var s=a?S3:qe;return new s(r,i)}}},new function(){if(!a)return;var r,i,s=!1,o=!1;function l(N){var q=et.getTarget(N);return q.getAttribute&&qe._viewsById[q.getAttribute("id")]}function f(){var N=qe._focused;if(!N||!N.isVisible()){for(var q=0,H=qe._views.length;q<H;q++)if((N=qe._views[q]).isVisible()){qe._focused=i=N;break}}}function d(N,q,H){N._handleMouseEvent("mousemove",q,H)}var h=a.navigator,_,g,b;h.pointerEnabled||h.msPointerEnabled?(_="pointerdown MSPointerDown",g="pointermove MSPointerMove",b="pointerup pointercancel MSPointerUp MSPointerCancel"):(_="touchstart",g="touchmove",b="touchend touchcancel","ontouchstart"in a&&h.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(_+=" mousedown",g+=" mousemove",b+=" mouseup"));var S={},y={mouseout:function(N){var q=qe._focused,H=et.getRelatedTarget(N);if(q&&(!H||H.nodeName==="HTML")){var G=et.getOffset(N,q._element),W=G.x,K=Math.abs,re=K(W),ie=1<<25,se=re-ie;G.x=K(se)<re?se*(W<0?-1:1):W,d(q,N,q.viewToProject(G))}},scroll:f};S[_]=function(N){var q=qe._focused=l(N);s||(s=!0,q._handleMouseEvent("mousedown",N))},y[g]=function(N){var q=qe._focused;if(!o){var H=l(N);H?q!==H&&(q&&d(q,N),r||(r=q),q=qe._focused=i=H):i&&i===q&&(r&&!r.isInserted()&&(r=null),q=qe._focused=r,r=null,f())}q&&d(q,N)},y[_]=function(){o=!0},y[b]=function(N){var q=qe._focused;q&&s&&q._handleMouseEvent("mouseup",N),o=s=!1},et.add(u,y),et.add(a,{load:f});var m=!1,I=!1,C={doubleclick:"click",mousedrag:"mousemove"},A=!1,w,O,v,x,P,L,T,M;function D(N,q,H,G,W,K,re){var ie=!1,se;function fe(X,ee){if(X.responds(ee)){if(se||(se=new C3(ee,G,W,q||X,K?W.subtract(K):null)),X.emit(ee,se)&&(m=!0,se.prevented&&(I=!0),se.stopped))return ie=!0}else{var oe=C[ee];if(oe)return fe(X,oe)}}for(;N&&N!==re&&!fe(N,H);)N=N._parent;return ie}function F(N,q,H,G,W,K){return N._project.removeOn(H),I=m=!1,P&&D(P,null,H,G,W,K)||q&&q!==P&&!q.isDescendant(P)&&D(q,null,H==="mousedrag"?"mousemove":H,G,W,K,P)||D(N,P||q||N,H,G,W,K)}var U={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:S,_handleMouseEvent:function(N,q,H){var G=this._itemEvents,W=G.native[N],K=N==="mousemove",re=this._scope.tool,ie=this;function se(ve){return G.virtual[ve]||ie.responds(ve)||re&&re.responds(ve)}K&&s&&se("mousedrag")&&(N="mousedrag"),H||(H=this.getEventPoint(q));var fe=this.getBounds().contains(H),X=W&&fe&&ie._project.hitTest(H,{tolerance:0,fill:!0,stroke:!0}),ee=X&&X.item||null,oe=!1,de={};if(de[N.substr(5)]=!0,W&&ee!==x&&(x&&D(x,null,"mouseleave",q,H),ee&&D(ee,null,"mouseenter",q,H),x=ee),A^fe&&(D(this,null,fe?"mouseenter":"mouseleave",q,H),oe=!0),(fe||de.drag)&&!H.equals(O)&&(F(this,ee,K?N:"mousemove",q,H,O),oe=!0),A=fe,de.down&&fe||de.up&&w){if(F(this,ee,N,q,H,w),de.down){if(M=ee===L&&Date.now()-T<300,v=L=ee,!I&&ee){for(var he=ee;he&&!he.responds("mousedrag");)he=he._parent;he&&(P=ee)}w=H}else de.up&&(!I&&ee===v&&(T=Date.now(),F(this,ee,M?"doubleclick":"click",q,H,w),M=!1),v=P=null);A=!1,oe=!0}O=H,oe&&re&&(m=re._handleMouseEvent(N,q,H,de)||m),q.cancelable!==!1&&(m&&!de.move||de.down&&se("mouseup"))&&q.preventDefault()},_handleKeyEvent:function(N,q,H,G){var W=this._scope,K=W.tool,re;function ie(se){se.responds(N)&&(Oe=W,se.emit(N,re=re||new E3(N,q,H,G)))}this.isVisible()&&(ie(this),K&&K.responds(N)&&ie(K))},_countItemEvent:function(N,q){var H=this._itemEvents,G=H.native,W=H.virtual;for(var K in U)G[K]=(G[K]||0)+(U[K][N]||0)*q;W[N]=(W[N]||0)+q},statics:{updateFocus:f,_resetState:function(){s=o=m=A=!1,r=i=w=O=v=x=P=L=T=M=null}}}}),S3=qe.extend({_class:"CanvasView",initialize:function(i,s){if(!(s instanceof a.HTMLCanvasElement)){var o=Q.read(arguments,1);if(o.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+c.slice(arguments,1));s=tt.getCanvas(o)}var l=this._context=s.getContext("2d");if(l.save(),this._pixelRatio=1,!/^off|false$/.test(E.getAttribute(s,"hidpi"))){var f=a.devicePixelRatio||1,d=He.getPrefixed(l,"backingStorePixelRatio")||1;this._pixelRatio=f/d}qe.call(this,i,s),this._needsUpdate=!0},remove:function r(){return this._context.restore(),r.base.call(this)},_setElementSize:function r(i,s){var o=this._pixelRatio;if(r.base.call(this,i*o,s*o),o!==1){var l=this._element,f=this._context;if(!E.hasAttribute(l,"resize")){var d=l.style;d.width=i+"px",d.height=s+"px"}f.restore(),f.save(),f.scale(o,o)}},getContext:function(){return this._context},getPixelSize:function r(i){var s=Oe.agent,o;if(s&&s.firefox)o=r.base.call(this,i);else{var l=this._context,f=l.font;l.font=i+" serif",o=parseFloat(l.font),l.font=f}return o},getTextWidth:function(r,i){var s=this._context,o=s.font,l=0;s.font=r;for(var f=0,d=i.length;f<d;f++)l=Math.max(l,s.measureText(i[f]).width);return s.font=o,l},update:function(){if(!this._needsUpdate)return!1;var r=this._project,i=this._context,s=this._viewSize;return i.clearRect(0,0,s.width+1,s.height+1),r&&r.draw(i,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Ps=c.extend({_class:"Event",initialize:function(i){this.event=i,this.type=i&&i.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return sh.modifiers}}),E3=Ps.extend({_class:"KeyEvent",initialize:function(i,s,o,l){this.type=i,this.event=s,this.key=o,this.character=l},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),sh=new function(){var r={"	":"tab"," ":"space","\b":"backspace","\x7F":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},i={tab:"	",space:" ",enter:"\r"},s={},o={},l,f,d=new c({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var g=Oe&&Oe.agent;return g&&g.mac?this.meta:this.control}}});function h(g){var b=g.key||g.keyIdentifier;return b=/^U\+/.test(b)?String.fromCharCode(parseInt(b.substr(2),16)):/^Arrow[A-Z]/.test(b)?b.substr(5):b==="Unidentified"||b===n?String.fromCharCode(g.keyCode):b,r[b]||(b.length>1?c.hyphenate(b):b.toLowerCase())}function _(g,b,S,y){var m=qe._focused,I;if(s[b]=g,g?o[b]=S:delete o[b],b.length>1&&(I=c.camelize(b))in d){d[I]=g;var C=Oe&&Oe.agent;if(I==="meta"&&C&&C.mac)if(g)l={};else{for(var A in l)A in o&&_(!1,A,l[A],y);l=null}}else g&&l&&(l[b]=S);m&&m._handleKeyEvent(g?"keydown":"keyup",y,b,S)}return et.add(u,{keydown:function(g){var b=h(g),S=Oe&&Oe.agent;b.length>1||S&&S.chrome&&(g.altKey||S.mac&&g.metaKey||!S.mac&&g.ctrlKey)?_(!0,b,i[b]||(b.length>1?"":b),g):f=b},keypress:function(g){if(f){var b=h(g),S=g.charCode,y=S>=32?String.fromCharCode(S):b.length>1?"":b;b!==f&&(b=y.toLowerCase()),_(!0,b,y,g),f=null}},keyup:function(g){var b=h(g);b in o&&_(!1,b,o[b],g)}}),et.add(a,{blur:function(g){for(var b in o)_(!1,b,o[b],g)}}),{modifiers:d,isDown:function(g){return!!s[g]}}},C3=Ps.extend({_class:"MouseEvent",initialize:function(i,s,o,l,f){this.type=i,this.event=s,this.point=o,this.target=l,this.delta=f},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),x3=Ps.extend({_class:"ToolEvent",_item:null,initialize:function(i,s,o){this.tool=i,this.type=s,this.event=o},_choosePoint:function(r,i){return r||(i?i.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(r){this._point=r},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(r){this._lastPoint=r},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(r){this._downPoint=r},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(r){this._middlePoint=r},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(r){this._delta=r},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(r){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=r},getItem:function(){if(!this._item){var r=this.tool._scope.project.hitTest(this.getPoint());if(r){for(var i=r.item,s=i._parent;/^(Group|CompoundPath)$/.test(s._class);)i=s,s=s._parent;this._item=i}}return this._item},setItem:function(r){this._item=r},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),O3=k.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(i){k.call(this),this._moveCount=-1,this._downCount=-1,this.set(i)},getMinDistance:function(){return this._minDistance},setMinDistance:function(r){this._minDistance=r,r!=null&&this._maxDistance!=null&&r>this._maxDistance&&(this._maxDistance=r)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(r){this._maxDistance=r,this._minDistance!=null&&r!=null&&r<this._minDistance&&(this._minDistance=r)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(r){this._minDistance=this._maxDistance=r},_handleMouseEvent:function(r,i,s,o){Oe=this._scope,o.drag&&!this.responds(r)&&(r="mousemove");var l=o.move||o.drag,f=this.responds(r),d=this.minDistance,h=this.maxDistance,_=!1,g=this;function b(y,m){var I=s,C=l?g._point:g._downPoint||I;if(l){if(g._moveCount>=0&&I.equals(C))return!1;if(C&&(y!=null||m!=null)){var A=I.subtract(C),w=A.getLength();if(w<(y||0))return!1;m&&(I=C.add(A.normalize(Math.min(w,m))))}g._moveCount++}return g._point=I,g._lastPoint=C||I,o.down&&(g._moveCount=-1,g._downPoint=I,g._downCount++),!0}function S(){f&&(_=g.emit(r,new x3(g,r,i))||_)}if(o.down)b(),S();else if(o.up)b(null,h),S();else if(f)for(;b(d,h);)S();return _}}),T3=c.extend(p,{_class:"Tween",statics:{easings:new c({linear:function(r){return r},easeInQuad:function(r){return r*r},easeOutQuad:function(r){return r*(2-r)},easeInOutQuad:function(r){return r<.5?2*r*r:-1+2*(2-r)*r},easeInCubic:function(r){return r*r*r},easeOutCubic:function(r){return--r*r*r+1},easeInOutCubic:function(r){return r<.5?4*r*r*r:(r-1)*(2*r-2)*(2*r-2)+1},easeInQuart:function(r){return r*r*r*r},easeOutQuart:function(r){return 1- --r*r*r*r},easeInOutQuart:function(r){return r<.5?8*r*r*r*r:1-8*--r*r*r*r},easeInQuint:function(r){return r*r*r*r*r},easeOutQuint:function(r){return 1+--r*r*r*r*r},easeInOutQuint:function(r){return r<.5?16*r*r*r*r*r:1+16*--r*r*r*r*r}})},initialize:function r(i,s,o,l,f,d){this.object=i;var h=typeof f,_=h==="function";this.type=_?h:h==="string"?f:"linear",this.easing=_?f:r.easings[this.type],this.duration=l,this.running=!1,this._then=null,this._startTime=null;var g=s||o;this._keys=g?Object.keys(g):[],this._parsedKeys=this._parseKeys(this._keys),this._from=g&&this._getState(s),this._to=g&&this._getState(o),d!==!1&&this.start()},then:function(r){return this._then=r,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(r){if(this.running){r>=1&&(r=1,this.running=!1);for(var i=this.easing(r),s=this._keys,o=function(b){return typeof b=="function"?b(i,r):b},l=0,f=s&&s.length;l<f;l++){var d=s[l],h=o(this._from[d]),_=o(this._to[d]),g=h&&_&&h.__add&&_.__add?_.__subtract(h).__multiply(i).__add(h):(_-h)*i+h;this._setProperty(this._parsedKeys[d],g)}this.responds("update")&&this.emit("update",new c({progress:r,factor:i})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(r){var i=this._startTime,s=i?(r-i)/this.duration:0;i||(this._startTime=r),this.update(s)},_getState:function(r){for(var i=this._keys,s={},o=0,l=i.length;o<l;o++){var f=i[o],d=this._parsedKeys[f],h=this._getProperty(d),_;if(r){var g=this._resolveValue(h,r[f]);this._setProperty(d,g),_=this._getProperty(d),_=_&&_.clone?_.clone():_,this._setProperty(d,h)}else _=h&&h.clone?h.clone():h;s[f]=_}return s},_resolveValue:function(r,i){if(i){if(Array.isArray(i)&&i.length===2){var s=i[0];return s&&s.match&&s.match(/^[+\-\*\/]=/)?this._calculate(r,s[0],i[1]):i}else if(typeof i=="string"){var o=i.match(/^[+\-*/]=(.*)/);if(o){var l=JSON.parse(o[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(r,i[0],l)}}}return i},_calculate:function(r,i,s){return Oe.PaperScript.calculateBinary(r,i,s)},_parseKeys:function(r){for(var i={},s=0,o=r.length;s<o;s++){var l=r[s],f=l.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");i[l]=f.split("/")}return i},_getProperty:function(r,i){for(var s=this.object,o=0,l=r.length-(i||0);o<l&&s;o++)s=s[r[o]];return s},_setProperty:function(r,i){var s=this._getProperty(r,1);s&&(s[r[r.length-1]]=i)}}),ah={request:function(r){var i=new e.XMLHttpRequest;return i.open((r.method||"get").toUpperCase(),r.url,c.pick(r.async,!0)),r.mimeType&&i.overrideMimeType(r.mimeType),i.onload=function(){var s=i.status;s===0||s===200?r.onLoad&&r.onLoad.call(i,i.responseText):i.onerror()},i.onerror=function(){var s=i.status,o='Could not load "'+r.url+'" (Status: '+s+")";if(r.onError)r.onError(o,s);else throw new Error(o)},i.send(null)}},tt=c.exports.CanvasProvider={canvases:[],getCanvas:function(r,i){if(!a)return null;var s,o=!0;typeof r=="object"&&(i=r.height,r=r.width),this.canvases.length?s=this.canvases.pop():(s=u.createElement("canvas"),o=!1);var l=s.getContext("2d");if(!l)throw new Error("Canvas "+s+" is unable to provide a 2D context.");return s.width===r&&s.height===i?o&&l.clearRect(0,0,r+1,i+1):(s.width=r,s.height=i),l.save(),s},getContext:function(r,i){var s=this.getCanvas(r,i);return s?s.getContext("2d"):null},release:function(r){var i=r&&r.canvas?r.canvas:r;i&&i.getContext&&(i.getContext("2d").restore(),this.canvases.push(i))}},qo=new function(){var r=Math.min,i=Math.max,s=Math.abs,o,l,f,d,h,_,g,b,S,y,m;function I(P,L,T){return .2989*P+.587*L+.114*T}function C(P,L,T,F){var D=F-I(P,L,T);S=P+D,y=L+D,m=T+D;var F=I(S,y,m),U=r(S,y,m),N=i(S,y,m);if(U<0){var q=F-U;S=F+(S-F)*F/q,y=F+(y-F)*F/q,m=F+(m-F)*F/q}if(N>255){var H=255-F,G=N-F;S=F+(S-F)*H/G,y=F+(y-F)*H/G,m=F+(m-F)*H/G}}function A(P,L,T){return i(P,L,T)-r(P,L,T)}function w(P,L,T,M){var D=[P,L,T],F=i(P,L,T),U=r(P,L,T),N;U=U===P?0:U===L?1:2,F=F===P?0:F===L?1:2,N=r(U,F)===0?i(U,F)===1?2:1:0,D[F]>D[U]?(D[N]=(D[N]-D[U])*M/(D[F]-D[U]),D[F]=M):D[N]=D[F]=0,D[U]=0,S=D[0],y=D[1],m=D[2]}var O={multiply:function(){S=h*o/255,y=_*l/255,m=g*f/255},screen:function(){S=h+o-h*o/255,y=_+l-_*l/255,m=g+f-g*f/255},overlay:function(){S=h<128?2*h*o/255:255-2*(255-h)*(255-o)/255,y=_<128?2*_*l/255:255-2*(255-_)*(255-l)/255,m=g<128?2*g*f/255:255-2*(255-g)*(255-f)/255},"soft-light":function(){var P=o*h/255;S=P+h*(255-(255-h)*(255-o)/255-P)/255,P=l*_/255,y=P+_*(255-(255-_)*(255-l)/255-P)/255,P=f*g/255,m=P+g*(255-(255-g)*(255-f)/255-P)/255},"hard-light":function(){S=o<128?2*o*h/255:255-2*(255-o)*(255-h)/255,y=l<128?2*l*_/255:255-2*(255-l)*(255-_)/255,m=f<128?2*f*g/255:255-2*(255-f)*(255-g)/255},"color-dodge":function(){S=h===0?0:o===255?255:r(255,255*h/(255-o)),y=_===0?0:l===255?255:r(255,255*_/(255-l)),m=g===0?0:f===255?255:r(255,255*g/(255-f))},"color-burn":function(){S=h===255?255:o===0?0:i(0,255-(255-h)*255/o),y=_===255?255:l===0?0:i(0,255-(255-_)*255/l),m=g===255?255:f===0?0:i(0,255-(255-g)*255/f)},darken:function(){S=h<o?h:o,y=_<l?_:l,m=g<f?g:f},lighten:function(){S=h>o?h:o,y=_>l?_:l,m=g>f?g:f},difference:function(){S=h-o,S<0&&(S=-S),y=_-l,y<0&&(y=-y),m=g-f,m<0&&(m=-m)},exclusion:function(){S=h+o*(255-h-h)/255,y=_+l*(255-_-_)/255,m=g+f*(255-g-g)/255},hue:function(){w(o,l,f,A(h,_,g)),C(S,y,m,I(h,_,g))},saturation:function(){w(h,_,g,A(o,l,f)),C(S,y,m,I(h,_,g))},luminosity:function(){C(h,_,g,I(o,l,f))},color:function(){C(o,l,f,I(h,_,g))},add:function(){S=r(h+o,255),y=r(_+l,255),m=r(g+f,255)},subtract:function(){S=i(h-o,0),y=i(_-l,0),m=i(g-f,0)},average:function(){S=(h+o)/2,y=(_+l)/2,m=(g+f)/2},negation:function(){S=255-s(255-o-h),y=255-s(255-l-_),m=255-s(255-f-g)}},v=this.nativeModes=c.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(P){this[P]=!0},{}),x=tt.getContext(1,1);x&&(c.each(O,function(P,L){var T=L==="darken",M=!1;x.save();try{x.fillStyle=T?"#300":"#a00",x.fillRect(0,0,1,1),x.globalCompositeOperation=L,x.globalCompositeOperation===L&&(x.fillStyle=T?"#a00":"#300",x.fillRect(0,0,1,1),M=x.getImageData(0,0,1,1).data[0]!==T?170:51)}catch{}x.restore(),v[L]=M}),tt.release(x)),this.process=function(P,L,T,M,D){var F=L.canvas,U=P==="normal";if(U||v[P])T.save(),T.setTransform(1,0,0,1,0,0),T.globalAlpha=M,U||(T.globalCompositeOperation=P),T.drawImage(F,D.x,D.y),T.restore();else{var N=O[P];if(!N)return;for(var q=T.getImageData(D.x,D.y,F.width,F.height),H=q.data,G=L.getImageData(0,0,F.width,F.height).data,W=0,K=H.length;W<K;W+=4){o=G[W],h=H[W],l=G[W+1],_=H[W+1],f=G[W+2],g=H[W+2],d=G[W+3],b=H[W+3],N();var re=d*M/255,ie=1-re;H[W]=re*S+ie*h,H[W+1]=re*y+ie*_,H[W+2]=re*m+ie*g,H[W+3]=d*M+ie*b}T.putImageData(q,D.x,D.y)}}},Ve=new function(){var r="http://www.w3.org/2000/svg",i="http://www.w3.org/2000/xmlns",s="http://www.w3.org/1999/xlink",o={href:s,xlink:i,xmlns:i+"/","xmlns:xlink":i+"/"};function l(h,_,g){return d(u.createElementNS(r,h),_,g)}function f(h,_){var g=o[_],b=g?h.getAttributeNS(g,_):h.getAttribute(_);return b==="null"?null:b}function d(h,_,g){for(var b in _){var S=_[b],y=o[b];typeof S=="number"&&g&&(S=g.number(S)),y?h.setAttributeNS(y,b,S):h.setAttribute(b,S)}return h}return{svg:r,xmlns:i,xlink:s,create:l,get:f,set:d}},oh=c.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(r,i){return!i&&(r instanceof hn||r instanceof It||r instanceof Os)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(r,i){var s=c.capitalize(i),o=r[2];this[i]={type:r[1],property:i,attribute:r[0],toSVG:o,fromSVG:o&&c.each(o,function(l,f){this[l]=f},{}),exportFilter:r[3],get:"get"+s,set:"set"+s}},{});new function(){var r;function i(O,v,x){var P=new c,L=O.getTranslation();if(v){var T;O.isInvertible()?(O=O._shiftless(),T=O._inverseTransform(L),L=null):T=new R,P[x?"cx":"x"]=T.x,P[x?"cy":"y"]=T.y}if(!O.isIdentity()){var M=O.decompose();if(M){var D=[],F=M.rotation,U=M.scaling,N=M.skewing;L&&!L.isZero()&&D.push("translate("+r.point(L)+")"),F&&D.push("rotate("+r.number(F)+")"),(!j.isZero(U.x-1)||!j.isZero(U.y-1))&&D.push("scale("+r.point(U)+")"),N.x&&D.push("skewX("+r.number(N.x)+")"),N.y&&D.push("skewY("+r.number(N.y)+")"),P.transform=D.join(" ")}else P.transform="matrix("+O.getValues().join(",")+")"}return P}function s(O,v){for(var x=i(O._matrix),P=O._children,L=Ve.create("g",x,r),T=0,M=P.length;T<M;T++){var D=P[T],F=A(D,v);if(F)if(D.isClipMask()){var U=Ve.create("clipPath");U.appendChild(F),I(D,U,"clip"),Ve.set(L,{"clip-path":"url(#"+U.id+")"})}else L.appendChild(F)}return L}function o(O,v){var x=i(O._matrix,!0),P=O.getSize(),L=O.getImage();return x.x-=P.width/2,x.y-=P.height/2,x.width=P.width,x.height=P.height,x.href=v.embedImages==!1&&L&&L.src||O.toDataURL(),Ve.create("image",x,r)}function l(O,v){var x=v.matchShapes;if(x){var P=O.toShape(!1);if(P)return f(P)}var L=O._segments,T=L.length,M,D=i(O._matrix);if(x&&T>=2&&!O.hasHandles())if(T>2){M=O._closed?"polygon":"polyline";for(var F=[],U=0;U<T;U++)F.push(r.point(L[U]._point));D.points=F.join(" ")}else{M="line";var N=L[0]._point,q=L[1]._point;D.set({x1:N.x,y1:N.y,x2:q.x,y2:q.y})}else M="path",D.d=O.getPathData(null,v.precision);return Ve.create(M,D,r)}function f(O){var v=O._type,x=O._radius,P=i(O._matrix,!0,v!=="rectangle");if(v==="rectangle"){v="rect";var L=O._size,T=L.width,M=L.height;P.x-=T/2,P.y-=M/2,P.width=T,P.height=M,x.isZero()&&(x=null)}return x&&(v==="circle"?P.r=x:(P.rx=x.width,P.ry=x.height)),Ve.create(v,P,r)}function d(O,v){var x=i(O._matrix),P=O.getPathData(null,v.precision);return P&&(x.d=P),Ve.create("path",x,r)}function h(O,v){var x=i(O._matrix,!0),P=O._definition,L=m(P,"symbol"),T=P._item,M=T.getStrokeBounds();return L||(L=Ve.create("symbol",{viewBox:r.rectangle(M)}),L.appendChild(A(T,v)),I(P,L,"symbol")),x.href="#"+L.id,x.x+=M.x,x.y+=M.y,x.width=M.width,x.height=M.height,x.overflow="visible",Ve.create("use",x,r)}function _(O){var v=m(O,"color");if(!v){var x=O.getGradient(),P=x._radial,L=O.getOrigin(),T=O.getDestination(),M;if(P){M={cx:L.x,cy:L.y,r:L.getDistance(T)};var D=O.getHighlight();D&&(M.fx=D.x,M.fy=D.y)}else M={x1:L.x,y1:L.y,x2:T.x,y2:T.y};M.gradientUnits="userSpaceOnUse",v=Ve.create((P?"radial":"linear")+"Gradient",M,r);for(var F=x._stops,U=0,N=F.length;U<N;U++){var q=F[U],H=q._color,G=H.getAlpha(),W=q._offset;M={offset:W==null?U/(N-1):W},H&&(M["stop-color"]=H.toCSS(!0)),G<1&&(M["stop-opacity"]=G),v.appendChild(Ve.create("stop",M,r))}I(O,v,"color")}return"url(#"+v.id+")"}function g(O){var v=Ve.create("text",i(O._matrix,!0),r);return v.textContent=O._content,v}var b={Group:s,Layer:s,Raster:o,Path:l,Shape:f,CompoundPath:d,SymbolItem:h,PointText:g};function S(O,v,x){var P={},L=!x&&O.getParent(),T=[];return O._name!=null&&(P.id=O._name),c.each(oh,function(M){var D=M.get,F=M.type,U=O[D]();if(M.exportFilter?M.exportFilter(O,U):!L||!c.equals(L[D](),U)){if(F==="color"&&U!=null){var N=U.getAlpha();N<1&&(P[M.attribute+"-opacity"]=N)}F==="style"?T.push(M.attribute+": "+U):P[M.attribute]=U==null?"none":F==="color"?U.gradient?_(U):U.toCSS(!0):F==="array"?U.join(","):F==="lookup"?M.toSVG[U]:U}}),T.length&&(P.style=T.join(";")),P.opacity===1&&delete P.opacity,O._visible||(P.visibility="hidden"),Ve.set(v,P,r)}var y;function m(O,v){return y||(y={ids:{},svgs:{}}),O&&y.svgs[v+"-"+(O._id||O.__id||(O.__id=Y.get("svg")))]}function I(O,v,x){y||m();var P=y.ids[x]=(y.ids[x]||0)+1;v.id=x+"-"+P,y.svgs[x+"-"+(O._id||O.__id)]=v}function C(O,v){var x=O,P=null;if(y){x=O.nodeName.toLowerCase()==="svg"&&O;for(var L in y.svgs)P||(x||(x=Ve.create("svg"),x.appendChild(O)),P=x.insertBefore(Ve.create("defs"),x.firstChild)),P.appendChild(y.svgs[L]);y=null}return v.asString?new e.XMLSerializer().serializeToString(x):x}function A(O,v,x){var P=b[O._class],L=P&&P(O,v);if(L){var T=v.onExport;T&&(L=T(O,L,v)||L);var M=JSON.stringify(O._data);M&&M!=="{}"&&M!=="null"&&L.setAttribute("data-paper-data",M)}return L&&S(O,L,x)}function w(O){return O||(O={}),r=new B(O.precision),O}Ie.inject({exportSVG:function(O){return O=w(O),C(A(this,O,!0),O)}}),bt.inject({exportSVG:function(O){O=w(O);var v=this._children,x=this.getView(),P=c.pick(O.bounds,"view"),L=O.matrix||P==="view"&&x._matrix,T=L&&_e.read([L]),M=P==="view"?new le([0,0],x.getViewSize()):P==="content"?Ie._getBounds(v,T,{stroke:!0}).rect:le.read([P],0,{readNull:!0}),D={version:"1.1",xmlns:Ve.svg,"xmlns:xlink":Ve.xlink};M&&(D.width=M.width,D.height=M.height,(M.x||M.x===0||M.y||M.y===0)&&(D.viewBox=r.rectangle(M)));var F=Ve.create("svg",D,r),U=F;T&&!T.isIdentity()&&(U=F.appendChild(Ve.create("g",i(T),r)));for(var N=0,q=v.length;N<q;N++)U.appendChild(A(v[N],O,!0));return C(F,O)}})},new function(){var r={},i;function s(v,x,P,L,T,M){var D=Ve.get(v,x)||M,F=D==null?L?null:P?"":0:P?D:parseFloat(D);return/%\s*$/.test(D)?F/100*(T?1:i[/x|^width/.test(x)?"width":"height"]):F}function o(v,x,P,L,T,M,D){return x=s(v,x||"x",!1,L,T,M),P=s(v,P||"y",!1,L,T,D),L&&(x==null||P==null)?null:new R(x,P)}function l(v,x,P,L,T){return x=s(v,x||"width",!1,L,T),P=s(v,P||"height",!1,L,T),L&&(x==null||P==null)?null:new Q(x,P)}function f(v,x,P){return v==="none"?null:x==="number"?parseFloat(v):x==="array"?v?v.split(/[\s,]+/g).map(parseFloat):[]:x==="color"?A(v)||v:x==="lookup"?P[v]:v}function d(v,x,P,L){var T=v.childNodes,M=x==="clippath",D=x==="defs",F=new sr,U=F._project,N=U._currentStyle,q=[];if(!M&&!D&&(F=C(F,v,L),U._currentStyle=F._style.clone()),L)for(var H=v.querySelectorAll("defs"),G=0,W=H.length;G<W;G++)w(H[G],P,!1);for(var G=0,W=T.length;G<W;G++){var K=T[G],re;K.nodeType===1&&!/^defs$/i.test(K.nodeName)&&(re=w(K,P,!1))&&!(re instanceof pr)&&q.push(re)}return F.addChildren(q),M&&(F=C(F.reduce(),v,L)),U._currentStyle=N,(M||D)&&(F.remove(),F=null),F}function h(v,x){for(var P=v.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),L=[],T=0,M=P.length;T<M;T+=2)L.push(new R(parseFloat(P[T]),parseFloat(P[T+1])));var D=new Le(L);return x==="polygon"&&D.closePath(),D}function _(v){return hn.create(v.getAttribute("d"))}function g(v,x){var P=(s(v,"href",!0)||"").substring(1),L=x==="radialgradient",T;if(P)T=r[P].getGradient(),T._radial^L&&(T=T.clone(),T._radial=L);else{for(var M=v.childNodes,D=[],F=0,U=M.length;F<U;F++){var N=M[F];N.nodeType===1&&D.push(C(new jo,N))}T=new Ts(D,L)}var q,H,G,W=s(v,"gradientUnits",!0)!=="userSpaceOnUse";L?(q=o(v,"cx","cy",!1,W,"50%","50%"),H=q.add(s(v,"r",!1,!1,W,"50%"),0),G=o(v,"fx","fy",!0,W)):(q=o(v,"x1","y1",!1,W,"0%","0%"),H=o(v,"x2","y2",!1,W,"100%","0%"));var K=C(new Qe(T,q,H,G),v);return K._scaleToBounds=W,null}var b={"#document":function(v,x,P,L){for(var T=v.childNodes,M=0,D=T.length;M<D;M++){var F=T[M];if(F.nodeType===1)return w(F,P,L)}},g:d,svg:d,clippath:d,polygon:h,polyline:h,path:_,lineargradient:g,radialgradient:g,image:function(v){var x=new ei(s(v,"href",!0));return x.on("load",function(){var P=l(v);this.setSize(P);var L=o(v).add(P.divide(2));this._matrix.append(new _e().translate(L))}),x},symbol:function(v,x,P,L){return new pr(d(v,x,P,L),!0)},defs:d,use:function(v){var x=(s(v,"href",!0)||"").substring(1),P=r[x],L=o(v);return P?P instanceof pr?P.place(L):P.clone().translate(L):null},circle:function(v){return new It.Circle(o(v,"cx","cy"),s(v,"r"))},ellipse:function(v){return new It.Ellipse({center:o(v,"cx","cy"),radius:l(v,"rx","ry")})},rect:function(v){return new It.Rectangle(new le(o(v),l(v)),l(v,"rx","ry"))},line:function(v){return new Le.Line(o(v,"x1","y1"),o(v,"x2","y2"))},text:function(v){var x=new w3(o(v).add(o(v,"dx","dy")));return x.setContent(v.textContent.trim()||""),x},switch:d};function S(v,x,P,L){if(v.transform){for(var T=(L.getAttribute(P)||"").split(/\)\s*/g),M=new _e,D=0,F=T.length;D<F;D++){var U=T[D];if(!U)break;for(var N=U.split(/\(\s*/),q=N[0],H=N[1].split(/[\s,]+/g),G=0,W=H.length;G<W;G++)H[G]=parseFloat(H[G]);switch(q){case"matrix":M.append(new _e(H[0],H[1],H[2],H[3],H[4],H[5]));break;case"rotate":M.rotate(H[0],H[1]||0,H[2]||0);break;case"translate":M.translate(H[0],H[1]||0);break;case"scale":M.scale(H);break;case"skewX":M.skew(H[0],0);break;case"skewY":M.skew(0,H[0]);break}}v.transform(M)}}function y(v,x,P){var L=P==="fill-opacity"?"getFillColor":"getStrokeColor",T=v[L]&&v[L]();T&&T.setAlpha(parseFloat(x))}var m=c.set(c.each(oh,function(v){this[v.attribute]=function(x,P){if(x[v.set]&&(x[v.set](f(P,v.type,v.fromSVG)),v.type==="color")){var L=x[v.get]();if(L&&L._scaleToBounds){var T=x.getBounds();L.transform(new _e().translate(T.getPoint()).scale(T.getSize()))}}}},{}),{id:function(v,x){r[x]=v,v.setName&&v.setName(x)},"clip-path":function(v,x){var P=A(x);if(P)if(P=P.clone(),P.setClipMask(!0),v instanceof sr)v.insertChild(0,P);else return new sr(P,v)},gradientTransform:S,transform:S,"fill-opacity":y,"stroke-opacity":y,visibility:function(v,x){v.setVisible&&v.setVisible(x==="visible")},display:function(v,x){v.setVisible&&v.setVisible(x!==null)},"stop-color":function(v,x){v.setColor&&v.setColor(x)},"stop-opacity":function(v,x){v._color&&v._color.setAlpha(parseFloat(x))},offset:function(v,x){if(v.setOffset){var P=x.match(/(.*)%$/);v.setOffset(P?P[1]/100:parseFloat(x))}},viewBox:function(v,x,P,L,T){var M=new le(f(x,"array")),D=l(L,null,null,!0),F,U;if(v instanceof sr){var N=D?D.divide(M.getSize()):1,U=new _e().scale(N).translate(M.getPoint().negate());F=v}else v instanceof pr&&(D&&M.setSize(D),F=v._item);if(F){if(I(L,"overflow",T)!=="visible"){var q=new It.Rectangle(M);q.setClipMask(!0),F.addChild(q)}U&&F.transform(U)}}});function I(v,x,P){var L=v.attributes[x],T=L&&L.value;if(!T&&v.style){var M=c.camelize(x);T=v.style[M],!T&&P.node[M]!==P.parent[M]&&(T=P.node[M])}return T?T==="none"?null:T:n}function C(v,x,P){var L=x.parentNode,T={node:He.getStyles(x)||{},parent:!P&&!/^defs$/i.test(L.tagName)&&He.getStyles(L)||{}};return c.each(m,function(M,D){var F=I(x,D,T);v=F!==n&&M(v,F,D,x,T)||v}),v}function A(v){var x=v&&v.match(/\((?:["'#]*)([^"')]+)/),P=x&&x[1],L=P&&r[a?P.replace(a.location.href.split("#")[0]+"#",""):P];return L&&L._scaleToBounds&&(L=L.clone(),L._scaleToBounds=!0),L}function w(v,x,P){var L=v.nodeName.toLowerCase(),T=L!=="#document",M=u.body,D,F,U;P&&T&&(i=Oe.getView().getSize(),i=l(v,null,null,!0)||i,D=Ve.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),F=v.parentNode,U=v.nextSibling,D.appendChild(v),M.appendChild(D));var N=Oe.settings,q=N.applyMatrix,H=N.insertItems;N.applyMatrix=!1,N.insertItems=!1;var G=b[L],W=G&&G(v,L,x,P)||null;if(N.insertItems=H,N.applyMatrix=q,W){T&&!(W instanceof sr)&&(W=C(W,v,P));var K=x.onImport,re=T&&v.getAttribute("data-paper-data");K&&(W=K(v,W,x)||W),x.expandShapes&&W instanceof It&&(W.remove(),W=W.toPath()),re&&(W._data=JSON.parse(re))}return D&&(M.removeChild(D),F&&(U?F.insertBefore(v,U):F.appendChild(v))),P&&(r={},W&&c.pick(x.applyMatrix,q)&&W.matrix.apply(!0,!0)),W}function O(v,x,P){if(!v)return null;x=typeof x=="function"?{onLoad:x}:x||{};var L=Oe,T=null;function M(N){try{var q=typeof N=="object"?N:new e.DOMParser().parseFromString(N.trim(),"image/svg+xml");if(!q.nodeName)throw q=null,new Error("Unsupported SVG source: "+v);Oe=L,T=w(q,x,!0),(!x||x.insert!==!1)&&P._insertItem(n,T);var H=x.onLoad;H&&H(T,N)}catch(G){D(G)}}function D(N,q){var H=x.onError;if(H)H(N,q);else throw new Error(N)}if(typeof v=="string"&&!/^[\s\S]*</.test(v)){var F=u.getElementById(v);F?M(F):ah.request({url:v,async:!0,onLoad:M,onError:D})}else if(typeof File!="undefined"&&v instanceof File){var U=new FileReader;return U.onload=function(){M(U.result)},U.onerror=function(){D(U.error)},U.readAsText(v)}else M(v);return T}Ie.inject({importSVG:function(v,x){return O(v,x,this)}}),bt.inject({importSVG:function(v,x){return this.activate(),O(v,x,this)}})},c.exports.PaperScript=function(){var r=this,i=r.acorn;if(!i&&typeof Rh!="undefined")try{i=require("acorn")}catch{}if(!i){var s,o;i=s=o={},function(C,A){if(typeof s=="object"&&typeof o=="object")return A(s);if(typeof n=="function"&&n.amd)return n(["exports"],A);A(C.acorn||(C.acorn={}))}(this,function(C){C.version="0.5.0";var A,w,O,v;C.parse=function(z,V){return w=String(z),O=w.length,P(V),wh(),tL(A.program)};var x=C.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function P(z){A=z||{};for(var V in x)Object.prototype.hasOwnProperty.call(A,V)||(A[V]=x[V]);v=A.sourceFile||null}var L=C.getLineInfo=function(z,V){for(var J=1,te=0;;){gn.lastIndex=te;var me=gn.exec(z);if(me&&me.index<V)++J,te=me.index+me[0].length;else break}return{line:J,column:V-te}};C.tokenize=function(z,V){w=String(z),O=w.length,P(V),wh();var J={};function te(me){return re=D,Dr(me),J.start=M,J.end=D,J.startLoc=F,J.endLoc=U,J.type=N,J.value=q,J}return te.jumpTo=function(me,ye){if(T=me,A.locations){G=1,W=gn.lastIndex=0;for(var Se;(Se=gn.exec(w))&&Se.index<me;)++G,W=Se.index+Se[0].length}H=ye,pn()},te};var T,M,D,F,U,N,q,H,G,W,K,re,ie,se,fe,X;function ee(z,V){var J=L(w,z);V+=" ("+J.line+":"+J.column+")";var te=new SyntaxError(V);throw te.pos=z,te.loc=J,te.raisedAt=T,te}var oe=[],de={type:"num"},he={type:"regexp"},ve={type:"string"},ge={type:"name"},we={type:"eof"},Ee={keyword:"break"},be={keyword:"case",beforeExpr:!0},rt={keyword:"catch"},nt={keyword:"continue"},ft={keyword:"debugger"},Ge={keyword:"default"},Me={keyword:"do",isLoop:!0},We={keyword:"else",beforeExpr:!0},Et={keyword:"finally"},it={keyword:"for",isLoop:!0},Rt={keyword:"function"},vr={keyword:"if"},jt={keyword:"return",beforeExpr:!0},Bt={keyword:"switch"},Ct={keyword:"throw",beforeExpr:!0},At={keyword:"try"},mr={keyword:"var"},qt={keyword:"while",isLoop:!0},Is={keyword:"with"},uh={keyword:"new",beforeExpr:!0},lh={keyword:"this"},ch={keyword:"null",atomValue:null},fh={keyword:"true",atomValue:!0},hh={keyword:"false",atomValue:!1},As={keyword:"in",binop:7,beforeExpr:!0},Uo={break:Ee,case:be,catch:rt,continue:nt,debugger:ft,default:Ge,do:Me,else:We,finally:Et,for:it,function:Rt,if:vr,return:jt,switch:Bt,throw:Ct,try:At,var:mr,while:qt,with:Is,null:ch,true:fh,false:hh,new:uh,in:As,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:lh,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},ks={type:"[",beforeExpr:!0},Ls={type:"]"},dn={type:"{",beforeExpr:!0},Mr={type:"}"},Jt={type:"(",beforeExpr:!0},Ut={type:")"},or={type:",",beforeExpr:!0},Zt={type:";",beforeExpr:!0},_n={type:":",beforeExpr:!0},Ho={type:"."},Vo={type:"?",beforeExpr:!0},Go={binop:10,beforeExpr:!0},Wo={isAssign:!0,beforeExpr:!0},$r={isAssign:!0,beforeExpr:!0},P3={postfix:!0,prefix:!0,isUpdate:!0},dh={prefix:!0,beforeExpr:!0},_h={binop:1,beforeExpr:!0},gh={binop:2,beforeExpr:!0},I3={binop:3,beforeExpr:!0},A3={binop:4,beforeExpr:!0},k3={binop:5,beforeExpr:!0},L3={binop:6,beforeExpr:!0},R3={binop:7,beforeExpr:!0},M3={binop:8,beforeExpr:!0},$3={binop:9,prefix:!0,beforeExpr:!0},N3={binop:10,beforeExpr:!0};C.tokTypes={bracketL:ks,bracketR:Ls,braceL:dn,braceR:Mr,parenL:Jt,parenR:Ut,comma:or,semi:Zt,colon:_n,dot:Ho,question:Vo,slash:Go,eq:Wo,name:ge,eof:we,num:de,regexp:he,string:ve};for(var ph in Uo)C.tokTypes["_"+ph]=Uo[ph];function ti(z){z=z.split(" ");var V="",J=[];e:for(var te=0;te<z.length;++te){for(var me=0;me<J.length;++me)if(J[me][0].length==z[te].length){J[me].push(z[te]);continue e}J.push([z[te]])}function ye(Re){if(Re.length==1)return V+="return str === "+JSON.stringify(Re[0])+";";V+="switch(str){";for(var Vt=0;Vt<Re.length;++Vt)V+="case "+JSON.stringify(Re[Vt])+":";V+="return true}return false;"}if(J.length>3){J.sort(function(Re,Vt){return Vt.length-Re.length}),V+="switch(str.length){";for(var te=0;te<J.length;++te){var Se=J[te];V+="case "+Se[0].length+":",ye(Se)}V+="}"}else ye(z);return new Function("str",V)}var D3=ti("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),F3=ti("class enum extends super const export import"),vh=ti("implements interface let package private protected public static yield"),Rs=ti("eval arguments"),z3=ti("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),j3=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,mh="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",B3="\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u0620-\u0649\u0672-\u06D3\u06E7-\u06E8\u06FB-\u06FC\u0730-\u074A\u0800-\u0814\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0840-\u0857\u08E4-\u08FE\u0900-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09D7\u09DF-\u09E0\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5F-\u0B60\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2-\u0CE3\u0CE6-\u0CEF\u0D02\u0D03\u0D46-\u0D48\u0D57\u0D62-\u0D63\u0D66-\u0D6F\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E34-\u0E3A\u0E40-\u0E45\u0E50-\u0E59\u0EB4-\u0EB9\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F41-\u0F47\u0F71-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1029\u1040-\u1049\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u170E-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17B2\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1920-\u192B\u1930-\u193B\u1951-\u196D\u19B0-\u19C0\u19C8-\u19C9\u19D0-\u19D9\u1A00-\u1A15\u1A20-\u1A53\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1B46-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C00-\u1C22\u1C40-\u1C49\u1C5B-\u1C7D\u1CD0-\u1CD2\u1D00-\u1DBE\u1E01-\u1F15\u200C\u200D\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2D81-\u2D96\u2DE0-\u2DFF\u3021-\u3028\u3099\u309A\uA640-\uA66D\uA674-\uA67D\uA69F\uA6F0-\uA6F1\uA7F8-\uA800\uA806\uA80B\uA823-\uA827\uA880-\uA881\uA8B4-\uA8C4\uA8D0-\uA8D9\uA8F3-\uA8F7\uA900-\uA909\uA926-\uA92D\uA930-\uA945\uA980-\uA983\uA9B3-\uA9C0\uAA00-\uAA27\uAA40-\uAA41\uAA4C-\uAA4D\uAA50-\uAA59\uAA7B\uAAE0-\uAAE9\uAAF2-\uAAF3\uABC0-\uABE1\uABEC\uABED\uABF0-\uABF9\uFB20-\uFB28\uFE00-\uFE0F\uFE20-\uFE26\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F",yh=new RegExp("["+mh+"]"),q3=new RegExp("["+mh+B3+"]"),Ms=/[\n\r\u2028\u2029]/,gn=/\r\n|[\n\r\u2028\u2029]/g,$s=C.isIdentifierStart=function(z){return z<65?z===36:z<91?!0:z<97?z===95:z<123?!0:z>=170&&yh.test(String.fromCharCode(z))},bh=C.isIdentifierChar=function(z){return z<48?z===36:z<58?!0:z<65?!1:z<91?!0:z<97?z===95:z<123?!0:z>=170&&q3.test(String.fromCharCode(z))};function Nr(){this.line=G,this.column=T-W}function wh(){G=1,T=W=0,H=!0,pn()}function ot(z,V){D=T,A.locations&&(U=new Nr),N=z,pn(),q=V,H=z.beforeExpr}function U3(){var z=A.onComment&&A.locations&&new Nr,V=T,J=w.indexOf("*/",T+=2);if(J===-1&&ee(T-2,"Unterminated comment"),T=J+2,A.locations){gn.lastIndex=V;for(var te;(te=gn.exec(w))&&te.index<T;)++G,W=te.index+te[0].length}A.onComment&&A.onComment(!0,w.slice(V+2,J),V,T,z,A.locations&&new Nr)}function Ko(){for(var z=T,V=A.onComment&&A.locations&&new Nr,J=w.charCodeAt(T+=2);T<O&&J!==10&&J!==13&&J!==8232&&J!==8233;)++T,J=w.charCodeAt(T);A.onComment&&A.onComment(!1,w.slice(z+2,T),z,T,V,A.locations&&new Nr)}function pn(){for(;T<O;){var z=w.charCodeAt(T);if(z===32)++T;else if(z===13){++T;var V=w.charCodeAt(T);V===10&&++T,A.locations&&(++G,W=T)}else if(z===10||z===8232||z===8233)++T,A.locations&&(++G,W=T);else if(z>8&&z<14)++T;else if(z===47){var V=w.charCodeAt(T+1);if(V===42)U3();else if(V===47)Ko();else break}else if(z===160)++T;else if(z>=5760&&j3.test(String.fromCharCode(z)))++T;else break}}function H3(){var z=w.charCodeAt(T+1);return z>=48&&z<=57?Eh(!0):(++T,ot(Ho))}function V3(){var z=w.charCodeAt(T+1);return H?(++T,Sh()):z===61?ut($r,2):ut(Go,1)}function G3(){var z=w.charCodeAt(T+1);return z===61?ut($r,2):ut(N3,1)}function W3(z){var V=w.charCodeAt(T+1);return V===z?ut(z===124?_h:gh,2):V===61?ut($r,2):ut(z===124?I3:k3,1)}function K3(){var z=w.charCodeAt(T+1);return z===61?ut($r,2):ut(A3,1)}function Y3(z){var V=w.charCodeAt(T+1);return V===z?V==45&&w.charCodeAt(T+2)==62&&Ms.test(w.slice(re,T))?(T+=3,Ko(),pn(),Dr()):ut(P3,2):V===61?ut($r,2):ut($3,1)}function J3(z){var V=w.charCodeAt(T+1),J=1;return V===z?(J=z===62&&w.charCodeAt(T+2)===62?3:2,w.charCodeAt(T+J)===61?ut($r,J+1):ut(M3,J)):V==33&&z==60&&w.charCodeAt(T+2)==45&&w.charCodeAt(T+3)==45?(T+=4,Ko(),pn(),Dr()):(V===61&&(J=w.charCodeAt(T+2)===61?3:2),ut(R3,J))}function Z3(z){var V=w.charCodeAt(T+1);return V===61?ut(L3,w.charCodeAt(T+2)===61?3:2):ut(z===61?Wo:dh,1)}function X3(z){switch(z){case 46:return H3();case 40:return++T,ot(Jt);case 41:return++T,ot(Ut);case 59:return++T,ot(Zt);case 44:return++T,ot(or);case 91:return++T,ot(ks);case 93:return++T,ot(Ls);case 123:return++T,ot(dn);case 125:return++T,ot(Mr);case 58:return++T,ot(_n);case 63:return++T,ot(Vo);case 48:var V=w.charCodeAt(T+1);if(V===120||V===88)return Q3();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Eh(!1);case 34:case 39:return eL(z);case 47:return V3();case 37:case 42:return G3();case 124:case 38:return W3(z);case 94:return K3();case 43:case 45:return Y3(z);case 60:case 62:return J3(z);case 61:case 33:return Z3(z);case 126:return ut(dh,1)}return!1}function Dr(z){if(z?T=M+1:M=T,A.locations&&(F=new Nr),z)return Sh();if(T>=O)return ot(we);var V=w.charCodeAt(T);if($s(V)||V===92)return xh();var J=X3(V);if(J===!1){var te=String.fromCharCode(V);if(te==="\\"||yh.test(te))return xh();ee(T,"Unexpected character '"+te+"'")}return J}function ut(z,V){var J=w.slice(T,T+V);T+=V,ot(z,J)}function Sh(){for(var me="",z,V,J=T;;){T>=O&&ee(J,"Unterminated regular expression");var te=w.charAt(T);if(Ms.test(te)&&ee(J,"Unterminated regular expression"),z)z=!1;else{if(te==="[")V=!0;else if(te==="]"&&V)V=!1;else if(te==="/"&&!V)break;z=te==="\\"}++T}var me=w.slice(J,T);++T;var ye=Ch();ye&&!/^[gmsiy]*$/.test(ye)&&ee(J,"Invalid regexp flag");try{var Se=new RegExp(me,ye)}catch(Re){Re instanceof SyntaxError&&ee(J,Re.message),ee(Re)}return ot(he,Se)}function ri(z,V){for(var J=T,te=0,me=0,ye=V==null?1/0:V;me<ye;++me){var Se=w.charCodeAt(T),Re;if(Se>=97?Re=Se-97+10:Se>=65?Re=Se-65+10:Se>=48&&Se<=57?Re=Se-48:Re=1/0,Re>=z)break;++T,te=te*z+Re}return T===J||V!=null&&T-J!==V?null:te}function Q3(){T+=2;var z=ri(16);return z==null&&ee(M+2,"Expected hexadecimal number"),$s(w.charCodeAt(T))&&ee(T,"Identifier directly after number"),ot(de,z)}function Eh(z){var V=T,J=!1,te=w.charCodeAt(T)===48;!z&&ri(10)===null&&ee(V,"Invalid number"),w.charCodeAt(T)===46&&(++T,ri(10),J=!0);var me=w.charCodeAt(T);(me===69||me===101)&&(me=w.charCodeAt(++T),(me===43||me===45)&&++T,ri(10)===null&&ee(V,"Invalid number"),J=!0),$s(w.charCodeAt(T))&&ee(T,"Identifier directly after number");var ye=w.slice(V,T),Se;return J?Se=parseFloat(ye):!te||ye.length===1?Se=parseInt(ye,10):/[89]/.test(ye)||X?ee(V,"Invalid number"):Se=parseInt(ye,8),ot(de,Se)}function eL(z){T++;for(var V="";;){T>=O&&ee(M,"Unterminated string constant");var J=w.charCodeAt(T);if(J===z)return++T,ot(ve,V);if(J===92){J=w.charCodeAt(++T);var te=/^[0-7]+/.exec(w.slice(T,T+3));for(te&&(te=te[0]);te&&parseInt(te,8)>255;)te=te.slice(0,-1);if(te==="0"&&(te=null),++T,te)X&&ee(T-2,"Octal literal in strict mode"),V+=String.fromCharCode(parseInt(te,8)),T+=te.length-1;else switch(J){case 110:V+=`
`;break;case 114:V+="\r";break;case 120:V+=String.fromCharCode(Ns(2));break;case 117:V+=String.fromCharCode(Ns(4));break;case 85:V+=String.fromCharCode(Ns(8));break;case 116:V+="	";break;case 98:V+="\b";break;case 118:V+="\v";break;case 102:V+="\f";break;case 48:V+="\0";break;case 13:w.charCodeAt(T)===10&&++T;case 10:A.locations&&(W=T,++G);break;default:V+=String.fromCharCode(J);break}}else(J===13||J===10||J===8232||J===8233)&&ee(M,"Unterminated string constant"),V+=String.fromCharCode(J),++T}}function Ns(z){var V=ri(16,z);return V===null&&ee(M,"Bad character escape sequence"),V}var vn;function Ch(){vn=!1;for(var z,V=!0,J=T;;){var te=w.charCodeAt(T);if(bh(te))vn&&(z+=w.charAt(T)),++T;else if(te===92){vn||(z=w.slice(J,T)),vn=!0,w.charCodeAt(++T)!=117&&ee(T,"Expecting Unicode escape sequence \\uXXXX"),++T;var me=Ns(4),ye=String.fromCharCode(me);ye||ee(T-1,"Invalid Unicode escape"),(V?$s(me):bh(me))||ee(T-4,"Invalid Unicode escape"),z+=ye}else break;V=!1}return vn?z:w.slice(J,T)}function xh(){var z=Ch(),V=ge;return!vn&&z3(z)&&(V=Uo[z]),ot(V,z)}function ke(){K=M,re=D,ie=U,Dr()}function Yo(z){if(X=z,T=M,A.locations)for(;T<W;)W=w.lastIndexOf(`
`,W-2)+1,--G;pn(),Dr()}function Oh(){this.type=null,this.start=M,this.end=null}function Th(){this.start=F,this.end=null,v!==null&&(this.source=v)}function ht(){var z=new Oh;return A.locations&&(z.loc=new Th),A.directSourceFile&&(z.sourceFile=A.directSourceFile),A.ranges&&(z.range=[M,0]),z}function yr(z){var V=new Oh;return V.start=z.start,A.locations&&(V.loc=new Th,V.loc.start=z.loc.start),A.ranges&&(V.range=[z.range[0],0]),V}function xe(z,V){return z.type=V,z.end=re,A.locations&&(z.loc.end=ie),A.ranges&&(z.range[1]=re),z}function Jo(z){return A.ecmaVersion>=5&&z.type==="ExpressionStatement"&&z.expression.type==="Literal"&&z.expression.value==="use strict"}function Be(z){if(N===z)return ke(),!0}function Ds(){return!A.strictSemicolons&&(N===we||N===Mr||Ms.test(w.slice(re,M)))}function Fr(){!Be(Zt)&&!Ds()&&ur()}function Ze(z){N===z?ke():ur()}function ur(){ee(M,"Unexpected token")}function Fs(z){z.type!=="Identifier"&&z.type!=="MemberExpression"&&ee(z.start,"Assigning to rvalue"),X&&z.type==="Identifier"&&Rs(z.name)&&ee(z.start,"Assigning to "+z.name+" in strict mode")}function tL(z){K=re=T,A.locations&&(ie=new Nr),se=X=null,fe=[],Dr();var V=z||ht(),J=!0;for(z||(V.body=[]);N!==we;){var te=Ht();V.body.push(te),J&&Jo(te)&&Yo(!0),J=!1}return xe(V,"Program")}var Zo={kind:"loop"},rL={kind:"switch"};function Ht(){(N===Go||N===$r&&q=="/=")&&Dr(!0);var z=N,V=ht();switch(z){case Ee:case nt:ke();var J=z===Ee;Be(Zt)||Ds()?V.label=null:N!==ge?ur():(V.label=br(),Fr());for(var te=0;te<fe.length;++te){var me=fe[te];if((V.label==null||me.name===V.label.name)&&(me.kind!=null&&(J||me.kind==="loop")||V.label&&J))break}return te===fe.length&&ee(V.start,"Unsyntactic "+z.keyword),xe(V,J?"BreakStatement":"ContinueStatement");case ft:return ke(),Fr(),xe(V,"DebuggerStatement");case Me:return ke(),fe.push(Zo),V.body=Ht(),fe.pop(),Ze(qt),V.test=ni(),Fr(),xe(V,"DoWhileStatement");case it:if(ke(),fe.push(Zo),Ze(Jt),N===Zt)return Xo(V,null);if(N===mr){var ye=ht();return ke(),Ih(ye,!0),xe(ye,"VariableDeclaration"),ye.declarations.length===1&&Be(As)?Ph(V,ye):Xo(V,ye)}var ye=pt(!1,!0);return Be(As)?(Fs(ye),Ph(V,ye)):Xo(V,ye);case Rt:return ke(),nu(V,!0);case vr:return ke(),V.test=ni(),V.consequent=Ht(),V.alternate=Be(We)?Ht():null,xe(V,"IfStatement");case jt:return!se&&!A.allowReturnOutsideFunction&&ee(M,"'return' outside of function"),ke(),Be(Zt)||Ds()?V.argument=null:(V.argument=pt(),Fr()),xe(V,"ReturnStatement");case Bt:ke(),V.discriminant=ni(),V.cases=[],Ze(dn),fe.push(rL);for(var Se,Re;N!=Mr;)if(N===be||N===Ge){var Vt=N===be;Se&&xe(Se,"SwitchCase"),V.cases.push(Se=ht()),Se.consequent=[],ke(),Vt?Se.test=pt():(Re&&ee(K,"Multiple default clauses"),Re=!0,Se.test=null),Ze(_n)}else Se||ur(),Se.consequent.push(Ht());return Se&&xe(Se,"SwitchCase"),ke(),fe.pop(),xe(V,"SwitchStatement");case Ct:return ke(),Ms.test(w.slice(re,M))&&ee(re,"Illegal newline after throw"),V.argument=pt(),Fr(),xe(V,"ThrowStatement");case At:if(ke(),V.block=ii(),V.handler=null,N===rt){var zr=ht();ke(),Ze(Jt),zr.param=br(),X&&Rs(zr.param.name)&&ee(zr.param.start,"Binding "+zr.param.name+" in strict mode"),Ze(Ut),zr.guard=null,zr.body=ii(),V.handler=xe(zr,"CatchClause")}return V.guardedHandlers=oe,V.finalizer=Be(Et)?ii():null,!V.handler&&!V.finalizer&&ee(V.start,"Missing catch or finally clause"),xe(V,"TryStatement");case mr:return ke(),Ih(V),Fr(),xe(V,"VariableDeclaration");case qt:return ke(),V.test=ni(),fe.push(Zo),V.body=Ht(),fe.pop(),xe(V,"WhileStatement");case Is:return X&&ee(M,"'with' in strict mode"),ke(),V.object=ni(),V.body=Ht(),xe(V,"WithStatement");case dn:return ii();case Zt:return ke(),xe(V,"EmptyStatement");default:var su=q,zs=pt();if(z===ge&&zs.type==="Identifier"&&Be(_n)){for(var te=0;te<fe.length;++te)fe[te].name===su&&ee(zs.start,"Label '"+su+"' is already declared");var uL=N.isLoop?"loop":N===Bt?"switch":null;return fe.push({name:su,kind:uL}),V.body=Ht(),fe.pop(),V.label=zs,xe(V,"LabeledStatement")}else return V.expression=zs,Fr(),xe(V,"ExpressionStatement")}}function ni(){Ze(Jt);var z=pt();return Ze(Ut),z}function ii(z){var V=ht(),J=!0,te=!1,me;for(V.body=[],Ze(dn);!Be(Mr);){var ye=Ht();V.body.push(ye),J&&z&&Jo(ye)&&(me=te,Yo(te=!0)),J=!1}return te&&!me&&Yo(!1),xe(V,"BlockStatement")}function Xo(z,V){return z.init=V,Ze(Zt),z.test=N===Zt?null:pt(),Ze(Zt),z.update=N===Ut?null:pt(),Ze(Ut),z.body=Ht(),fe.pop(),xe(z,"ForStatement")}function Ph(z,V){return z.left=V,z.right=pt(),Ze(Ut),z.body=Ht(),fe.pop(),xe(z,"ForInStatement")}function Ih(z,V){for(z.declarations=[],z.kind="var";;){var J=ht();if(J.id=br(),X&&Rs(J.id.name)&&ee(J.id.start,"Binding "+J.id.name+" in strict mode"),J.init=Be(Wo)?pt(!0,V):null,z.declarations.push(xe(J,"VariableDeclarator")),!Be(or))break}return z}function pt(z,V){var J=Qo(V);if(!z&&N===or){var te=yr(J);for(te.expressions=[J];Be(or);)te.expressions.push(Qo(V));return xe(te,"SequenceExpression")}return J}function Qo(z){var V=nL(z);if(N.isAssign){var J=yr(V);return J.operator=q,J.left=V,ke(),J.right=Qo(z),Fs(V),xe(J,"AssignmentExpression")}return V}function nL(z){var V=iL(z);if(Be(Vo)){var J=yr(V);return J.test=V,J.consequent=pt(!0),Ze(_n),J.alternate=pt(!0,z),xe(J,"ConditionalExpression")}return V}function iL(z){return eu(tu(),-1,z)}function eu(z,V,J){var te=N.binop;if(te!=null&&(!J||N!==As)&&te>V){var me=yr(z);me.left=z,me.operator=q;var ye=N;ke(),me.right=eu(tu(),te,J);var Se=xe(me,ye===_h||ye===gh?"LogicalExpression":"BinaryExpression");return eu(Se,V,J)}return z}function tu(){if(N.prefix){var z=ht(),V=N.isUpdate;return z.operator=q,z.prefix=!0,H=!0,ke(),z.argument=tu(),V?Fs(z.argument):X&&z.operator==="delete"&&z.argument.type==="Identifier"&&ee(z.start,"Deleting local variable in strict mode"),xe(z,V?"UpdateExpression":"UnaryExpression")}for(var J=sL();N.postfix&&!Ds();){var z=yr(J);z.operator=q,z.prefix=!1,z.argument=J,Fs(J),ke(),J=xe(z,"UpdateExpression")}return J}function sL(){return si(ru())}function si(z,V){if(Be(Ho)){var J=yr(z);return J.object=z,J.property=br(!0),J.computed=!1,si(xe(J,"MemberExpression"),V)}else if(Be(ks)){var J=yr(z);return J.object=z,J.property=pt(),J.computed=!0,Ze(Ls),si(xe(J,"MemberExpression"),V)}else if(!V&&Be(Jt)){var J=yr(z);return J.callee=z,J.arguments=iu(Ut,!1),si(xe(J,"CallExpression"),V)}else return z}function ru(){switch(N){case lh:var te=ht();return ke(),xe(te,"ThisExpression");case ge:return br();case de:case ve:case he:var te=ht();return te.value=q,te.raw=w.slice(M,D),ke(),xe(te,"Literal");case ch:case fh:case hh:var te=ht();return te.value=N.atomValue,te.raw=N.keyword,ke(),xe(te,"Literal");case Jt:var z=F,V=M;ke();var J=pt();return J.start=V,J.end=D,A.locations&&(J.loc.start=z,J.loc.end=U),A.ranges&&(J.range=[V,D]),Ze(Ut),J;case ks:var te=ht();return ke(),te.elements=iu(Ls,!0,!0),xe(te,"ArrayExpression");case dn:return oL();case Rt:var te=ht();return ke(),nu(te,!1);case uh:return aL();default:ur()}}function aL(){var z=ht();return ke(),z.callee=si(ru(),!0),Be(Jt)?z.arguments=iu(Ut,!1):z.arguments=oe,xe(z,"NewExpression")}function oL(){var z=ht(),V=!0,J=!1;for(z.properties=[],ke();!Be(Mr);){if(V)V=!1;else if(Ze(or),A.allowTrailingCommas&&Be(Mr))break;var te={key:Ah()},me=!1,ye;if(Be(_n)?(te.value=pt(!0),ye=te.kind="init"):A.ecmaVersion>=5&&te.key.type==="Identifier"&&(te.key.name==="get"||te.key.name==="set")?(me=J=!0,ye=te.kind=te.key.name,te.key=Ah(),N!==Jt&&ur(),te.value=nu(ht(),!1)):ur(),te.key.type==="Identifier"&&(X||J))for(var Se=0;Se<z.properties.length;++Se){var Re=z.properties[Se];if(Re.key.name===te.key.name){var Vt=ye==Re.kind||me&&Re.kind==="init"||ye==="init"&&(Re.kind==="get"||Re.kind==="set");Vt&&!X&&ye==="init"&&Re.kind==="init"&&(Vt=!1),Vt&&ee(te.key.start,"Redefinition of property")}}z.properties.push(te)}return xe(z,"ObjectExpression")}function Ah(){return N===de||N===ve?ru():br(!0)}function nu(z,V){N===ge?z.id=br():V?ur():z.id=null,z.params=[];var J=!0;for(Ze(Jt);!Be(Ut);)J?J=!1:Ze(or),z.params.push(br());var te=se,me=fe;if(se=!0,fe=[],z.body=ii(!0),se=te,fe=me,X||z.body.body.length&&Jo(z.body.body[0]))for(var ye=z.id?-1:0;ye<z.params.length;++ye){var Se=ye<0?z.id:z.params[ye];if((vh(Se.name)||Rs(Se.name))&&ee(Se.start,"Defining '"+Se.name+"' in strict mode"),ye>=0)for(var Re=0;Re<ye;++Re)Se.name===z.params[Re].name&&ee(Se.start,"Argument name clash in strict mode")}return xe(z,V?"FunctionDeclaration":"FunctionExpression")}function iu(z,V,J){for(var te=[],me=!0;!Be(z);){if(me)me=!1;else if(Ze(or),V&&A.allowTrailingCommas&&Be(z))break;J&&N===or?te.push(null):te.push(pt(!0))}return te}function br(z){var V=ht();return z&&A.forbidReserved=="everywhere"&&(z=!1),N===ge?(!z&&(A.forbidReserved&&(A.ecmaVersion===3?D3:F3)(q)||X&&vh(q))&&w.slice(M,D).indexOf("\\")==-1&&ee(M,"The keyword '"+q+"' is reserved"),V.name=q):z&&N.keyword?V.name=N.keyword:ur(),H=!1,ke(),xe(V,"Identifier")}}),i.version||(i=null)}function l(C,A){return(r.acorn||i).parse(C,A)}var f={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},d={"-":"__negate","+":"__self"},h=c.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(C){this["__"+C]="#"+C},{__self:function(){return this}});R.inject(h),Q.inject(h),Qe.inject(h);function _(C,A,w){var O=f[A];if(C&&C[O]){var v=C[O](w);return A==="!="?!v:v}switch(A){case"+":return C+w;case"-":return C-w;case"*":return C*w;case"/":return C/w;case"%":return C%w;case"==":return C==w;case"!=":return C!=w}}function g(C,A){var w=d[C];if(A&&A[w])return A[w]();switch(C){case"+":return+A;case"-":return-A}}function b(C,A){if(!C)return"";A=A||{};var w=[];function O(X){for(var ee=0,oe=w.length;ee<oe;ee++){var de=w[ee];if(de[0]>=X)break;X+=de[1]}return X}function v(X){return C.substring(O(X.range[0]),O(X.range[1]))}function x(X,ee){return C.substring(O(X.range[1]),O(ee.range[0]))}function P(X,ee){for(var oe=O(X.range[0]),de=O(X.range[1]),he=0,ve=w.length-1;ve>=0;ve--)if(oe>w[ve][0]){he=ve+1;break}w.splice(he,0,[oe,ee.length-de+oe]),C=C.substring(0,oe)+ee+C.substring(de)}function L(X,ee){switch(X.type){case"UnaryExpression":if(X.operator in d&&X.argument.type!=="Literal"){var oe=v(X.argument);P(X,'$__("'+X.operator+'", '+oe+")")}break;case"BinaryExpression":if(X.operator in f&&X.left.type!=="Literal"){var de=v(X.left),he=v(X.right),ve=x(X.left,X.right),ge=X.operator;P(X,"__$__("+de+","+ve.replace(new RegExp("\\"+ge),'"'+ge+'"')+", "+he+")")}break;case"UpdateExpression":case"AssignmentExpression":var we=ee&&ee.type;if(!(we==="ForStatement"||we==="BinaryExpression"&&/^[=!<>]/.test(ee.operator)||we==="MemberExpression"&&ee.computed)){if(X.type==="UpdateExpression"){var oe=v(X.argument),Ee="__$__("+oe+', "'+X.operator[0]+'", 1)',be=oe+" = "+Ee;X.prefix?be="("+be+")":(we==="AssignmentExpression"||we==="VariableDeclarator"||we==="BinaryExpression")&&(v(ee.left||ee.id)===oe&&(be=Ee),be=oe+"; "+be),P(X,be)}else if(/^.=$/.test(X.operator)&&X.left.type!=="Literal"){var de=v(X.left),he=v(X.right),Ee=de+" = __$__("+de+', "'+X.operator[0]+'", '+he+")";P(X,/^\(.*\)$/.test(v(X))?"("+Ee+")":Ee)}}break}}function T(X){switch(X.type){case"ExportDefaultDeclaration":P({range:[X.start,X.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var ee=X.declaration,oe=X.specifiers;if(ee){var de=ee.declarations;de&&(de.forEach(function(ve){P(ve,"module.exports."+v(ve))}),P({range:[X.start,ee.start+ee.kind.length]},""))}else if(oe){var he=oe.map(function(ve){var ge=v(ve);return"module.exports."+ge+" = "+ge+"; "}).join("");he&&P(X,he)}break}}function M(X,ee,oe){if(X){for(var de in X)if(de!=="range"&&de!=="loc"){var he=X[de];if(Array.isArray(he))for(var ve=0,ge=he.length;ve<ge;ve++)M(he[ve],X,oe);else he&&typeof he=="object"&&M(he,X,oe)}oe.operatorOverloading!==!1&&L(X,ee),oe.moduleExports!==!1&&T(X)}}function D(X){var ee="",oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(X=(Math.abs(X)<<1)+(X<0?1:0);X||!ee;){var de=X&31;X>>=5,X&&(de|=32),ee+=oe[de]}return ee}var F=A.url||"",U=A.sourceMaps,N=A.paperFeatures||{},q=A.source||C,H=A.offset||0,G=Oe.agent,W=G.versionNumber,K=!1,re=/\r\n|\n|\r/mg,ie;if(U&&(G.chrome&&W>=30||G.webkit&&W>=537.76||G.firefox&&W>=23||G.node)){if(G.node)H-=2;else if(a&&F&&!a.location.href.indexOf(F)){var se=u.getElementsByTagName("html")[0].innerHTML;H=se.substr(0,se.indexOf(C)+1).match(re).length+1}K=H>0&&!(G.chrome&&W>=36||G.safari&&W>=600||G.firefox&&W>=40||G.node);var fe=["AA"+D(K?0:H)+"A"];fe.length=(C.match(re)||[]).length+1+(K?H:0),ie={version:3,file:F,names:[],mappings:fe.join(";AACA"),sourceRoot:"",sources:[F],sourcesContent:[q]}}return(N.operatorOverloading!==!1||N.moduleExports!==!1)&&M(l(C,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,N),ie&&(K&&(C=new Array(H+1).join(`
`)+C),/^(inline|both)$/.test(U)&&(C+=`
//# sourceMappingURL=data:application/json;base64,`+e.btoa(unescape(encodeURIComponent(JSON.stringify(ie))))),C+=`
//# sourceURL=`+(F||"paperscript")),{url:F,source:q,code:C,map:ie}}function S(C,A,w){Oe=A;var O=A.getView(),v=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(C)&&!/\bnew\s+Tool\b/.test(C)?new O3:null,x=v?v._events:[],P=["onFrame","onResize"].concat(x),L=[],T=[],M,D=typeof C=="object"?C:b(C,w);C=D.code;function F(W,K){for(var re in W)(K||!/^_/.test(re))&&new RegExp("([\\b\\s\\W]|^)"+re.replace(/\$/g,"\\$")+"\\b").test(C)&&(L.push(re),T.push(W[re]))}F({__$__:_,$__:g,paper:A,tool:v},!0),F(A),C="var module = { exports: {} }; "+C;var H=c.each(P,function(W){new RegExp("\\s+"+W+"\\b").test(C)&&(L.push(W),this.push("module.exports."+W+" = "+W+";"))},[]).join(`
`);H&&(C+=`
`+H),C+=`
return module.exports;`;var U=Oe.agent;if(u&&(U.chrome||U.firefox&&U.versionNumber<40)){var N=u.createElement("script"),q=u.head||u.getElementsByTagName("head")[0];U.firefox&&(C=`
`+C),N.appendChild(u.createTextNode("document.__paperscript__ = function("+L+") {"+C+`
}`)),q.appendChild(N),M=u.__paperscript__,delete u.__paperscript__,q.removeChild(N)}else M=Function(L,C);var H=M&&M.apply(A,T),G=H||{};return c.each(x,function(W){var K=G[W];K&&(v[W]=K)}),O&&(G.onResize&&O.setOnResize(G.onResize),O.emit("resize",{size:O.size,delta:new R}),G.onFrame&&O.setOnFrame(G.onFrame),O.requestUpdate()),H}function y(C){if(/^text\/(?:x-|)paperscript$/.test(C.type)&&E.getAttribute(C,"ignore")!=="true"){var A=E.getAttribute(C,"canvas"),w=u.getElementById(A),O=C.src||C.getAttribute("data-src"),v=E.hasAttribute(C,"async"),x="data-paper-scope";if(!w)throw new Error('Unable to find canvas with id "'+A+'"');var P=E.get(w.getAttribute(x))||new E().setup(w);return w.setAttribute(x,P._id),O?ah.request({url:O,async:v,mimeType:"text/plain",onLoad:function(L){S(L,P,O)}}):S(C.innerHTML,P,C.baseURI),C.setAttribute("data-paper-ignore","true"),P}}function m(){c.each(u&&u.getElementsByTagName("script"),y)}function I(C){return C?y(C):m()}return a&&(u.readyState==="complete"?setTimeout(m):et.add(a,{load:m})),{compile:b,execute:S,load:I,parse:l,calculateBinary:_,calculateUnary:g}}.call(this);var Oe=new(E.inject(c.exports,{Base:c,Numerical:j,Key:sh,DomEvent:et,DomElement:He,document:u,window:a,Symbol:pr,PlacedSymbol:Fo}));return Oe.agent.node&&Pu(Oe),typeof n=="function"&&n.amd?n("paper",Oe):t&&(t.exports=Oe),Oe}).call(ce,typeof self=="object"?self:null)})(Tu);var sa=Tu.exports;sa.setup(new sa.Size(100,100));const Qd=1e-8;function e_(t){if(typeof t!="string")return t;const e=new sa.CompoundPath(t);return e.children.forEach(n=>{n.segments.length>100&&n.simplify(Qd)}),e.pathData}class Iu{constructor(e){var n;this._sourceLayer=e.sourceLayer,this._isStroke=(n=e.isStroke)!=null?n:!1}get sourceLayer(){return this._sourceLayer}get _sourceShape(){if(this.sourceLayer.type==="SHAPE")switch(this.sourceLayer.shapeType){case"RECTANGLE":return"RECTANGLE";case"LINE":return"LINE";case"ELLIPSE":return"ELLIPSE";case"REGULAR_POLYGON":case"STAR":return"POLYGON";default:return}}_transform({sourceLayer:e,isTopLayer:n}){var a;return n?kt.TRANSFORM:(a=e.transform)!=null?a:kt.TRANSFORM}_firstGeometry(e){var n,a;return this._isStroke?(n=e.strokeGeometry[0])!=null?n:e.fillGeometry[0]:(a=e.fillGeometry[0])!=null?a:e.strokeGeometry[0]}_geometry(e){var a;const n=(a=this._firstGeometry(e))==null?void 0:a.path;return n?e_(n):kt.EMPTY_PATH}_isRectangle(e){return e.shapeType==="RECTANGLE"}_getPathRectangle({sourceLayer:e,isTopLayer:n}){var k;const a=e.visible,u=this._transform({sourceLayer:e,isTopLayer:n}),c=(k=e.size)!=null?k:{x:0,y:0},p=Eu(c),E=e.cornerRadius;return{type:"RECTANGLE",visible:a,transform:u,rectangle:p,cornerRadius:E}}_getPathPath({sourceLayer:e,isTopLayer:n}){const a=e.visible,u=this._transform({sourceLayer:e,isTopLayer:n}),c={sourceShape:this._sourceShape},p=this._geometry(e);return{type:"PATH",visible:a,transform:u,meta:c,geometry:p}}_getPathBool({sourceLayer:e,isTopLayer:n}){const a=e.booleanOperation,u=e.visible,c=this._transform({sourceLayer:e,isTopLayer:n}),p=e.children.map(E=>this._getPath({sourceLayer:E,isTopLayer:!1}));return{type:"COMPOUND",op:a,visible:u,transform:c,paths:p}}_getPath({sourceLayer:e,isTopLayer:n}){return this._isStroke?this._getPathPath({sourceLayer:e,isTopLayer:n}):e.type==="TEXT"?this._getPathPath({sourceLayer:e,isTopLayer:n}):e.type==="FRAME"?this._getPathRectangle({sourceLayer:e,isTopLayer:n}):this._isRectangle(e)?this._getPathRectangle({sourceLayer:e,isTopLayer:n}):e.shapeType==="BOOLEAN_OPERATION"?this._getPathBool({sourceLayer:e,isTopLayer:n}):this._getPathPath({sourceLayer:e,isTopLayer:n})}get fillRule(){var e,n;return(n=(e=this._firstGeometry(this.sourceLayer))==null?void 0:e.fillRule)!=null?n:kt.WINDING_RULE}convert(){return this._getPath({sourceLayer:this.sourceLayer,isTopLayer:!0})}}var t_=Object.defineProperty,r_=Object.getOwnPropertyDescriptor,n_=(t,e,n,a)=>{for(var u=a>1?void 0:a?r_(e,n):e,c=t.length-1,p;c>=0;c--)(p=t[c])&&(u=(a?p(e,n,u):p(u))||u);return a&&u&&t_(e,n,u),u};const Sn=class{static convertStrokes(t,e){return t.reduce((n,a)=>{const u=new Sn({fill:a,sourceLayer:e}).convert();return u?mt(n,u):n},[])}constructor(t){this._sourceLayer=t.sourceLayer,this._fill=t.fill,this._path=new Iu({sourceLayer:t.sourceLayer,isStroke:!0})}get position(){const t=this._sourceLayer.strokeAlign;return Sn.STROKE_ALIGNS.includes(t)?t:(Ae==null||Ae.warn("Unknown Stroke Align",{strokeAlign:t}),null)}get lineCap(){const t=this._sourceLayer.strokeCap,e=Xt(t,Sn.STROKE_CAP_MAP,void 0);return e||(Ae==null||Ae.warn("Unknown Stroke Cap",{strokeCap:t}),null)}get lineJoin(){const t=this._sourceLayer.strokeJoin;return Sn.STROKE_JOINS.includes(t)?t:(Ae==null||Ae.warn("Unknown Stroke join",{strokeJoin:t}),null)}get fill(){return new jr({fill:this._fill,parentLayer:this._sourceLayer}).convert()}get style(){return this.dashing.length===0?"SOLID":"DASHED"}get dashing(){var t;return(t=this._sourceLayer.strokeDashes)!=null?t:[]}get visible(){return this._fill.visible}get thickness(){return this._sourceLayer.strokeWeight}get miterLimit(){return this._sourceLayer.strokeMiterAngle}get path(){return this._path.convert()}get fillRule(){return this._path.fillRule}convert(){const t=this.fill,e=this.position,n=this.lineJoin,a=this.lineCap;if(t===null||e===null||n===null||a===null)return null;const u=this.style,c=this.dashing,p=this.visible,E=this.thickness,k=this.miterLimit,$=this.path,B=this.fillRule;return{style:u,dashing:c,visible:p,fill:t,thickness:E,position:e,lineJoin:n,lineCap:a,miterLimit:k,fillRule:B,path:$}}};let Or=Sn;Or.STROKE_ALIGNS=["CENTER","INSIDE","OUTSIDE"],Or.STROKE_JOINS=["MITER","BEVEL","ROUND"],Or.STROKE_CAP_MAP={NONE:"BUTT",ROUND:"ROUND",SQUARE:"SQUARE"},n_([Mt()],Or.prototype,"fill",1);class En extends xr{constructor(e){super(e),this._layers=Pa(this._sourceLayer.layers,this)}static createBackgroundMask(e){if(!e.size)return null;const n=bn(e.id),a=Eu(e.size),u=e.cornerRadius,c=jr.convertFills(e.fills,e),p=Or.convertStrokes(e.strokes,e);return{id:`${n}-BackgroundMask`,type:"SHAPE",visible:c.length>0||p.length>0,shape:{path:{type:"RECTANGLE",rectangle:a,cornerRadius:u},fills:c,strokes:p}}}static createBackground({frame:e,layers:n,isArtboard:a=!1}){const u=bn(e.id),c=En.createBackgroundMask(e);if(!c)return null;const p=a?{isArtboard:a}:void 0,E=!0;return{id:u,type:"MASK_GROUP",maskBasis:"BODY",mask:c,layers:ai(n),meta:p,visible:E}}get sourceLayer(){return this._sourceLayer}get _maskBasis(){return"BODY"}get type(){return"MASK_GROUP"}convert(){const e=En.createBackgroundMask(this.sourceLayer);return e?{id:this.id,type:this.type,maskBasis:this._maskBasis,mask:e,transform:this.transform,layers:ai(this._layers)}:null}}class i_ extends xr{constructor(e){super(e),this._path=new Iu(e)}get sourceLayer(){return this._sourceLayer}get _fills(){return jr.convertFills(this.sourceLayer.fills,this.sourceLayer)}get _strokes(){return Or.convertStrokes(this.sourceLayer.strokes,this.sourceLayer)}get _shape(){return{path:this._path.convert(),fillRule:this._path.fillRule,fills:this._fills,strokes:this._strokes}}_convertTypeSpecific(){return{type:"SHAPE",shape:this._shape}}convert(){const e=this.convertBase();if(!e)return null;const n=this._convertTypeSpecific();return n?Te(Te({},e),n):null}}var aa={},li={},s_=Object.prototype,a_=s_.hasOwnProperty;function o_(t,e){return t!=null&&a_.call(t,e)}var u_=o_,l_=Array.isArray,cr=l_,c_=typeof ce=="object"&&ce&&ce.Object===Object&&ce,Au=c_,f_=Au,h_=typeof self=="object"&&self&&self.Object===Object&&self,d_=f_||h_||Function("return this")(),Qt=d_,__=Qt,g_=__.Symbol,Cn=g_,ku=Cn,Lu=Object.prototype,p_=Lu.hasOwnProperty,v_=Lu.toString,xn=ku?ku.toStringTag:void 0;function m_(t){var e=p_.call(t,xn),n=t[xn];try{t[xn]=void 0;var a=!0}catch{}var u=v_.call(t);return a&&(e?t[xn]=n:delete t[xn]),u}var y_=m_,b_=Object.prototype,w_=b_.toString;function S_(t){return w_.call(t)}var E_=S_,Ru=Cn,C_=y_,x_=E_,O_="[object Null]",T_="[object Undefined]",Mu=Ru?Ru.toStringTag:void 0;function P_(t){return t==null?t===void 0?T_:O_:Mu&&Mu in Object(t)?C_(t):x_(t)}var On=P_,I_=On,A_=wr,k_="[object Symbol]";function L_(t){return typeof t=="symbol"||A_(t)&&I_(t)==k_}var oa=L_,R_=cr,M_=oa,$_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,N_=/^\w*$/;function D_(t,e){if(R_(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||M_(t)?!0:N_.test(t)||!$_.test(t)||e!=null&&t in Object(e)}var F_=D_;function z_(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ua=z_,j_=On,B_=ua,q_="[object AsyncFunction]",U_="[object Function]",H_="[object GeneratorFunction]",V_="[object Proxy]";function G_(t){if(!B_(t))return!1;var e=j_(t);return e==U_||e==H_||e==q_||e==V_}var $u=G_,W_=Qt,K_=W_["__core-js_shared__"],Y_=K_,la=Y_,Nu=function(){var t=/[^.]+$/.exec(la&&la.keys&&la.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function J_(t){return!!Nu&&Nu in t}var Z_=J_,X_=Function.prototype,Q_=X_.toString;function eg(t){if(t!=null){try{return Q_.call(t)}catch{}try{return t+""}catch{}}return""}var Du=eg,tg=$u,rg=Z_,ng=ua,ig=Du,sg=/[\\^$.*+?()[\]{}|]/g,ag=/^\[object .+?Constructor\]$/,og=Function.prototype,ug=Object.prototype,lg=og.toString,cg=ug.hasOwnProperty,fg=RegExp("^"+lg.call(cg).replace(sg,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function hg(t){if(!ng(t)||rg(t))return!1;var e=tg(t)?fg:ag;return e.test(ig(t))}var dg=hg;function _g(t,e){return t==null?void 0:t[e]}var gg=_g,pg=dg,vg=gg;function mg(t,e){var n=vg(t,e);return pg(n)?n:void 0}var Tr=mg,yg=Tr,bg=yg(Object,"create"),ci=bg,Fu=ci;function wg(){this.__data__=Fu?Fu(null):{},this.size=0}var Sg=wg;function Eg(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Cg=Eg,xg=ci,Og="__lodash_hash_undefined__",Tg=Object.prototype,Pg=Tg.hasOwnProperty;function Ig(t){var e=this.__data__;if(xg){var n=e[t];return n===Og?void 0:n}return Pg.call(e,t)?e[t]:void 0}var Ag=Ig,kg=ci,Lg=Object.prototype,Rg=Lg.hasOwnProperty;function Mg(t){var e=this.__data__;return kg?e[t]!==void 0:Rg.call(e,t)}var $g=Mg,Ng=ci,Dg="__lodash_hash_undefined__";function Fg(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ng&&e===void 0?Dg:e,this}var zg=Fg,jg=Sg,Bg=Cg,qg=Ag,Ug=$g,Hg=zg;function Br(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var a=t[e];this.set(a[0],a[1])}}Br.prototype.clear=jg,Br.prototype.delete=Bg,Br.prototype.get=qg,Br.prototype.has=Ug,Br.prototype.set=Hg;var Vg=Br;function Gg(){this.__data__=[],this.size=0}var Wg=Gg;function Kg(t,e){return t===e||t!==t&&e!==e}var ca=Kg,Yg=ca;function Jg(t,e){for(var n=t.length;n--;)if(Yg(t[n][0],e))return n;return-1}var fi=Jg,Zg=fi,Xg=Array.prototype,Qg=Xg.splice;function ep(t){var e=this.__data__,n=Zg(e,t);if(n<0)return!1;var a=e.length-1;return n==a?e.pop():Qg.call(e,n,1),--this.size,!0}var tp=ep,rp=fi;function np(t){var e=this.__data__,n=rp(e,t);return n<0?void 0:e[n][1]}var ip=np,sp=fi;function ap(t){return sp(this.__data__,t)>-1}var op=ap,up=fi;function lp(t,e){var n=this.__data__,a=up(n,t);return a<0?(++this.size,n.push([t,e])):n[a][1]=e,this}var cp=lp,fp=Wg,hp=tp,dp=ip,_p=op,gp=cp;function qr(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var a=t[e];this.set(a[0],a[1])}}qr.prototype.clear=fp,qr.prototype.delete=hp,qr.prototype.get=dp,qr.prototype.has=_p,qr.prototype.set=gp;var hi=qr,pp=Tr,vp=Qt,mp=pp(vp,"Map"),fa=mp,zu=Vg,yp=hi,bp=fa;function wp(){this.size=0,this.__data__={hash:new zu,map:new(bp||yp),string:new zu}}var Sp=wp;function Ep(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Cp=Ep,xp=Cp;function Op(t,e){var n=t.__data__;return xp(e)?n[typeof e=="string"?"string":"hash"]:n.map}var di=Op,Tp=di;function Pp(t){var e=Tp(this,t).delete(t);return this.size-=e?1:0,e}var Ip=Pp,Ap=di;function kp(t){return Ap(this,t).get(t)}var Lp=kp,Rp=di;function Mp(t){return Rp(this,t).has(t)}var $p=Mp,Np=di;function Dp(t,e){var n=Np(this,t),a=n.size;return n.set(t,e),this.size+=n.size==a?0:1,this}var Fp=Dp,zp=Sp,jp=Ip,Bp=Lp,qp=$p,Up=Fp;function Ur(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var a=t[e];this.set(a[0],a[1])}}Ur.prototype.clear=zp,Ur.prototype.delete=jp,Ur.prototype.get=Bp,Ur.prototype.has=qp,Ur.prototype.set=Up;var ha=Ur,ju=ha,Hp="Expected a function";function da(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Hp);var n=function(){var a=arguments,u=e?e.apply(this,a):a[0],c=n.cache;if(c.has(u))return c.get(u);var p=t.apply(this,a);return n.cache=c.set(u,p)||c,p};return n.cache=new(da.Cache||ju),n}da.Cache=ju;var Vp=da,Gp=Vp,Wp=500;function Kp(t){var e=Gp(t,function(a){return n.size===Wp&&n.clear(),a}),n=e.cache;return e}var Yp=Kp,Jp=Yp,Zp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xp=/\\(\\)?/g,Qp=Jp(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Zp,function(n,a,u,c){e.push(u?c.replace(Xp,"$1"):a||n)}),e}),ev=Qp;function tv(t,e){for(var n=-1,a=t==null?0:t.length,u=Array(a);++n<a;)u[n]=e(t[n],n,t);return u}var Bu=tv,qu=Cn,rv=Bu,nv=cr,iv=oa,sv=1/0,Uu=qu?qu.prototype:void 0,Hu=Uu?Uu.toString:void 0;function Vu(t){if(typeof t=="string")return t;if(nv(t))return rv(t,Vu)+"";if(iv(t))return Hu?Hu.call(t):"";var e=t+"";return e=="0"&&1/t==-sv?"-0":e}var av=Vu,ov=av;function uv(t){return t==null?"":ov(t)}var lv=uv,cv=cr,fv=F_,hv=ev,dv=lv;function _v(t,e){return cv(t)?t:fv(t,e)?[t]:hv(dv(t))}var _i=_v,gv=On,pv=wr,vv="[object Arguments]";function mv(t){return pv(t)&&gv(t)==vv}var yv=mv,Gu=yv,bv=wr,Wu=Object.prototype,wv=Wu.hasOwnProperty,Sv=Wu.propertyIsEnumerable,Ev=Gu(function(){return arguments}())?Gu:function(t){return bv(t)&&wv.call(t,"callee")&&!Sv.call(t,"callee")},_a=Ev,Cv=9007199254740991,xv=/^(?:0|[1-9]\d*)$/;function Ov(t,e){var n=typeof t;return e=e==null?Cv:e,!!e&&(n=="number"||n!="symbol"&&xv.test(t))&&t>-1&&t%1==0&&t<e}var ga=Ov,Tv=9007199254740991;function Pv(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Tv}var pa=Pv,Iv=oa,Av=1/0;function kv(t){if(typeof t=="string"||Iv(t))return t;var e=t+"";return e=="0"&&1/t==-Av?"-0":e}var va=kv,Lv=_i,Rv=_a,Mv=cr,$v=ga,Nv=pa,Dv=va;function Fv(t,e,n){e=Lv(e,t);for(var a=-1,u=e.length,c=!1;++a<u;){var p=Dv(e[a]);if(!(c=t!=null&&n(t,p)))break;t=t[p]}return c||++a!=u?c:(u=t==null?0:t.length,!!u&&Nv(u)&&$v(p,u)&&(Mv(t)||Rv(t)))}var Ku=Fv,zv=u_,jv=Ku;function Bv(t,e){return t!=null&&jv(t,e,zv)}var qv=Bv,Uv=_i,Hv=va;function Vv(t,e){e=Uv(e,t);for(var n=0,a=e.length;t!=null&&n<a;)t=t[Hv(e[n++])];return n&&n==a?t:void 0}var Gv=Vv,Wv=Tr,Kv=function(){try{var t=Wv(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Yu=Kv,Ju=Yu;function Yv(t,e,n){e=="__proto__"&&Ju?Ju(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Jv=Yv,Zv=Jv,Xv=ca,Qv=Object.prototype,e0=Qv.hasOwnProperty;function t0(t,e,n){var a=t[e];(!(e0.call(t,e)&&Xv(a,n))||n===void 0&&!(e in t))&&Zv(t,e,n)}var r0=t0,n0=r0,i0=_i,s0=ga,Zu=ua,a0=va;function o0(t,e,n,a){if(!Zu(t))return t;e=i0(e,t);for(var u=-1,c=e.length,p=c-1,E=t;E!=null&&++u<c;){var k=a0(e[u]),$=n;if(k==="__proto__"||k==="constructor"||k==="prototype")return t;if(u!=p){var B=E[k];$=a?a(B,k,E):void 0,$===void 0&&($=Zu(B)?B:s0(e[u+1])?[]:{})}n0(E,k,$),E=E[k]}return t}var u0=o0,l0=Gv,c0=u0,f0=_i;function h0(t,e,n){for(var a=-1,u=e.length,c={};++a<u;){var p=e[a],E=l0(t,p);n(E,p)&&c0(c,f0(p,t),E)}return c}var d0=h0;function _0(t,e){return t!=null&&e in Object(t)}var g0=_0,p0=g0,v0=Ku;function m0(t,e){return t!=null&&v0(t,e,p0)}var y0=m0,b0=d0,w0=y0;function S0(t,e){return b0(t,e,function(n,a){return w0(t,a)})}var E0=S0;function C0(t,e){for(var n=-1,a=e.length,u=t.length;++n<a;)t[u+n]=e[n];return t}var Xu=C0,Qu=Cn,x0=_a,O0=cr,el=Qu?Qu.isConcatSpreadable:void 0;function T0(t){return O0(t)||x0(t)||!!(el&&t&&t[el])}var P0=T0,I0=Xu,A0=P0;function tl(t,e,n,a,u){var c=-1,p=t.length;for(n||(n=A0),u||(u=[]);++c<p;){var E=t[c];e>0&&n(E)?e>1?tl(E,e-1,n,a,u):I0(u,E):a||(u[u.length]=E)}return u}var k0=tl,L0=k0;function R0(t){var e=t==null?0:t.length;return e?L0(t,1):[]}var M0=R0;function $0(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var N0=$0,D0=N0,rl=Math.max;function F0(t,e,n){return e=rl(e===void 0?t.length-1:e,0),function(){for(var a=arguments,u=-1,c=rl(a.length-e,0),p=Array(c);++u<c;)p[u]=a[e+u];u=-1;for(var E=Array(e+1);++u<e;)E[u]=a[u];return E[e]=n(p),D0(t,this,E)}}var nl=F0;function z0(t){return function(){return t}}var j0=z0;function B0(t){return t}var il=B0,q0=j0,sl=Yu,U0=il,H0=sl?function(t,e){return sl(t,"toString",{configurable:!0,enumerable:!1,value:q0(e),writable:!0})}:U0,V0=H0,G0=800,W0=16,K0=Date.now;function Y0(t){var e=0,n=0;return function(){var a=K0(),u=W0-(a-n);if(n=a,u>0){if(++e>=G0)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var J0=Y0,Z0=V0,X0=J0,Q0=X0(Z0),al=Q0,em=M0,tm=nl,rm=al;function nm(t){return rm(tm(t,void 0,em),t+"")}var im=nm,sm=E0,am=im,om=am(function(t,e){return t==null?{}:sm(t,e)}),um=om,lm="__lodash_hash_undefined__";function cm(t){return this.__data__.set(t,lm),this}var fm=cm;function hm(t){return this.__data__.has(t)}var dm=hm,_m=ha,gm=fm,pm=dm;function gi(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new _m;++e<n;)this.add(t[e])}gi.prototype.add=gi.prototype.push=gm,gi.prototype.has=pm;var ol=gi;function vm(t,e,n,a){for(var u=t.length,c=n+(a?1:-1);a?c--:++c<u;)if(e(t[c],c,t))return c;return-1}var mm=vm;function ym(t){return t!==t}var bm=ym;function wm(t,e,n){for(var a=n-1,u=t.length;++a<u;)if(t[a]===e)return a;return-1}var Sm=wm,Em=mm,Cm=bm,xm=Sm;function Om(t,e,n){return e===e?xm(t,e,n):Em(t,Cm,n)}var Tm=Om,Pm=Tm;function Im(t,e){var n=t==null?0:t.length;return!!n&&Pm(t,e,0)>-1}var Am=Im;function km(t,e,n){for(var a=-1,u=t==null?0:t.length;++a<u;)if(n(e,t[a]))return!0;return!1}var Lm=km;function Rm(t){return function(e){return t(e)}}var ul=Rm;function Mm(t,e){return t.has(e)}var ll=Mm,$m=ol,Nm=Am,Dm=Lm,Fm=Bu,zm=ul,jm=ll,Bm=200;function qm(t,e,n,a){var u=-1,c=Nm,p=!0,E=t.length,k=[],$=e.length;if(!E)return k;n&&(e=Fm(e,zm(n))),a?(c=Dm,p=!1):e.length>=Bm&&(c=jm,p=!1,e=new $m(e));e:for(;++u<E;){var B=t[u],j=n==null?B:n(B);if(B=a||B!==0?B:0,p&&j===j){for(var Y=$;Y--;)if(e[Y]===j)continue e;k.push(B)}else c(e,j,a)||k.push(B)}return k}var Um=qm,Hm=il,Vm=nl,Gm=al;function Wm(t,e){return Gm(Vm(t,e,Hm),t+"")}var Km=Wm,Ym=$u,Jm=pa;function Zm(t){return t!=null&&Jm(t.length)&&!Ym(t)}var cl=Zm,Xm=cl,Qm=wr;function ey(t){return Qm(t)&&Xm(t)}var ty=ey,ry=Um,ny=Km,iy=ty,sy=ny(function(t,e){return iy(t)?ry(t,e):[]}),ay=sy,ma=ce&&ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(li,"__esModule",{value:!0}),li.normalizeDefaults=void 0;const fl=ma(qv),hl=ma(um),ya=ma(ay),oy=xt,Hr=Ke;function uy(t,e,n){return st(Te({},t),{[e]:n})}function ly(t,e){return t.reduce((n,a)=>{if(!(0,Hr.isObject)(a.style))return[...n,a];const u=(0,hl.default)(a.style,(0,ya.default)((0,Hr.keys)(a.style),e));if(!(0,Hr.keys)(u).length){const p=(0,Hr.keys)(a);if(!(0,ya.default)(p,"ranges","style").length)return n;const k=(0,hl.default)(a,(0,ya.default)(p,"style"));return[...n,k]}const c=st(Te({},a),{font:u});return[...n,c]},[])}function cy(t,e,n){const a=(0,Hr.isObject)(t.defaultStyle)?t.defaultStyle:{},u=!(0,fl.default)(a,e),c=(a==null?void 0:a[e])===n,p=u||c,E=(0,oy.asArray)(t.styles).every(k=>{var $;const B=!(0,fl.default)(k==null?void 0:k.style,e),j=(($=k==null?void 0:k.style)===null||$===void 0?void 0:$[e])===n;return B||j});if(p&&E){const k=uy(a,e,n),$=ly(t.styles,e);return st(Te({},t),{defaultStyle:k,styles:$})}return t}function fy(t){const e={letterSpacing:0};return Array.isArray(t.styles)?(0,Hr.keys)(e).reduce((n,a)=>cy(n,a,e[a]),t):t}li.normalizeDefaults=fy;var pi={},hy=hi;function dy(){this.__data__=new hy,this.size=0}var _y=dy;function gy(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var py=gy;function vy(t){return this.__data__.get(t)}var my=vy;function yy(t){return this.__data__.has(t)}var by=yy,wy=hi,Sy=fa,Ey=ha,Cy=200;function xy(t,e){var n=this.__data__;if(n instanceof wy){var a=n.__data__;if(!Sy||a.length<Cy-1)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ey(a)}return n.set(t,e),this.size=n.size,this}var Oy=xy,Ty=hi,Py=_y,Iy=py,Ay=my,ky=by,Ly=Oy;function Vr(t){var e=this.__data__=new Ty(t);this.size=e.size}Vr.prototype.clear=Py,Vr.prototype.delete=Iy,Vr.prototype.get=Ay,Vr.prototype.has=ky,Vr.prototype.set=Ly;var Ry=Vr;function My(t,e){for(var n=-1,a=t==null?0:t.length;++n<a;)if(e(t[n],n,t))return!0;return!1}var $y=My,Ny=ol,Dy=$y,Fy=ll,zy=1,jy=2;function By(t,e,n,a,u,c){var p=n&zy,E=t.length,k=e.length;if(E!=k&&!(p&&k>E))return!1;var $=c.get(t),B=c.get(e);if($&&B)return $==e&&B==t;var j=-1,Y=!0,R=n&jy?new Ny:void 0;for(c.set(t,e),c.set(e,t);++j<E;){var Z=t[j],Q=e[j];if(a)var ae=p?a(Q,Z,j,e,t,c):a(Z,Q,j,t,e,c);if(ae!==void 0){if(ae)continue;Y=!1;break}if(R){if(!Dy(e,function(le,$e){if(!Fy(R,$e)&&(Z===le||u(Z,le,n,a,c)))return R.push($e)})){Y=!1;break}}else if(!(Z===Q||u(Z,Q,n,a,c))){Y=!1;break}}return c.delete(t),c.delete(e),Y}var dl=By,qy=Qt,Uy=qy.Uint8Array,Hy=Uy;function Vy(t){var e=-1,n=Array(t.size);return t.forEach(function(a,u){n[++e]=[u,a]}),n}var Gy=Vy;function Wy(t){var e=-1,n=Array(t.size);return t.forEach(function(a){n[++e]=a}),n}var Ky=Wy,_l=Cn,gl=Hy,Yy=ca,Jy=dl,Zy=Gy,Xy=Ky,Qy=1,eb=2,tb="[object Boolean]",rb="[object Date]",nb="[object Error]",ib="[object Map]",sb="[object Number]",ab="[object RegExp]",ob="[object Set]",ub="[object String]",lb="[object Symbol]",cb="[object ArrayBuffer]",fb="[object DataView]",pl=_l?_l.prototype:void 0,ba=pl?pl.valueOf:void 0;function hb(t,e,n,a,u,c,p){switch(n){case fb:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case cb:return!(t.byteLength!=e.byteLength||!c(new gl(t),new gl(e)));case tb:case rb:case sb:return Yy(+t,+e);case nb:return t.name==e.name&&t.message==e.message;case ab:case ub:return t==e+"";case ib:var E=Zy;case ob:var k=a&Qy;if(E||(E=Xy),t.size!=e.size&&!k)return!1;var $=p.get(t);if($)return $==e;a|=eb,p.set(t,e);var B=Jy(E(t),E(e),a,u,c,p);return p.delete(t),B;case lb:if(ba)return ba.call(t)==ba.call(e)}return!1}var db=hb,_b=Xu,gb=cr;function pb(t,e,n){var a=e(t);return gb(t)?a:_b(a,n(t))}var vb=pb;function mb(t,e){for(var n=-1,a=t==null?0:t.length,u=0,c=[];++n<a;){var p=t[n];e(p,n,t)&&(c[u++]=p)}return c}var yb=mb;function bb(){return[]}var wb=bb,Sb=yb,Eb=wb,Cb=Object.prototype,xb=Cb.propertyIsEnumerable,vl=Object.getOwnPropertySymbols,Ob=vl?function(t){return t==null?[]:(t=Object(t),Sb(vl(t),function(e){return xb.call(t,e)}))}:Eb,Tb=Ob;function Pb(t,e){for(var n=-1,a=Array(t);++n<t;)a[n]=e(n);return a}var Ib=Pb,vi={exports:{}};function Ab(){return!1}var kb=Ab;(function(t,e){var n=Qt,a=kb,u=e&&!e.nodeType&&e,c=u&&!0&&t&&!t.nodeType&&t,p=c&&c.exports===u,E=p?n.Buffer:void 0,k=E?E.isBuffer:void 0,$=k||a;t.exports=$})(vi,vi.exports);var Lb=On,Rb=pa,Mb=wr,$b="[object Arguments]",Nb="[object Array]",Db="[object Boolean]",Fb="[object Date]",zb="[object Error]",jb="[object Function]",Bb="[object Map]",qb="[object Number]",Ub="[object Object]",Hb="[object RegExp]",Vb="[object Set]",Gb="[object String]",Wb="[object WeakMap]",Kb="[object ArrayBuffer]",Yb="[object DataView]",Jb="[object Float32Array]",Zb="[object Float64Array]",Xb="[object Int8Array]",Qb="[object Int16Array]",e1="[object Int32Array]",t1="[object Uint8Array]",r1="[object Uint8ClampedArray]",n1="[object Uint16Array]",i1="[object Uint32Array]",Ne={};Ne[Jb]=Ne[Zb]=Ne[Xb]=Ne[Qb]=Ne[e1]=Ne[t1]=Ne[r1]=Ne[n1]=Ne[i1]=!0,Ne[$b]=Ne[Nb]=Ne[Kb]=Ne[Db]=Ne[Yb]=Ne[Fb]=Ne[zb]=Ne[jb]=Ne[Bb]=Ne[qb]=Ne[Ub]=Ne[Hb]=Ne[Vb]=Ne[Gb]=Ne[Wb]=!1;function s1(t){return Mb(t)&&Rb(t.length)&&!!Ne[Lb(t)]}var a1=s1,wa={exports:{}};(function(t,e){var n=Au,a=e&&!e.nodeType&&e,u=a&&!0&&t&&!t.nodeType&&t,c=u&&u.exports===a,p=c&&n.process,E=function(){try{var k=u&&u.require&&u.require("util").types;return k||p&&p.binding&&p.binding("util")}catch{}}();t.exports=E})(wa,wa.exports);var o1=a1,u1=ul,ml=wa.exports,yl=ml&&ml.isTypedArray,l1=yl?u1(yl):o1,bl=l1,c1=Ib,f1=_a,h1=cr,d1=vi.exports,_1=ga,g1=bl,p1=Object.prototype,v1=p1.hasOwnProperty;function m1(t,e){var n=h1(t),a=!n&&f1(t),u=!n&&!a&&d1(t),c=!n&&!a&&!u&&g1(t),p=n||a||u||c,E=p?c1(t.length,String):[],k=E.length;for(var $ in t)(e||v1.call(t,$))&&!(p&&($=="length"||u&&($=="offset"||$=="parent")||c&&($=="buffer"||$=="byteLength"||$=="byteOffset")||_1($,k)))&&E.push($);return E}var y1=m1,b1=Object.prototype;function w1(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||b1;return t===n}var S1=w1;function E1(t,e){return function(n){return t(e(n))}}var C1=E1,x1=C1,O1=x1(Object.keys,Object),T1=O1,P1=S1,I1=T1,A1=Object.prototype,k1=A1.hasOwnProperty;function L1(t){if(!P1(t))return I1(t);var e=[];for(var n in Object(t))k1.call(t,n)&&n!="constructor"&&e.push(n);return e}var R1=L1,M1=y1,$1=R1,N1=cl;function D1(t){return N1(t)?M1(t):$1(t)}var F1=D1,z1=vb,j1=Tb,B1=F1;function q1(t){return z1(t,B1,j1)}var U1=q1,wl=U1,H1=1,V1=Object.prototype,G1=V1.hasOwnProperty;function W1(t,e,n,a,u,c){var p=n&H1,E=wl(t),k=E.length,$=wl(e),B=$.length;if(k!=B&&!p)return!1;for(var j=k;j--;){var Y=E[j];if(!(p?Y in e:G1.call(e,Y)))return!1}var R=c.get(t),Z=c.get(e);if(R&&Z)return R==e&&Z==t;var Q=!0;c.set(t,e),c.set(e,t);for(var ae=p;++j<k;){Y=E[j];var le=t[Y],$e=e[Y];if(a)var _e=p?a($e,le,Y,e,t,c):a(le,$e,Y,t,e,c);if(!(_e===void 0?le===$e||u(le,$e,n,a,c):_e)){Q=!1;break}ae||(ae=Y=="constructor")}if(Q&&!ae){var Ce=t.constructor,bt=e.constructor;Ce!=bt&&"constructor"in t&&"constructor"in e&&!(typeof Ce=="function"&&Ce instanceof Ce&&typeof bt=="function"&&bt instanceof bt)&&(Q=!1)}return c.delete(t),c.delete(e),Q}var K1=W1,Y1=Tr,J1=Qt,Z1=Y1(J1,"DataView"),X1=Z1,Q1=Tr,ew=Qt,tw=Q1(ew,"Promise"),rw=tw,nw=Tr,iw=Qt,sw=nw(iw,"Set"),aw=sw,ow=Tr,uw=Qt,lw=ow(uw,"WeakMap"),cw=lw,Sa=X1,Ea=fa,Ca=rw,xa=aw,Oa=cw,Sl=On,Gr=Du,El="[object Map]",fw="[object Object]",Cl="[object Promise]",xl="[object Set]",Ol="[object WeakMap]",Tl="[object DataView]",hw=Gr(Sa),dw=Gr(Ea),_w=Gr(Ca),gw=Gr(xa),pw=Gr(Oa),Pr=Sl;(Sa&&Pr(new Sa(new ArrayBuffer(1)))!=Tl||Ea&&Pr(new Ea)!=El||Ca&&Pr(Ca.resolve())!=Cl||xa&&Pr(new xa)!=xl||Oa&&Pr(new Oa)!=Ol)&&(Pr=function(t){var e=Sl(t),n=e==fw?t.constructor:void 0,a=n?Gr(n):"";if(a)switch(a){case hw:return Tl;case dw:return El;case _w:return Cl;case gw:return xl;case pw:return Ol}return e});var vw=Pr,Ta=Ry,mw=dl,yw=db,bw=K1,Pl=vw,Il=cr,Al=vi.exports,ww=bl,Sw=1,kl="[object Arguments]",Ll="[object Array]",mi="[object Object]",Ew=Object.prototype,Rl=Ew.hasOwnProperty;function Cw(t,e,n,a,u,c){var p=Il(t),E=Il(e),k=p?Ll:Pl(t),$=E?Ll:Pl(e);k=k==kl?mi:k,$=$==kl?mi:$;var B=k==mi,j=$==mi,Y=k==$;if(Y&&Al(t)){if(!Al(e))return!1;p=!0,B=!1}if(Y&&!B)return c||(c=new Ta),p||ww(t)?mw(t,e,n,a,u,c):yw(t,e,k,n,a,u,c);if(!(n&Sw)){var R=B&&Rl.call(t,"__wrapped__"),Z=j&&Rl.call(e,"__wrapped__");if(R||Z){var Q=R?t.value():t,ae=Z?e.value():e;return c||(c=new Ta),u(Q,ae,n,a,c)}}return Y?(c||(c=new Ta),bw(t,e,n,a,u,c)):!1}var xw=Cw,Ow=xw,Ml=wr;function $l(t,e,n,a,u){return t===e?!0:t==null||e==null||!Ml(t)&&!Ml(e)?t!==t&&e!==e:Ow(t,e,n,a,$l,u)}var Tw=$l,Pw=Tw;function Iw(t,e){return Pw(t,e)}var Aw=Iw,kw=ce&&ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pi,"__esModule",{value:!0}),pi.normalizeDupRanges=void 0;const Lw=kw(Aw),Rw=xt;function Mw(t){return t.slice().sort((n,a)=>n.from-a.from).reduce((n,a,u)=>{if(!u)return n.push(Te({},a)),n;const c=n[n.length-1];return c.to>=a.from?c.to=Math.max(a.to,c.to):n.push(Te({},a)),n},[])}function $w(t){const e=(0,Rw.asArray)(t.styles).reduce((a,u)=>{const c=[...a.keys()].find(p=>(0,Lw.default)(p,u.style));return c?a.get(c).push(...u.ranges):a.set(u.style,u.ranges),a},new Map),n=[...e.keys()].reduce((a,u)=>[...a,{style:u,ranges:Mw(e.get(u))}],[]);return Te(Te({},t),n.length?{styles:n}:null)}pi.normalizeDupRanges=$w;var yi={};Object.defineProperty(yi,"__esModule",{value:!0}),yi.normalizeLinebreak=void 0;function Nw(t){return t.replace(/[\u0003\u000b]/g,"\u2028").replace(/[\r\n]/g,"\u2029")}function Dw(t,e,n){return{from:t<=n?t:t-1,to:e>n?e-1:e}}function Fw(t,e){return t.map(n=>Array.isArray(n.ranges)?st(Te({},n),{ranges:n.ranges.map(a=>Dw(a.from,a.to,e))}):n)}function Nl(t){if(typeof t.value!="string")return t;const e=t.value.indexOf(`\r
`);return e===-1?t:Nl(st(Te({},t),{value:t.value.replace(/\r\n/,`
`),styles:Array.isArray(t.styles)?Fw(t.styles,e):t.styles}))}function zw(t){const e=Nl(t);return st(Te({},e),{value:Nw(e.value)})}yi.normalizeLinebreak=zw,Object.defineProperty(aa,"__esModule",{value:!0});var Dl=aa.normalizeText=void 0;const jw=li,Bw=pi,qw=yi;function Uw(t){return[qw.normalizeLinebreak,jw.normalizeDefaults,Bw.normalizeDupRanges].reduce((n,a)=>a(n),t)}Dl=aa.normalizeText=Uw;function Hw(t){return t===0?.001:t}function Vw(t){if(!t)return"Regular";const e={"100":"Thin","200":"UltraLight","300":"Light","400":"Regular","500":"Medium","600":"Semibold","700":"Bold","800":"ExtraBold","900":"Black"},n=fu(e).reduce((a,u,c,p)=>{if(!a){if(c===p.length-1)return null;const E=p[c+1];if(Number(u)<=t&&Number(E)>=t)return[u,E]}return a},null);return n===null?"Regular":t-Number(n[0])>Number(n[1])-t?e[n[1]]:e[n[0]]}function Gw({fontFamily:t,weight:e,italic:n}){if(typeof t!="string")return null;const a=t.replace(/\s/g,""),u=Vw(e);return[a,u==="Regular"?"":u,n?"Italic":""].filter(E=>E).join("-")}var Ww=Object.defineProperty,Kw=Object.getOwnPropertyDescriptor,Fl=(t,e,n,a)=>{for(var u=a>1?void 0:a?Kw(e,n):e,c=t.length-1,p;c>=0;c--)(p=t[c])&&(u=(a?p(e,n,u):p(u))||u);return a&&u&&Ww(e,n,u),u};const Tn=class extends xr{constructor(t){super(t)}get sourceLayer(){return this._sourceLayer}_getFills(t){return t.reduce((e,n)=>{const a=new jr({fill:n,parentLayer:this.sourceLayer}).convert();return a?mt(e,a):e},[])}get _fills(){return this._getFills(this.sourceLayer.fills)}get _strokes(){return this.sourceLayer.strokes.reduce((t,e)=>{const n=new Or({fill:e,sourceLayer:this.sourceLayer}).convert();return n?mt(t,n):t},[])}_parsePostScriptName(t){const e=t.fontPostScriptName;if(e)return e;const n=t.fontFamily,a=t.fontWeight,u=t.italic;return Gw({fontFamily:n,weight:a,italic:u})}_getFont(t){const e=this._parsePostScriptName(t);return e?{postScriptName:e,family:t.fontFamily}:(Ae==null||Ae.warn("Unknown font postScriptName",{textStyle:t}),null)}_getLineHeight(t){const e=t.lineHeightPx,n=t.lineHeightPercent;if(!(e===void 0&&n===void 0))return n===100?0:Hw(e!=null?e:0)}_getStyle(t){const e=this._getFont(t);if(!e)return null;const n=t.fontSize,a=this._getLineHeight(t),u=t.kerning,c=t.letterSpacing,p=Xt(t.textCase,Tn.TEXT_CASE_MAP,void 0),E=t.textDecoration,k=E===void 0?void 0:E==="UNDERLINE"?"SINGLE":"NONE",$=E===void 0?void 0:E==="STRIKETHROUGH",B=t.textFills&&this._getFills(t.textFills);return{font:e,fontSize:n,lineHeight:a,kerning:u,letterSpacing:c,underline:k,linethrough:$,letterCase:p,fills:B}}get _defaultStyle(){var Y,R;const t=this.sourceLayer.defaultStyle;if(!t)return null;const e=this._getFont(t);if(!e)return null;const n=(Y=t.fontSize)!=null?Y:kt.TEXT.FONT_SIZE,a=this._getLineHeight(t),u=t.kerning===!1?!1:void 0,c=t.letterSpacing,p=Xt(t.textCase,Tn.TEXT_CASE_MAP,void 0),E=t.textDecoration,k=E==="UNDERLINE"?"SINGLE":void 0,$=E==="STRIKETHROUGH"?!0:void 0,B=(R=t.textFills)!=null&&R.length?this._getFills(t.textFills):this._fills,j=this._strokes;return{font:e,fontSize:n,lineHeight:a,kerning:u,letterSpacing:c,underline:k,linethrough:$,letterCase:p,fills:B,strokes:j}}get _styles(){const t=this.sourceLayer.characterStyleOverrides.reduce((n,a,u)=>{const c=n[a];return c?c.push(u):n[a]=[u],n},{}),e=this.sourceLayer.styleOverrideTable;return Object.keys(t).reduce((n,a)=>{const u=e[a];if(!u)return n;const c=this._getStyle(u);if(!c)return n;const p=t[a];if(!p)return n;const E=p.map(k=>({from:k,to:k+1}));return mt(n,{style:c,ranges:E})},[])}get horizontalAlign(){var n;const t=(n=this.sourceLayer.defaultStyle)==null?void 0:n.textAlignHorizontal,e=Xt(t,Tn.HORIZONTAL_ALIGN_MAP,void 0);return e||(Ae==null||Ae.warn("Unknown Stroke Cap",{horizontalAlign:t}),"LEFT")}get _frame(){var u,c;const t=Xt((u=this.sourceLayer.defaultStyle)==null?void 0:u.textAutoResize,Tn.FRAME_MODE_MAP,"FIXED"),{x:e,y:n}=(c=this.sourceLayer.size)!=null?c:{};return{mode:t,size:e!==void 0&&n!==void 0?{width:e,height:n}:void 0}}get _text(){var k;const t=this.sourceLayer.characters,e=this._defaultStyle;if(!e)return null;const n=this._styles,a=this.horizontalAlign,u=(k=this.sourceLayer.defaultStyle)==null?void 0:k.textAlignVertical,c=this._frame;return Dl({value:t,defaultStyle:e,styles:n,horizontalAlign:a,verticalAlign:u,frame:c,baselinePolicy:"OFFSET_ASCENDER"})}_convertTypeSpecific(){const t=this._text;return t?{type:"TEXT",text:t}:null}convert(){const t=this.convertBase();if(!t)return null;const e=this._convertTypeSpecific();return e?Te(Te({},t),e):null}};let Wr=Tn;Wr.HORIZONTAL_ALIGN_MAP={LEFT:"LEFT",CENTER:"CENTER",RIGHT:"RIGHT",JUSTIFIED:"JUSTIFY"},Wr.TEXT_CASE_MAP={ORIGINAL:"NONE",UPPER:"UPPERCASE",LOWER:"LOWERCASE",SMALL_CAPS:"SMALL_CAPS",SMALL_CAPS_FORCED:"SMALL_CAPS",TITLE:"TITLE_CASE"},Wr.FRAME_MODE_MAP={NONE:"FIXED",HEIGHT:"AUTO_HEIGHT",WIDTH_AND_HEIGHT:"AUTO_WIDTH"},Fl([Mt()],Wr.prototype,"_defaultStyle",1),Fl([Mt()],Wr.prototype,"_styles",1);const Yw={FRAME:Jw,SHAPE:Zw,TEXT:Xw,SLICE:Qw};function Jw({layer:t,parent:e}){const n=t;return n.hasBackgroundMask?new En({parent:e,sourceLayer:n}):new Kd({parent:e,sourceLayer:n})}function Zw({layer:t,parent:e}){const n=t;return new i_({parent:e,sourceLayer:n})}function Xw({layer:t,parent:e}){const n=t;return new Wr({parent:e,sourceLayer:n})}function Qw(){return null}function eS(t){const e=t.layer.type,n=Xt(e,Yw,void 0);return n?n(t):(Ae==null||Ae.warn("createOctopusLayer: Unknown layer type",{type:e}),null)}function Pa(t,e){return t.reduce((n,a)=>{const u=eS({parent:e,layer:a});return u?mt(n,u):n},[])}class zl{constructor(e){this._sourceArtboard=e.sourceArtboard,this._version=e.version,this._layers=Pa(this.sourceArtboard.layers,this)}get parentArtboard(){return this}get sourceArtboard(){return this._sourceArtboard}get dimensions(){const e=this.sourceArtboard.bounds;if(!e)return;const{width:n,height:a}=e;return{width:n,height:a}}get id(){return bn(this.sourceArtboard.id)}get version(){return this._version}get _content(){const n=En.createBackground({frame:this.sourceArtboard.sourceFrame,layers:this._layers,isArtboard:!0});if(!!n)return n}async convert(){return{id:this.id,type:"ARTBOARD",version:this.version,dimensions:this.dimensions,content:this._content}}}class tS{constructor(e){this._sourceArtboard=e.artboard,this._version=e.version}convert(){return new zl({sourceArtboard:this._sourceArtboard,version:this._version}).convert()}}const rS="@avocode/octopus-fig",nS="3.0.0-rc.1";function iS(){return{name:rS,version:nS}}const bi=class{constructor(t){this._setGlobals(t),this._pkg=iS(),this._services=this._initServices(),this._id=t.designId||Us(),this._design=t.design}get id(){return this._id}get octopusManifest(){return this._octopusManifest}get sourceDesign(){return this._design}get bmarkAsync(){return this._services.benchmark.benchmarkAsync}_initServices(){return{benchmark:bu().createBenchmarkService()}}_setGlobals(t){var e,n,a,u;"createEnvironment"in t.platformFactories&&((a=(n=(e=t.platformFactories).createEnvironment)==null?void 0:n.call(e))==null||a()),kd(t.platformFactories),Rd({logger:{enabled:(u=t.loggerEnabled)!=null?u:!0}}),js(t.logger)&&Ld(t.logger)}get pkg(){return this._pkg}async _convertArtboardSafe(t){try{const e=await this.pkg.version;return{value:await new tS({artboard:t,version:e}).convert(),error:null}}catch(e){return{value:null,error:e}}}async convertArtboard(t){const{time:e,result:n}=await this._services.benchmark.benchmarkAsync(async()=>this._convertArtboardSafe(t)),{value:a,error:u}=n;return{id:t.id,value:a,error:u,time:e}}async _exportManifest(t){var a;const e=this._octopusManifest;if(!e)return;const{result:n}=await this._services.benchmark.benchmarkAsync(()=>e.convert());try{await((a=t==null?void 0:t.exportManifest)==null?void 0:a.call(t,n))}catch(u){Ae==null||Ae.error(u)}return n}async _exportArtboardSafe(t,e){var n;try{const a=await((n=t==null?void 0:t.exportArtboard)==null?void 0:n.call(t,e));return a?{artboardPath:a,error:null}:{artboardPath:null,error:new Error("Export Artboard failed - no artboardPath")}}catch(a){return{artboardPath:null,error:a}}}async _exportArtboard(t,e){var c,p;const n=await this.convertArtboard(e),{artboardPath:a,error:u}=await this._exportArtboardSafe(t,n);return(p=this._octopusManifest)==null||p.setExportedArtboard(e.id,{path:a,error:(c=n.error)!=null?c:u,time:n.time}),n}_initArtboardQueue(t){return new hu({name:bi.ARTBOARDS_QUEUE_NAME,parallels:bi.ARTBOARDS_QUEUE_PARALLELS,factory:async e=>Promise.all(e.map(async n=>({value:await this._exportArtboard(t,n),error:null})))})}async convertDesign(t){var k;const e=ou(),n={manifest:void 0,artboards:[],images:[],previews:[]},a=js(t==null?void 0:t.exporter)?t==null?void 0:t.exporter:null,u=!((k=t==null?void 0:t.skipReturn)!=null&&k),c=[],p=this._initArtboardQueue(a),E=this._design;return E===null?(Ae==null||Ae.error("Creating Design Failed"),null):(E.on("ready:design",async $=>{var Z,Q;const B=$.designId,j=$.design,Y=new Ud({designId:B,raw:j});this._octopusManifest=new Vs({sourceDesign:Y,octopusConverter:this}),(Z=a==null?void 0:a.exportRawDesign)==null||Z.call(a,Y.raw),this._exportManifest(a);const R=setInterval(async()=>this._exportManifest(a),(t==null?void 0:t.partialUpdateInterval)||bi.PARTIAL_UPDATE_INTERVAL);await $.content,await Promise.all(c),clearInterval(R),n.manifest=await this._exportManifest(a),(Q=a==null?void 0:a.finalizeExport)==null||Q.call(a),e.resolve()}),E.on("ready:artboard",async $=>{var Q,ae;const B=$.node.document;(Q=a==null?void 0:a.exportRawComponent)==null||Q.call(a,B,$.nodeId);const j=Object.keys($.fills);(ae=this._octopusManifest)==null||ae.setExportedArtboardImageMap($.nodeId,j);const Y=new Cr({rawArtboard:B}),R=p.exec(Y);c.push(R);const Z=await R;u&&n.artboards.push(Z)}),E.on("ready:fill",async $=>{var Y,R;const B=$.ref,j=await((Y=a==null?void 0:a.exportImage)==null?void 0:Y.call(a,B,$.buffer));(R=this._octopusManifest)==null||R.setExportedImagePath(B,j),u&&n.images.push({name:B,data:$.buffer})}),E.on("ready:preview",async $=>{var Y,R;const B=$.nodeId,j=await((Y=a==null?void 0:a.exportPreview)==null?void 0:Y.call(a,$.nodeId,$.buffer));(R=this._octopusManifest)==null||R.setExportedImagePath(B,j),u&&n.previews.push({id:B,data:$.buffer})}),await e.promise,u?n:null)}};let wi=bi;wi.ARTBOARDS_QUEUE_PARALLELS=5,wi.ARTBOARDS_QUEUE_NAME="Artboards queue",wi.PARTIAL_UPDATE_INTERVAL=3e3;function sS(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var aS=oS;function oS(t,e,n){var a=n&&n.stringify||sS,u=1;if(typeof t=="object"&&t!==null){var c=e.length+u;if(c===1)return t;var p=new Array(c);p[0]=a(t);for(var E=1;E<c;E++)p[E]=a(e[E]);return p.join(" ")}if(typeof t!="string")return t;var k=e.length;if(k===0)return t;for(var $="",B=1-u,j=-1,Y=t&&t.length||0,R=0;R<Y;){if(t.charCodeAt(R)===37&&R+1<Y){switch(j=j>-1?j:0,t.charCodeAt(R+1)){case 100:case 102:if(B>=k||e[B]==null)break;j<R&&($+=t.slice(j,R)),$+=Number(e[B]),j=R+2,R++;break;case 105:if(B>=k||e[B]==null)break;j<R&&($+=t.slice(j,R)),$+=Math.floor(Number(e[B])),j=R+2,R++;break;case 79:case 111:case 106:if(B>=k||e[B]===void 0)break;j<R&&($+=t.slice(j,R));var Z=typeof e[B];if(Z==="string"){$+="'"+e[B]+"'",j=R+2,R++;break}if(Z==="function"){$+=e[B].name||"<anonymous>",j=R+2,R++;break}$+=a(e[B]),j=R+2,R++;break;case 115:if(B>=k)break;j<R&&($+=t.slice(j,R)),$+=String(e[B]),j=R+2,R++;break;case 37:j<R&&($+=t.slice(j,R)),$+="%",j=R+2,R++,B--;break}++B}++R}return j===-1?t:(j<Y&&($+=t.slice(j)),$)}const jl=aS;var uS=Gt;const Pn=mS().console||{},lS={mapHttpRequest:Ei,mapHttpResponse:Ei,wrapRequestSerializer:Aa,wrapResponseSerializer:Aa,wrapErrorSerializer:Aa,req:Ei,res:Ei,err:_S};function cS(t,e){return Array.isArray(t)?t.filter(function(a){return a!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Gt(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||Pn;t.browser.write&&(t.browser.asObject=!0);const a=t.serializers||{},u=cS(t.browser.serialize,a);let c=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(c=!1);const p=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const E=t.level||"info",k=Object.create(n);k.log||(k.log=In),Object.defineProperty(k,"levelVal",{get:B}),Object.defineProperty(k,"level",{get:j,set:Y});const $={transmit:e,serialize:u,asObject:t.browser.asObject,levels:p,timestamp:gS(t)};k.levels=Gt.levels,k.level=E,k.setMaxListeners=k.getMaxListeners=k.emit=k.addListener=k.on=k.prependListener=k.once=k.prependOnceListener=k.removeListener=k.removeAllListeners=k.listeners=k.listenerCount=k.eventNames=k.write=k.flush=In,k.serializers=a,k._serialize=u,k._stdErrSerialize=c,k.child=R,e&&(k._logEvent=Ia());function B(){return this.level==="silent"?1/0:this.levels.values[this.level]}function j(){return this._level}function Y(Z){if(Z!=="silent"&&!this.levels.values[Z])throw Error("unknown level "+Z);this._level=Z,Kr($,k,"error","log"),Kr($,k,"fatal","error"),Kr($,k,"warn","error"),Kr($,k,"info","log"),Kr($,k,"debug","log"),Kr($,k,"trace","log")}function R(Z,Q){if(!Z)throw new Error("missing bindings for child Pino");Q=Q||{},u&&Z.serializers&&(Q.serializers=Z.serializers);const ae=Q.serializers;if(u&&ae){var le=Object.assign({},a,ae),$e=t.browser.serialize===!0?Object.keys(le):u;delete Z.serializers,Si([Z],$e,le,this._stdErrSerialize)}function _e(Ce){this._childLevel=(Ce._childLevel|0)+1,this.error=Yr(Ce,Z,"error"),this.fatal=Yr(Ce,Z,"fatal"),this.warn=Yr(Ce,Z,"warn"),this.info=Yr(Ce,Z,"info"),this.debug=Yr(Ce,Z,"debug"),this.trace=Yr(Ce,Z,"trace"),le&&(this.serializers=le,this._serialize=$e),e&&(this._logEvent=Ia([].concat(Ce._logEvent.bindings,Z)))}return _e.prototype=this,new _e(this)}return k}Gt.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},Gt.stdSerializers=lS,Gt.stdTimeFunctions=Object.assign({},{nullTime:Bl,epochTime:ql,unixTime:pS,isoTime:vS});function Kr(t,e,n,a){const u=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?In:u[n]?u[n]:Pn[n]||Pn[a]||In,fS(t,e,n)}function fS(t,e,n){!t.transmit&&e[n]===In||(e[n]=function(a){return function(){const c=t.timestamp(),p=new Array(arguments.length),E=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Pn?Pn:this;for(var k=0;k<p.length;k++)p[k]=arguments[k];if(t.serialize&&!t.asObject&&Si(p,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?a.call(E,hS(this,n,p,c)):a.apply(E,p),t.transmit){const $=t.transmit.level||e.level,B=Gt.levels.values[$],j=Gt.levels.values[n];if(j<B)return;dS(this,{ts:c,methodLevel:n,methodValue:j,transmitLevel:$,transmitValue:Gt.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},p)}}}(e[n]))}function hS(t,e,n,a){t._serialize&&Si(n,t._serialize,t.serializers,t._stdErrSerialize);const u=n.slice();let c=u[0];const p={};a&&(p.time=a),p.level=Gt.levels.values[e];let E=(t._childLevel|0)+1;if(E<1&&(E=1),c!==null&&typeof c=="object"){for(;E--&&typeof u[0]=="object";)Object.assign(p,u.shift());c=u.length?jl(u.shift(),u):void 0}else typeof c=="string"&&(c=jl(u.shift(),u));return c!==void 0&&(p.msg=c),p}function Si(t,e,n,a){for(const u in t)if(a&&t[u]instanceof Error)t[u]=Gt.stdSerializers.err(t[u]);else if(typeof t[u]=="object"&&!Array.isArray(t[u]))for(const c in t[u])e&&e.indexOf(c)>-1&&c in n&&(t[u][c]=n[c](t[u][c]))}function Yr(t,e,n){return function(){const a=new Array(1+arguments.length);a[0]=e;for(var u=1;u<a.length;u++)a[u]=arguments[u-1];return t[n].apply(this,a)}}function dS(t,e,n){const a=e.send,u=e.ts,c=e.methodLevel,p=e.methodValue,E=e.val,k=t._logEvent.bindings;Si(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=u,t._logEvent.messages=n.filter(function($){return k.indexOf($)===-1}),t._logEvent.level.label=c,t._logEvent.level.value=p,a(c,t._logEvent,E),t._logEvent=Ia(k)}function Ia(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function _S(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function gS(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?Bl:ql}function Ei(){return{}}function Aa(t){return t}function In(){}function Bl(){return!1}function ql(){return Date.now()}function pS(){return Math.round(Date.now()/1e3)}function vS(){return new Date(Date.now()).toISOString()}function mS(){function t(e){return typeof e!="undefined"&&e}try{return typeof globalThis!="undefined"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const yS=t=>uS({enabled:t.enabled,browser:{asObject:!0}});var ka={},Ci={},xi={},Ul={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function u(k,$,B){this.fn=k,this.context=$,this.once=B||!1}function c(k,$,B,j,Y){if(typeof B!="function")throw new TypeError("The listener must be a function");var R=new u(B,j||k,Y),Z=n?n+$:$;return k._events[Z]?k._events[Z].fn?k._events[Z]=[k._events[Z],R]:k._events[Z].push(R):(k._events[Z]=R,k._eventsCount++),k}function p(k,$){--k._eventsCount===0?k._events=new a:delete k._events[$]}function E(){this._events=new a,this._eventsCount=0}E.prototype.eventNames=function(){var $=[],B,j;if(this._eventsCount===0)return $;for(j in B=this._events)e.call(B,j)&&$.push(n?j.slice(1):j);return Object.getOwnPropertySymbols?$.concat(Object.getOwnPropertySymbols(B)):$},E.prototype.listeners=function($){var B=n?n+$:$,j=this._events[B];if(!j)return[];if(j.fn)return[j.fn];for(var Y=0,R=j.length,Z=new Array(R);Y<R;Y++)Z[Y]=j[Y].fn;return Z},E.prototype.listenerCount=function($){var B=n?n+$:$,j=this._events[B];return j?j.fn?1:j.length:0},E.prototype.emit=function($,B,j,Y,R,Z){var Q=n?n+$:$;if(!this._events[Q])return!1;var ae=this._events[Q],le=arguments.length,$e,_e;if(ae.fn){switch(ae.once&&this.removeListener($,ae.fn,void 0,!0),le){case 1:return ae.fn.call(ae.context),!0;case 2:return ae.fn.call(ae.context,B),!0;case 3:return ae.fn.call(ae.context,B,j),!0;case 4:return ae.fn.call(ae.context,B,j,Y),!0;case 5:return ae.fn.call(ae.context,B,j,Y,R),!0;case 6:return ae.fn.call(ae.context,B,j,Y,R,Z),!0}for(_e=1,$e=new Array(le-1);_e<le;_e++)$e[_e-1]=arguments[_e];ae.fn.apply(ae.context,$e)}else{var Ce=ae.length,bt;for(_e=0;_e<Ce;_e++)switch(ae[_e].once&&this.removeListener($,ae[_e].fn,void 0,!0),le){case 1:ae[_e].fn.call(ae[_e].context);break;case 2:ae[_e].fn.call(ae[_e].context,B);break;case 3:ae[_e].fn.call(ae[_e].context,B,j);break;case 4:ae[_e].fn.call(ae[_e].context,B,j,Y);break;default:if(!$e)for(bt=1,$e=new Array(le-1);bt<le;bt++)$e[bt-1]=arguments[bt];ae[_e].fn.apply(ae[_e].context,$e)}}return!0},E.prototype.on=function($,B,j){return c(this,$,B,j,!1)},E.prototype.once=function($,B,j){return c(this,$,B,j,!0)},E.prototype.removeListener=function($,B,j,Y){var R=n?n+$:$;if(!this._events[R])return this;if(!B)return p(this,R),this;var Z=this._events[R];if(Z.fn)Z.fn===B&&(!Y||Z.once)&&(!j||Z.context===j)&&p(this,R);else{for(var Q=0,ae=[],le=Z.length;Q<le;Q++)(Z[Q].fn!==B||Y&&!Z[Q].once||j&&Z[Q].context!==j)&&ae.push(Z[Q]);ae.length?this._events[R]=ae.length===1?ae[0]:ae:p(this,R)}return this},E.prototype.removeAllListeners=function($){var B;return $?(B=n?n+$:$,this._events[B]&&p(this,B)):(this._events=new a,this._eventsCount=0),this},E.prototype.off=E.prototype.removeListener,E.prototype.addListener=E.prototype.on,E.prefixed=n,E.EventEmitter=E,t.exports=E})(Ul);var Oi={},Ir={};Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.getPlatformFactories=Ir.setPlatformFactories=void 0;let La;function bS(t){La=t}Ir.setPlatformFactories=bS;function wS(){if(!La)throw new Error("Platform specific factories are not set!");return La}Ir.getPlatformFactories=wS,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.setDefaults=t.setSentry=t.setLogger=t.sentry=t.logger=void 0;const e=Ir;t.logger=null,t.sentry=null;function n(c){t.logger=c}t.setLogger=n;function a(c){t.sentry=c}t.setSentry=a;function u(){t.logger=(0,e.getPlatformFactories)().createLoggerFactory()(),t.sentry=(0,e.getPlatformFactories)().createSentryFactory()({dsn:{}.SENTRY_DSN,logger:t.logger})}t.setDefaults=u}(Oi);var An={};function SS(t){for(var e=-1,n=t==null?0:t.length,a={};++e<n;){var u=t[e];a[u[0]]=u[1]}return a}var Ti=SS,ES=Array.isArray,kn=ES,CS=typeof ce=="object"&&ce&&ce.Object===Object&&ce,xS=CS,OS=xS,TS=typeof self=="object"&&self&&self.Object===Object&&self,PS=OS||TS||Function("return this")(),Ra=PS,IS=Ra,AS=IS.Symbol,Pi=AS,Hl=Pi,Vl=Object.prototype,kS=Vl.hasOwnProperty,LS=Vl.toString,Ln=Hl?Hl.toStringTag:void 0;function RS(t){var e=kS.call(t,Ln),n=t[Ln];try{t[Ln]=void 0;var a=!0}catch{}var u=LS.call(t);return a&&(e?t[Ln]=n:delete t[Ln]),u}var MS=RS,$S=Object.prototype,NS=$S.toString;function DS(t){return NS.call(t)}var FS=DS,Gl=Pi,zS=MS,jS=FS,BS="[object Null]",qS="[object Undefined]",Wl=Gl?Gl.toStringTag:void 0;function US(t){return t==null?t===void 0?qS:BS:Wl&&Wl in Object(t)?zS(t):jS(t)}var Ma=US;function HS(t){return t!=null&&typeof t=="object"}var Ii=HS,VS=Ma,GS=Ii,WS="[object Symbol]";function KS(t){return typeof t=="symbol"||GS(t)&&VS(t)==WS}var Ai=KS,YS=kn,JS=Ai,ZS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,XS=/^\w*$/;function QS(t,e){if(YS(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||JS(t)?!0:XS.test(t)||!ZS.test(t)||e!=null&&t in Object(e)}var eE=QS;function tE(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Rn=tE,rE=Ma,nE=Rn,iE="[object AsyncFunction]",sE="[object Function]",aE="[object GeneratorFunction]",oE="[object Proxy]";function uE(t){if(!nE(t))return!1;var e=rE(t);return e==sE||e==aE||e==iE||e==oE}var Kl=uE,lE=Ra,cE=lE["__core-js_shared__"],fE=cE,$a=fE,Yl=function(){var t=/[^.]+$/.exec($a&&$a.keys&&$a.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function hE(t){return!!Yl&&Yl in t}var dE=hE,_E=Function.prototype,gE=_E.toString;function pE(t){if(t!=null){try{return gE.call(t)}catch{}try{return t+""}catch{}}return""}var vE=pE,mE=Kl,yE=dE,bE=Rn,wE=vE,SE=/[\\^$.*+?()[\]{}|]/g,EE=/^\[object .+?Constructor\]$/,CE=Function.prototype,xE=Object.prototype,OE=CE.toString,TE=xE.hasOwnProperty,PE=RegExp("^"+OE.call(TE).replace(SE,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function IE(t){if(!bE(t)||yE(t))return!1;var e=mE(t)?PE:EE;return e.test(wE(t))}var AE=IE;function kE(t,e){return t==null?void 0:t[e]}var LE=kE,RE=AE,ME=LE;function $E(t,e){var n=ME(t,e);return RE(n)?n:void 0}var Na=$E,NE=Na,DE=NE(Object,"create"),ki=DE,Jl=ki;function FE(){this.__data__=Jl?Jl(null):{},this.size=0}var zE=FE;function jE(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var BE=jE,qE=ki,UE="__lodash_hash_undefined__",HE=Object.prototype,VE=HE.hasOwnProperty;function GE(t){var e=this.__data__;if(qE){var n=e[t];return n===UE?void 0:n}return VE.call(e,t)?e[t]:void 0}var WE=GE,KE=ki,YE=Object.prototype,JE=YE.hasOwnProperty;function ZE(t){var e=this.__data__;return KE?e[t]!==void 0:JE.call(e,t)}var XE=ZE,QE=ki,e2="__lodash_hash_undefined__";function t2(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=QE&&e===void 0?e2:e,this}var r2=t2,n2=zE,i2=BE,s2=WE,a2=XE,o2=r2;function Jr(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var a=t[e];this.set(a[0],a[1])}}Jr.prototype.clear=n2,Jr.prototype.delete=i2,Jr.prototype.get=s2,Jr.prototype.has=a2,Jr.prototype.set=o2;var u2=Jr;function l2(){this.__data__=[],this.size=0}var c2=l2;function f2(t,e){return t===e||t!==t&&e!==e}var Da=f2,h2=Da;function d2(t,e){for(var n=t.length;n--;)if(h2(t[n][0],e))return n;return-1}var Li=d2,_2=Li,g2=Array.prototype,p2=g2.splice;function v2(t){var e=this.__data__,n=_2(e,t);if(n<0)return!1;var a=e.length-1;return n==a?e.pop():p2.call(e,n,1),--this.size,!0}var m2=v2,y2=Li;function b2(t){var e=this.__data__,n=y2(e,t);return n<0?void 0:e[n][1]}var w2=b2,S2=Li;function E2(t){return S2(this.__data__,t)>-1}var C2=E2,x2=Li;function O2(t,e){var n=this.__data__,a=x2(n,t);return a<0?(++this.size,n.push([t,e])):n[a][1]=e,this}var T2=O2,P2=c2,I2=m2,A2=w2,k2=C2,L2=T2;function Zr(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var a=t[e];this.set(a[0],a[1])}}Zr.prototype.clear=P2,Zr.prototype.delete=I2,Zr.prototype.get=A2,Zr.prototype.has=k2,Zr.prototype.set=L2;var R2=Zr,M2=Na,$2=Ra,N2=M2($2,"Map"),D2=N2,Zl=u2,F2=R2,z2=D2;function j2(){this.size=0,this.__data__={hash:new Zl,map:new(z2||F2),string:new Zl}}var B2=j2;function q2(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var U2=q2,H2=U2;function V2(t,e){var n=t.__data__;return H2(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Ri=V2,G2=Ri;function W2(t){var e=G2(this,t).delete(t);return this.size-=e?1:0,e}var K2=W2,Y2=Ri;function J2(t){return Y2(this,t).get(t)}var Z2=J2,X2=Ri;function Q2(t){return X2(this,t).has(t)}var eC=Q2,tC=Ri;function rC(t,e){var n=tC(this,t),a=n.size;return n.set(t,e),this.size+=n.size==a?0:1,this}var nC=rC,iC=B2,sC=K2,aC=Z2,oC=eC,uC=nC;function Xr(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var a=t[e];this.set(a[0],a[1])}}Xr.prototype.clear=iC,Xr.prototype.delete=sC,Xr.prototype.get=aC,Xr.prototype.has=oC,Xr.prototype.set=uC;var Xl=Xr,Ql=Xl,lC="Expected a function";function Fa(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(lC);var n=function(){var a=arguments,u=e?e.apply(this,a):a[0],c=n.cache;if(c.has(u))return c.get(u);var p=t.apply(this,a);return n.cache=c.set(u,p)||c,p};return n.cache=new(Fa.Cache||Ql),n}Fa.Cache=Ql;var cC=Fa,fC=cC,hC=500;function dC(t){var e=fC(t,function(a){return n.size===hC&&n.clear(),a}),n=e.cache;return e}var _C=dC,gC=_C,pC=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vC=/\\(\\)?/g,mC=gC(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(pC,function(n,a,u,c){e.push(u?c.replace(vC,"$1"):a||n)}),e}),yC=mC;function bC(t,e){for(var n=-1,a=t==null?0:t.length,u=Array(a);++n<a;)u[n]=e(t[n],n,t);return u}var ec=bC,tc=Pi,wC=ec,SC=kn,EC=Ai,CC=1/0,rc=tc?tc.prototype:void 0,nc=rc?rc.toString:void 0;function ic(t){if(typeof t=="string")return t;if(SC(t))return wC(t,ic)+"";if(EC(t))return nc?nc.call(t):"";var e=t+"";return e=="0"&&1/t==-CC?"-0":e}var xC=ic,OC=xC;function TC(t){return t==null?"":OC(t)}var PC=TC,IC=kn,AC=eE,kC=yC,LC=PC;function RC(t,e){return IC(t)?t:AC(t,e)?[t]:kC(LC(t))}var Mi=RC,MC=Ai,$C=1/0;function NC(t){if(typeof t=="string"||MC(t))return t;var e=t+"";return e=="0"&&1/t==-$C?"-0":e}var za=NC,DC=Mi,FC=za;function zC(t,e){e=DC(e,t);for(var n=0,a=e.length;t!=null&&n<a;)t=t[FC(e[n++])];return n&&n==a?t:void 0}var jC=zC,BC=Na,qC=function(){try{var t=BC(Object,"defineProperty");return t({},"",{}),t}catch{}}(),sc=qC,ac=sc;function UC(t,e,n){e=="__proto__"&&ac?ac(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var HC=UC,VC=HC,GC=Da,WC=Object.prototype,KC=WC.hasOwnProperty;function YC(t,e,n){var a=t[e];(!(KC.call(t,e)&&GC(a,n))||n===void 0&&!(e in t))&&VC(t,e,n)}var JC=YC,ZC=9007199254740991,XC=/^(?:0|[1-9]\d*)$/;function QC(t,e){var n=typeof t;return e=e==null?ZC:e,!!e&&(n=="number"||n!="symbol"&&XC.test(t))&&t>-1&&t%1==0&&t<e}var ja=QC,ex=JC,tx=Mi,rx=ja,oc=Rn,nx=za;function ix(t,e,n,a){if(!oc(t))return t;e=tx(e,t);for(var u=-1,c=e.length,p=c-1,E=t;E!=null&&++u<c;){var k=nx(e[u]),$=n;if(k==="__proto__"||k==="constructor"||k==="prototype")return t;if(u!=p){var B=E[k];$=a?a(B,k,E):void 0,$===void 0&&($=oc(B)?B:rx(e[u+1])?[]:{})}ex(E,k,$),E=E[k]}return t}var sx=ix,ax=jC,ox=sx,ux=Mi;function lx(t,e,n){for(var a=-1,u=e.length,c={};++a<u;){var p=e[a],E=ax(t,p);n(E,p)&&ox(c,ux(p,t),E)}return c}var cx=lx;function fx(t,e){return t!=null&&e in Object(t)}var hx=fx,dx=Ma,_x=Ii,gx="[object Arguments]";function px(t){return _x(t)&&dx(t)==gx}var vx=px,uc=vx,mx=Ii,lc=Object.prototype,yx=lc.hasOwnProperty,bx=lc.propertyIsEnumerable,wx=uc(function(){return arguments}())?uc:function(t){return mx(t)&&yx.call(t,"callee")&&!bx.call(t,"callee")},cc=wx,Sx=9007199254740991;function Ex(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Sx}var fc=Ex,Cx=Mi,xx=cc,Ox=kn,Tx=ja,Px=fc,Ix=za;function Ax(t,e,n){e=Cx(e,t);for(var a=-1,u=e.length,c=!1;++a<u;){var p=Ix(e[a]);if(!(c=t!=null&&n(t,p)))break;t=t[p]}return c||++a!=u?c:(u=t==null?0:t.length,!!u&&Px(u)&&Tx(p,u)&&(Ox(t)||xx(t)))}var kx=Ax,Lx=hx,Rx=kx;function Mx(t,e){return t!=null&&Rx(t,e,Lx)}var $x=Mx,Nx=cx,Dx=$x;function Fx(t,e){return Nx(t,e,function(n,a){return Dx(t,a)})}var zx=Fx;function jx(t,e){for(var n=-1,a=e.length,u=t.length;++n<a;)t[u+n]=e[n];return t}var Bx=jx,hc=Pi,qx=cc,Ux=kn,dc=hc?hc.isConcatSpreadable:void 0;function Hx(t){return Ux(t)||qx(t)||!!(dc&&t&&t[dc])}var Vx=Hx,Gx=Bx,Wx=Vx;function _c(t,e,n,a,u){var c=-1,p=t.length;for(n||(n=Wx),u||(u=[]);++c<p;){var E=t[c];e>0&&n(E)?e>1?_c(E,e-1,n,a,u):Gx(u,E):a||(u[u.length]=E)}return u}var Kx=_c,Yx=Kx;function Jx(t){var e=t==null?0:t.length;return e?Yx(t,1):[]}var Zx=Jx;function Xx(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var Qx=Xx,eO=Qx,gc=Math.max;function tO(t,e,n){return e=gc(e===void 0?t.length-1:e,0),function(){for(var a=arguments,u=-1,c=gc(a.length-e,0),p=Array(c);++u<c;)p[u]=a[e+u];u=-1;for(var E=Array(e+1);++u<e;)E[u]=a[u];return E[e]=n(p),eO(t,this,E)}}var pc=tO;function rO(t){return function(){return t}}var nO=rO;function iO(t){return t}var vc=iO,sO=nO,mc=sc,aO=vc,oO=mc?function(t,e){return mc(t,"toString",{configurable:!0,enumerable:!1,value:sO(e),writable:!0})}:aO,uO=oO,lO=800,cO=16,fO=Date.now;function hO(t){var e=0,n=0;return function(){var a=fO(),u=cO-(a-n);if(n=a,u>0){if(++e>=lO)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var dO=hO,_O=uO,gO=dO,pO=gO(_O),yc=pO,vO=Zx,mO=pc,yO=yc;function bO(t){return yO(mO(t,void 0,vO),t+"")}var wO=bO,SO=zx,EO=wO,CO=EO(function(t,e){return t==null?{}:SO(t,e)}),bc=CO,$i={},yt={},wt={},xO="__lodash_hash_undefined__";function OO(t){return this.__data__.set(t,xO),this}var TO=OO;function PO(t){return this.__data__.has(t)}var IO=PO,AO=Xl,kO=TO,LO=IO;function Ni(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new AO;++e<n;)this.add(t[e])}Ni.prototype.add=Ni.prototype.push=kO,Ni.prototype.has=LO;var RO=Ni;function MO(t,e,n,a){for(var u=t.length,c=n+(a?1:-1);a?c--:++c<u;)if(e(t[c],c,t))return c;return-1}var $O=MO;function NO(t){return t!==t}var DO=NO;function FO(t,e,n){for(var a=n-1,u=t.length;++a<u;)if(t[a]===e)return a;return-1}var zO=FO,jO=$O,BO=DO,qO=zO;function UO(t,e,n){return e===e?qO(t,e,n):jO(t,BO,n)}var HO=UO,VO=HO;function GO(t,e){var n=t==null?0:t.length;return!!n&&VO(t,e,0)>-1}var WO=GO;function KO(t,e,n){for(var a=-1,u=t==null?0:t.length;++a<u;)if(n(e,t[a]))return!0;return!1}var YO=KO;function JO(t){return function(e){return t(e)}}var ZO=JO;function XO(t,e){return t.has(e)}var QO=XO,eT=RO,tT=WO,rT=YO,nT=ec,iT=ZO,sT=QO,aT=200;function oT(t,e,n,a){var u=-1,c=tT,p=!0,E=t.length,k=[],$=e.length;if(!E)return k;n&&(e=nT(e,iT(n))),a?(c=rT,p=!1):e.length>=aT&&(c=sT,p=!1,e=new eT(e));e:for(;++u<E;){var B=t[u],j=n==null?B:n(B);if(B=a||B!==0?B:0,p&&j===j){for(var Y=$;Y--;)if(e[Y]===j)continue e;k.push(B)}else c(e,j,a)||k.push(B)}return k}var uT=oT,lT=vc,cT=pc,fT=yc;function hT(t,e){return fT(cT(t,e,lT),t+"")}var dT=hT,_T=Kl,gT=fc;function pT(t){return t!=null&&gT(t.length)&&!_T(t)}var wc=pT,vT=wc,mT=Ii;function yT(t){return mT(t)&&vT(t)}var bT=yT,wT=uT,ST=dT,ET=bT,CT=ST(function(t,e){return ET(t)?wT(t,e):[]}),xT=CT,Sc=ce&&ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wt,"__esModule",{value:!0}),wt.without=wt.keys=wt.isObject=void 0;const OT=Sc(bc),TT=Sc(xT);function PT(t){return Boolean(t&&(typeof t=="object"||typeof t=="function"))}wt.isObject=PT;function Ec(t){return Object.keys(t)}wt.keys=Ec;function IT(t,e){return(0,OT.default)(t,(0,TT.default)(Ec(t),...e))}wt.without=IT;var AT=ce&&ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yt,"__esModule",{value:!0}),yt.traverseAndFind=yt.getVariantPropsFromName=yt.buildParentsMap=yt.flattenLayers=yt.getChildren=void 0;const kT=AT(Ti),LT=wt;function Mn(t,e="children"){return e in t?t[e]:[]}yt.getChildren=Mn;function Cc(t,e="children"){const n=Mn(t,e);return[t,...n.reduce((a,u)=>(a.push(...Cc(u,e)),a),[])]}function RT(t,e="children"){return[...Mn(t,e).reduce((a,u)=>(a.push(...Cc(u,e)),a),[])]}yt.flattenLayers=RT;function xc(t,e="children",n){const a=Mn(t,e);return[[t,n],...a.reduce((u,c)=>(u.push(...xc(c,e,t)),u),[])]}function MT(t,e="children"){return[...Mn(t,e).reduce((a,u)=>(a.push(...xc(u,e,t)),a),[])]}yt.buildParentsMap=MT;function $T(t){return(0,kT.default)(String(t).split(",").map(e=>String(e).split("=").map(n=>n.trim()).slice(0,2)))}yt.getVariantPropsFromName=$T;function Oc(t,e){return[e(t),...Object.values(t).reduce((n,a)=>(0,LT.isObject)(a)?[...n,...Oc(a,e)]:n,[])]}function NT(t,e){return Oc(t,e).filter(n=>n!==void 0)}yt.traverseAndFind=NT,Object.defineProperty($i,"__esModule",{value:!0}),$i.findArtboardUsedComponents=void 0;const DT=yt;function FT(t){return(0,DT.flattenLayers)(t).reduce((e,n)=>(n==null?void 0:n.type)==="COMPONENT"?(e.push(n==null?void 0:n.id),e):(n!=null&&n.componentId&&e.push(n==null?void 0:n.componentId),e),[])}$i.findArtboardUsedComponents=FT;var Lt={};Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.asFiniteNumber=Lt.asNumber=Lt.asString=Lt.asBoolean=Lt.asArray=void 0;function zT(t,e){return Array.isArray(t)?t:Array.isArray(e)?e:[]}Lt.asArray=zT;function jT(t,e){return typeof t=="boolean"?t:typeof e=="boolean"?e:Boolean(t)}Lt.asBoolean=jT;function BT(t,e){return typeof t=="string"?t:typeof e=="string"?e:String(t)}Lt.asString=BT;function qT(t,e){return typeof t=="number"?t:typeof e=="number"?e:Number(t)}Lt.asNumber=qT;function UT(t,e){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof e=="number"&&Number.isFinite(e))return e;const n=Number(t);if(!Number.isFinite(n))throw new Error(`Failed when converting "${t}" to finite number`);return n}Lt.asFiniteNumber=UT;var Qr={};Object.defineProperty(Qr,"__esModule",{value:!0});function Tc(t){const e=new WeakMap;return function(...n){return e.has(this)||e.set(this,t.call(this,...n)),e.get(this)}}function HT(){return function(t,e,n){return n.get&&(n.get=Tc(n.get)),n.value&&(n.value=Tc(n.value)),n}}Qr.default=HT;var Di={},Fi={};Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.Artboard=void 0;class VT{constructor(e){this._artboard=e.artboard}get id(){return String(this._artboard.id)}get name(){return String(this._artboard.name)}}Fi.Artboard=VT;var zi=ce&&ce.__decorate||function(t,e,n,a){var u=arguments.length,c=u<3?e:a===null?a=Object.getOwnPropertyDescriptor(e,n):a,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(t,e,n,a);else for(var E=t.length-1;E>=0;E--)(p=t[E])&&(c=(u<3?p(c):u>3?p(e,n,c):p(e,n))||c);return u>3&&c&&Object.defineProperty(e,n,c),c},GT=ce&&ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Di,"__esModule",{value:!0}),Di.Page=void 0;const Pc=yt,ji=GT(Qr),WT=Fi;class fr{constructor(e){this._page=e.page}get id(){var e;return String((e=this._page)===null||e===void 0?void 0:e.id)}get name(){var e;return String((e=this._page)===null||e===void 0?void 0:e.name)}get flatLayers(){return(0,Pc.flattenLayers)(this._page)}getTopLevelArtboards(){return(0,Pc.getChildren)(this._page).reduce((e,n)=>((n==null?void 0:n.type)==="FRAME"&&e.push(new WT.Artboard({artboard:n})),e),[])}getLocalComponents(){return this.flatLayers.filter(e=>(e==null?void 0:e.type)==="COMPONENT")}getAllFrameLikes(){return this.flatLayers.filter(e=>fr.FRAME_LIKE_TYPES.includes(e==null?void 0:e.type))}}fr.FRAME_LIKE_TYPES=["FRAME","COMPONENT"],zi([(0,ji.default)()],fr.prototype,"flatLayers",null),zi([(0,ji.default)()],fr.prototype,"getTopLevelArtboards",null),zi([(0,ji.default)()],fr.prototype,"getLocalComponents",null),zi([(0,ji.default)()],fr.prototype,"getAllFrameLikes",null),Di.Page=fr;var Ot=ce&&ce.__decorate||function(t,e,n,a){var u=arguments.length,c=u<3?e:a===null?a=Object.getOwnPropertyDescriptor(e,n):a,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(t,e,n,a);else for(var E=t.length-1;E>=0;E--)(p=t[E])&&(c=(u<3?p(c):u>3?p(e,n,c):p(e,n))||c);return u>3&&c&&Object.defineProperty(e,n,c),c},Ba=ce&&ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(An,"__esModule",{value:!0}),An.File=void 0;const Ic=Ba(Ti),KT=Ba(bc),YT=$i,JT=Lt,qa=wt,Bi=yt,Tt=Ba(Qr),ZT=Di;class St{constructor(e){this._file=e.file,this._pages=this._initPages()}get raw(){return this._file}get documentRaw(){var e;return(e=this._file)===null||e===void 0?void 0:e.document}get componentsRaw(){return Object(this._file.components)}_initPages(){return(0,Bi.getChildren)(this.documentRaw).reduce((e,n)=>((n==null?void 0:n.type)==="CANVAS"&&e.push(new ZT.Page({page:n})),e),[])}_findDefaultTargetArtboards(){return this._pages.reduce((e,n)=>(e.push(...n.getTopLevelArtboards()),e),[])}get _layersHierarchyList(){return new Map((0,Bi.buildParentsMap)(this.documentRaw))}findTargetArtboards(e){return this.flatLayers.filter(n=>"id"in n?e.includes(n==null?void 0:n.id):!1)}get idParentsMap(){return(0,Ic.default)([...this._layersHierarchyList.entries()].map(([e,n])=>[e==null?void 0:e.id,n]))}get flatLayers(){return[...this._layersHierarchyList.keys()]}get componentIds(){return(0,qa.keys)(this.componentsRaw)}get componentNamedIds(){return(0,qa.keys)(this.componentsRaw).map(e=>({name:this.componentsRaw[e].name,id:e}))}get localComponents(){return this.flatLayers.filter(e=>(e==null?void 0:e.type)==="COMPONENT")}get localComponentIds(){return this.localComponents.map(e=>e==null?void 0:e.id)}get localComponentNamedIds(){return this.localComponents.map(e=>({name:e==null?void 0:e.name,id:e==null?void 0:e.id}))}get remoteComponentIds(){const e=this.localComponentIds;return this.componentIds.filter(n=>!e.includes(n))}get remoteComponentNamedIds(){const e=this.localComponentIds;return this.componentNamedIds.filter(n=>!e.includes(n.id))}getParentOf(e){return this.idParentsMap[e]||null}getRemoteComponentsDescriptorsByIds(e){const n=(0,KT.default)(this.componentsRaw,e);return(0,qa.keys)(n).map(a=>st(Te({},n[a]),{localId:a}))}getTargetIds(){return{topLevelArtboards:this._findDefaultTargetArtboards().map(e=>e.id),localComponents:this.localComponentIds,remoteComponents:this.remoteComponentIds}}getNamedFrameLikeIds(){return{topLevelArtboards:this._findDefaultTargetArtboards().map(e=>({name:e.name,id:e.id})),localComponents:this.localComponentNamedIds,remoteComponents:this.remoteComponentNamedIds}}getScopedTargetIds(e){if(!(0,JT.asArray)(e).length)return this.getTargetIds();const a=this.findTargetArtboards(e).reduce((u,c)=>[...u,...(0,YT.findArtboardUsedComponents)(c)],[]);return{topLevelArtboards:e,localComponents:this.localComponentIds.filter(u=>a.includes(u)),remoteComponents:this.remoteComponentIds.filter(u=>a.includes(u))}}get componentSetsMeta(){return this.flatLayers.reduce((e,n)=>{if((n==null?void 0:n.type)!=="COMPONENT_SET")return e;const a=n==null?void 0:n.id,u=n==null?void 0:n.name,c=(0,Bi.getChildren)(n).reduce((p,E)=>{if((E==null?void 0:E.type)!=="COMPONENT")return p;const k=E==null?void 0:E.id,$=E==null?void 0:E.name;return[...p,{id:k,name:$}]},[]);return[...e,{id:a,name:u,variants:c}]},[])}get componentSetsMetaMap(){return(0,Ic.default)(this.componentSetsMeta.reduce((e,n)=>{const a=n.variants.map(u=>[u.id,{componentSetId:n.id,componentSetName:n.name,componentName:u.name,componentProps:(0,Bi.getVariantPropsFromName)(u.name)}]);return[...e,...a]},[]))}getVariantMetaOf(e){return this.componentSetsMetaMap[e.id]||null}get pages(){return this._pages}get schemaVersion(){var e;return(e=this._file)===null||e===void 0?void 0:e.schemaVersion}get styles(){return Object(this._file.styles)}get name(){var e;return(e=this._file)===null||e===void 0?void 0:e.name}}Ot([(0,Tt.default)()],St.prototype,"_layersHierarchyList",null),Ot([(0,Tt.default)()],St.prototype,"idParentsMap",null),Ot([(0,Tt.default)()],St.prototype,"flatLayers",null),Ot([(0,Tt.default)()],St.prototype,"componentIds",null),Ot([(0,Tt.default)()],St.prototype,"componentNamedIds",null),Ot([(0,Tt.default)()],St.prototype,"localComponents",null),Ot([(0,Tt.default)()],St.prototype,"localComponentIds",null),Ot([(0,Tt.default)()],St.prototype,"localComponentNamedIds",null),Ot([(0,Tt.default)()],St.prototype,"remoteComponentIds",null),Ot([(0,Tt.default)()],St.prototype,"remoteComponentNamedIds",null),Ot([(0,Tt.default)()],St.prototype,"getTargetIds",null),Ot([(0,Tt.default)()],St.prototype,"componentSetsMeta",null),Ot([(0,Tt.default)()],St.prototype,"componentSetsMetaMap",null),An.File=St;var qi={};Object.defineProperty(qi,"__esModule",{value:!0}),qi.FillsDescriptor=void 0;class XT{constructor(e){this._fillsDescriptor=e.fillsDescriptor}get raw(){return this._fillsDescriptor}getImagesUrlsByIds(e){var n,a;const u=Object((a=(n=this._fillsDescriptor)===null||n===void 0?void 0:n.meta)===null||a===void 0?void 0:a.images);return e.map(c=>u[c])}}qi.FillsDescriptor=XT;var $n={},Ua=ce&&ce.__decorate||function(t,e,n,a){var u=arguments.length,c=u<3?e:a===null?a=Object.getOwnPropertyDescriptor(e,n):a,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(t,e,n,a);else for(var E=t.length-1;E>=0;E--)(p=t[E])&&(c=(u<3?p(c):u>3?p(e,n,c):p(e,n))||c);return u>3&&c&&Object.defineProperty(e,n,c),c},QT=ce&&ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($n,"__esModule",{value:!0}),$n.Node=void 0;const Ha=yt,Va=QT(Qr);class Ui{constructor(e){this._id=e.id,this._node=e.node}get raw(){return this._node}get document(){var e;return(e=this._node)===null||e===void 0?void 0:e.document}get id(){var e;return(e=this.document)===null||e===void 0?void 0:e.id}get type(){var e;return String((e=this.document)===null||e===void 0?void 0:e.type)}get nodeId(){return this._id.nodeId}get designId(){return this._id.designId}get name(){var e;return(e=this.document)===null||e===void 0?void 0:e.name}get allImageRefs(){const e=(0,Ha.traverseAndFind)(this.document,n=>{if("imageRef"in n)return n.imageRef});return[...new Set(e.reduce((n,a)=>(n.push(a),n),[]))]}get imageRefNodeIds(){return this.flatLayers.reduce((e,n)=>(e.push(...(0,Ha.traverseAndFind)(n,a=>typeof(a==null?void 0:a.imageRef)=="string"?n.id:void 0)),e),[])}get flatLayers(){var e;return(0,Ha.flattenLayers)((e=this._node)===null||e===void 0?void 0:e.document)}get styles(){return this._node.styles}getPixelsArea(){var e;const{width:n,height:a}=Object((e=this.document)===null||e===void 0?void 0:e.absoluteBoundingBox),u=n*a;return Number.isNaN(u)?0:u}}Ua([(0,Va.default)()],Ui.prototype,"allImageRefs",null),Ua([(0,Va.default)()],Ui.prototype,"imageRefNodeIds",null),Ua([(0,Va.default)()],Ui.prototype,"flatLayers",null),$n.Node=Ui;var Nn={},Hi={};Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.Fills=void 0;class eP{constructor(e){this._frameLike=e.frameLike,this._fills=this._initFills()}get parser(){return this._frameLike._design.parser}get design(){return this._frameLike._design}get cacher(){return this.parser.services.cacher}_getCachedFills(e){return e.map(n=>{var a,u,c;return(c=(u=(a=this.cacher)===null||a===void 0?void 0:a.resolveFill)===null||u===void 0?void 0:u.call(a,n.designId,n.ref))!==null&&c!==void 0?c:Promise.reject(`Cache missing fill ${n.designId}/${n.ref}`)})}async _requestFills(e){const n=(await this.design.getLazyFillsDescriptor()).getImagesUrlsByIds(e.map(a=>a.ref));return this.parser.qm.queues.figmaS3.execMany(n)}async _initFills(){var e,n;const u=this._frameLike.fillsIds().map(j=>({designId:this.design.designId,ref:j})),{cached:c,noncached:p}=(n=await((e=this.cacher)===null||e===void 0?void 0:e.fills(u)))!==null&&n!==void 0?n:{cached:[],noncached:u},E=this._getCachedFills(c),k=await this._requestFills(p),$=[...c,...p],B=[...E,...k].map((j,Y)=>[$[Y].ref,j.then(R=>{const Z={designId:this.design.designId,ref:$[Y].ref,buffer:R};return this.design.emit("ready:fill",Z),R})]);return Object.fromEntries(B)}async getFills(){return Object.fromEntries(await Promise.all(Object.entries(await this._fills).map(async([e,n])=>{const a=await n;return[e,a]})))}async ready(){const e=Object.values(await this._fills);await Promise.all(e)}}Hi.Fills=eP;var Vi={};Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.Preview=void 0;class tP{constructor(e){this._frameLike=e.frameLike,this._preview=this._initPreview(),this._emitOnReady()}get parser(){return this._frameLike._design.parser}get design(){return this._frameLike._design}get cacher(){return this.parser.services.cacher}_getCachedPreview(){var e,n;return(n=(e=this.cacher)===null||e===void 0?void 0:e.resolvePreview)===null||n===void 0?void 0:n.call(e,{designId:this.design.designId,nodeId:this._frameLike.node.nodeId})}async _requestPreview(){return this.parser.qm.queues.previews.exec(this._frameLike.node)}async _initPreview(){var e,n;const a=await this._getCachedPreview();if(a)return a;const u=await this._requestPreview();return(n=(e=this.cacher)===null||e===void 0?void 0:e.cachePreviews)===null||n===void 0||n.call(e,[[{designId:this.design.designId,nodeId:this._frameLike.node.nodeId},u]]),u}async getPreview(){return this._preview}async ready(){await this._preview}async _emitOnReady(){await this.ready();const e={designId:this._frameLike.node.designId,nodeId:this._frameLike.node.nodeId,buffer:await this._preview};this.design.emit("ready:preview",e)}}Vi.Preview=tP;var Gi={};Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.Renditions=void 0;class rP{constructor(e){this._frameLike=e.frameLike,this._renditions=this.parser.config.shouldRenderImagerefs?this._initRenditions():Promise.resolve({})}get parser(){return this._frameLike._design.parser}get design(){return this._frameLike._design}get cacher(){return this.parser.services.cacher}_getCachedRenditions(e){return e.map(n=>{var a,u,c;return(c=(u=(a=this.cacher)===null||a===void 0?void 0:a.resolveRendition)===null||u===void 0?void 0:u.call(a,n))!==null&&c!==void 0?c:Promise.reject(`Cache missing rendition ${n}`)})}async _requestRenditions(e){const n=e.map(a=>a.nodeId);return this.parser.qm.queues.renditions.execMany(n)}async _initRenditions(){var e,n;const a=this._frameLike.node.imageRefNodeIds.map(B=>({nodeId:B,designId:this.design.designId})),{cached:u,noncached:c}=(n=await((e=this.cacher)===null||e===void 0?void 0:e.renditions(a)))!==null&&n!==void 0?n:{cached:[],noncached:a},p=this._getCachedRenditions(u),E=await this._requestRenditions(c),k=[...u,...c],$=[...p,...E].map((B,j)=>[k[j].nodeId,B.then(Y=>(this.design.emit("ready:rendition",{designId:this.design.designId,nodeId:k[j].nodeId,buffer:Y}),Y))]);return Object.fromEntries($)}async getRenditions(){return Object.fromEntries(await Promise.all(Object.entries(await this._renditions).map(async([e,n])=>{const a=await n;return[e,a]})))}async ready(){const e=Object.values(await this._renditions);await Promise.all(e)}}Gi.Renditions=rP;var Ga={},nP=ce&&ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ga,"__esModule",{value:!0});const iP=nP(Ti),Ac=wt;class sP{constructor(e){this._frameLike=e.frameLike,this._styles=this._initStyles()}get parser(){return this._frameLike._design.parser}get design(){return this._frameLike._design}get cacher(){return this.parser.services.cacher}_parseStylesFromNodes(e){const n=[];return e.reduce((u,c)=>{const p=c.flatLayers.reduce((E,k)=>{const $=k==null?void 0:k.styles;if(!$)return E;const B=(0,Ac.without)(k,["children"]),j=(0,Ac.keys)($).reduce((Y,R)=>{const Z=$==null?void 0:$[R];return n.includes(Z)?Y:(n.push(Z),[...Y,{id:Z,type:R,source:B}])},[]);return E.push(...j),E},[]);return u.push(...p),u},[])}_initStyles(){if(!this._frameLike._design.parser.config.shouldObtainStyles)return[];const e=[this._frameLike.node],n=this._parseStylesFromNodes(e),a=this._frameLike.node.styles,u=n.map(p=>{var E;return(E=a==null?void 0:a[p.id])===null||E===void 0?void 0:E.key}),c=(0,iP.default)(n.map(p=>{var E;return[(E=a==null?void 0:a[p.id])===null||E===void 0?void 0:E.key,p]}));return u.map(p=>{const E=c[p],k=Te({meta:a==null?void 0:a[E.id]},E);return this._frameLike._design.emit("ready:style",k),k})}getStyles(){return this._styles}}Ga.default=sP;var aP=ce&&ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.FrameLike=void 0;const oP=Hi,uP=Vi,lP=Gi,cP=aP(Ga);class fP{constructor(e){this._design=e.design,this._node=e.node,this._fills=new oP.Fills({frameLike:this}),this._renditions=new lP.Renditions({frameLike:this}),this._preview=this._design.parser.config.framePreviews?new uP.Preview({frameLike:this}):null,this._styles=new cP.default({frameLike:this}),this._role=e.role,this._emitOnReady()}get role(){return this._role}get node(){return this._node}get name(){return this._node.name}async ready(){await this._fills.ready(),await this._renditions.ready(),this._preview&&await this._preview.ready()}async getResolvedDescriptor(){var e,n;return await this.ready(),{designId:this._node.designId,nodeId:this._node.nodeId,node:this._node.raw,fills:await this._fills.getFills(),preview:(n=await((e=this._preview)===null||e===void 0?void 0:e.getPreview()))!==null&&n!==void 0?n:null,renditions:await this._renditions.getRenditions(),styles:this._styles.getStyles()}}async _emitOnReady(){this._design.emit(`ready:${this._role}`,await this.getResolvedDescriptor())}fillsIds(){return this._node.allImageRefs}}Nn.FrameLike=fP;var Wi={};Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.Library=void 0;const kc=$n,hP=Nn;class dP{constructor(e){this._design=e.design,this._componentMeta=e.componentMeta,this._component=this._initComponent(),this._frameLike=this._initFrameLike()}get cacher(){return this._design.cacher}async _requestComponent(){return this._design.parser.qm.queues.libraries.exec(this._componentMeta.key)}async _getCachedComponent(){var e,n;return(n=(e=this.cacher)===null||e===void 0?void 0:e.resolveComponent)===null||n===void 0?void 0:n.call(e,this._componentMeta.key)}async _initComponent(){var e,n;const a=await this._getCachedComponent();if(a)return new kc.Node({id:{designId:a.designId,nodeId:a.nodeId},node:a.component});const u=await this._requestComponent();return u?((n=(e=this.cacher)===null||e===void 0?void 0:e.cacheComponents)===null||n===void 0||n.call(e,[[this._componentMeta.key,u]]),new kc.Node({id:{designId:u.designId,nodeId:u.nodeId},node:u.component})):null}async _initFrameLike(){const e=await this._component;return e?new hP.FrameLike({design:this._design,node:e,id:{designId:e.designId,nodeId:e.nodeId},role:"library"}):null}async getResolvedDescriptor(){const e=await this._frameLike;return e?e.getResolvedDescriptor():null}async ready(){await this._component;const e=await this._frameLike;e&&await e.ready()}}Wi.Library=dP,Object.defineProperty(xi,"__esModule",{value:!0}),xi.Design=void 0;const _P=Ul.exports,en=Oi,Lc=An,gP=qi,pP=$n,vP=Nn,mP=Wi;class yP extends _P.EventEmitter{constructor(e){super(),this._designId=e.designId,this._parser=e.parser,this._file=e.cachedFile?Promise.resolve(e.cachedFile):this._initFile(),this._frameLikes=this._initFrameLikes(),this._libraries=this._initLibraries(),this._emitOnReady()}get raw(){return this._file}get cacher(){return this._parser.services.cacher}get parser(){return this._parser}get designId(){return this._designId}_createTargetDesignIds(e){return e.map(n=>({nodeId:n,designId:this._designId}))}_getCachedFrameLikes(e){return e.map(n=>{var a,u,c;return(c=(u=(a=this.cacher)===null||a===void 0?void 0:a.resolveNode)===null||u===void 0?void 0:u.call(a,n))!==null&&c!==void 0?c:Promise.reject(`Cache missing frame-like ${n.designId}/${n.nodeId}`)})}async _cacheRequestedFrameLike(e,n){return n.then(a=>{var u,c;(c=(u=this.cacher)===null||u===void 0?void 0:u.cacheNodes)===null||c===void 0||c.call(u,[[e,a]])}),n}async _initFrameLikes(){var e,n,a;const u=this._createTargetDesignIds(await this._getTargetIds()),{cached:c,noncached:p}=(a=await((n=(e=this.cacher)===null||e===void 0?void 0:e.nodes)===null||n===void 0?void 0:n.call(e,u)))!==null&&a!==void 0?a:{cached:[],noncached:u},E=[...c,...p],k=this._getCachedFrameLikes(c),$=this._parser.qm.queues.partialSync.execMany(p).map((j,Y)=>this._cacheRequestedFrameLike(p[Y],j));return await Promise.all([...k,...$].map(async(j,Y)=>{const R=new pP.Node({node:await j,id:E[Y]});return new vP.FrameLike({node:R,id:E[Y],design:this,role:R.type==="COMPONENT"?"component":"artboard"})}))}async getFrameLikeIds(){return(await this._file).getNamedFrameLikeIds()}async _getTargetIds(){const e=await this._file,{topLevelArtboards:n,localComponents:a}=e.getScopedTargetIds(this._parser.config.targetIds),{targetIds:u,shouldFetchUsedComponents:c}=this._parser.config,E=u.length&&!c?[]:a;return this.parser.config.isVerbose&&(en.logger===null||en.logger===void 0||en.logger.info("Target top level artboards",n),en.logger===null||en.logger===void 0||en.logger.info("Target local components",E)),[...n,...E]}async _getCachedDesign(){var e,n;return(n=(e=this.cacher)===null||e===void 0?void 0:e.resolveDesign)===null||n===void 0?void 0:n.call(e,this._designId)}async _requestDesign(){const e=this._parser.rm.file.prepareRequest(this._designId);return await this.parser.downloader.getJSON(e)}async _initFile(){var e,n;const a=await this._getCachedDesign();if(a)return new Lc.File({file:a});const u=await this._requestDesign();return(n=(e=this.cacher)===null||e===void 0?void 0:e.cacheDesigns)===null||n===void 0||n.call(e,[[this._designId,u]]),new Lc.File({file:u})}async _readyFrameLikes(){return Promise.all((await this._frameLikes).map(e=>e.ready()))}async _readyLibraries(){return Promise.all((await this._libraries).map(e=>e.ready()))}async getResolvedDescriptor(){const e=this._frameLikes.then(u=>Promise.all(u.filter(c=>c.role==="artboard").map(c=>c.getResolvedDescriptor()))),n=this._frameLikes.then(u=>Promise.all(u.filter(c=>c.role==="component").map(c=>c.getResolvedDescriptor()))),a=this._libraries.then(u=>Promise.all(u.map(c=>c.getResolvedDescriptor())).then(c=>c.filter(p=>p)));return{designId:this._designId,design:(await this._file).raw,content:Promise.all([e,n,a]).then(async u=>{const[c,p,E]=u;return{artboards:c,components:p,libraries:E}})}}async _emitOnReady(){this.emit("ready:design",await this.getResolvedDescriptor())}async _initLibraries(){const{targetIds:e,shouldFetchUsedComponents:n,shouldObtainLibraries:a}=this.parser.config;if(!a)return[];const u=await this._file,c=u.getTargetIds();return e.length&&!n?[]:u.getRemoteComponentsDescriptorsByIds(c.remoteComponents).map(k=>new mP.Library({design:this,componentMeta:k}))}async getLazyFillsDescriptor(){return this._fillsDescriptor||(this._fillsDescriptor=this.parser.qm.queues.fills.exec(this.designId).then(e=>new gP.FillsDescriptor({fillsDescriptor:e}))),this._fillsDescriptor}async frameLikes(){return await this._readyFrameLikes(),this._frameLikes}async libraries(){return await this._readyLibraries(),this._libraries}async ready(){await this._readyFrameLikes(),await this._readyLibraries()}async meta(){const e=await this._file;return{schemaVersion:e.schemaVersion,name:e.name}}}xi.Design=yP;var Wa={};Object.defineProperty(Wa,"__esModule",{value:!0});class je{constructor(e){var n;this._tokenType=e.tokenType,this._designId=e.designId,this._token=e.token,this._host=e.host,this._pixelsLimit=e.pixelsLimit,this._framePreviews=e.framePreviews,this._targetIds=(n=e.ids)!==null&&n!==void 0?n:[],this._parallels={previews:e.previewsParallels,nodes:e.nodesParallels,figmaS3:e.s3Parallels,avocodeS3:je.DEFAULT_AVCD_S3_PARALLELS,defaultValue:e.parallelRequests,upload:je.DEFAULT_UPLOAD_PARALLELS,renditions:je.DEFAULT_PARALLEL_RENDITIONS},this._verbose=e.verbose,this._shouldRenderImagerefs=e.renderImagerefs,this._shouldObtainLibraries=e.shouldObtainLibraries,this._shouldObtainStyles=e.shouldObtainStyles,this._shouldFetchUsedComponents=e.figmaIdsFetchUsedComponents}setIds(e){!Array.isArray(e)||(this._targetIds=e)}get isPersonalToken(){return this._tokenType==="personal"}get isBase64Token(){return this._tokenType==="base64"}get isOAuth2Token(){return this._tokenType==="oauth2"}get designId(){return this._designId}get token(){return this._token}get host(){return this._host}get pixelsLimit(){return this._pixelsLimit}get framePreviews(){return this._framePreviews}get targetIds(){return this._targetIds}get parallels(){return this._parallels}get isVerbose(){return this._verbose}get shouldRenderImagerefs(){return this._shouldRenderImagerefs}get shouldObtainLibraries(){return this._shouldObtainLibraries}get shouldObtainStyles(){return this._shouldObtainStyles}get shouldFetchUsedComponents(){return this._shouldFetchUsedComponents}get downloaderRetries(){return je.DEFAULT_DOWNLOADER_RETRIES}get figmaTokenHeader(){return je.DEFAULT_FIGMA_TOKEN_HEADER}get renditionNodes(){return je.DEFAULT_RENDITIONS_NODES}}Wa.default=je,je.DEFAULT_DOWNLOADER_RETRIES=3,je.DEFAULT_FIGMA_TOKEN_HEADER="X-Figma-Token",je.DEFAULT_API_HOST="api.figma.com",je.DEFAULT_PIXELS_LIMIT=1e7,je.DEFAULT_PREVIEWS_PARALLELS=1,je.DEFAULT_NODES_PARALLELS=1,je.DEFAULT_AVCD_S3_PARALLELS=10,je.DEFAULT_FIGMA_S3_PARALLELS=1,je.DEFAULT_UPLOAD_PARALLELS=15,je.DEFAULT_PARALLEL_REQUESTS=3,je.DEFAULT_PARALLEL_RENDITIONS=3,je.DEFAULT_VERBOSE=!0,je.DEFAULT_FIGMA_IDS_FETCH_USED_COMPONENTS=!0,je.DEFAULT_FRAME_PREVIEWS=!1,je.DEFAULT_RENDITIONS_NODES=10;var Ki={},Yi={},Ar={};Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.seq=Ar.detachPromiseControls=void 0;function bP(){let t,e;return{promise:new Promise((a,u)=>{t=a,e=u}),resolve:t,reject:e}}Ar.detachPromiseControls=bP;async function wP(t,e){return t.reduce(async(n,a)=>{const u=await n,c=await e(a);return u.push(c),u},Promise.resolve([]))}Ar.seq=wP,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.Queue=void 0;const Rc=Ar;class SP{constructor(e){const{name:n,factory:a,parallels:u,drainLimit:c=1}=e;this._name=n,this._factory=a,this._available=u,this._drainLimit=c,this._tasks=[],this._awaiting=0,this._working=0}static safeValue(e){return{value:e,error:null}}static safeError(e){return{value:void 0,error:e}}get status(){return{name:this._name,available:this._available,working:this._working,enqueued:this._awaiting}}_getTasks(){return typeof this._drainLimit=="number"?this._tasks.splice(0,this._drainLimit):this._tasks.splice(0)}_finalizeTask(){this._working--,this._available++,queueMicrotask(()=>this._try())}_try(){this._available>0&&this._awaiting&&this._run()}_resolveTasksWithResults(e,n){if(this._finalizeTask(),!Array.isArray(n)||e.length!==n.length)throw new Error("Results are not an array or has different length than tasks input.");n.forEach((a,u)=>{const{value:c,error:p}=a,{resolve:E,reject:k}=e[u];queueMicrotask(()=>{p?k(p):E(c)})})}_rejectTasks(e,n){this._finalizeTask(),e.forEach(a=>a.reject(n))}async _run(){this._available--,this._working++;const e=this._getTasks();if(!e.length){this._finalizeTask();return}this._awaiting-=e.length;try{const n=await this._factory(e.map(a=>a.task));this._resolveTasksWithResults(e,n)}catch(n){this._rejectTasks(e,n)}}exec(e){const{promise:n,resolve:a,reject:u}=(0,Rc.detachPromiseControls)();return this._tasks.push({task:e,resolve:a,reject:u}),this._awaiting++,queueMicrotask(()=>this._try()),n}execMany(e){return e.map(a=>{const{promise:u,resolve:c,reject:p}=(0,Rc.detachPromiseControls)();return this._tasks.push({task:a,resolve:c,reject:p}),this._awaiting++,queueMicrotask(()=>this._try()),u})}}Yi.Queue=SP,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.QueuesManager=void 0;const Ye=Yi;class EP{constructor(e){this._parser=e.parser,this._queues={nodeRequests:this._initNodeRequestsQueue(e),nodesMerger:this._initNodesMergerQueue(),partialSync:this._initPartialSyncQueue(),fills:this._initFillsQueue(e),figmaS3:this._initFigmaS3Queue(e),previewsDescriptors:this._initPreviewsDescriptorsQueue(e),previews:this._initPreviewsQueue(),renditionsDescriptors:this._initRenditionsDescriptorsQueue(e),renditions:this._initRenditionsQueue(),libraries:this._initLibrariesQueue()}}_initNodeRequestsQueue(e){return new Ye.Queue({name:"Nodes Grouped Requests",parallels:e.parser.config.parallels.defaultValue,factory:async n=>{const[a]=n;return[{value:await this._parser.downloader.getJSON(a),error:null}]}})}_initNodesMergerQueue(){return new Ye.Queue({name:"Nodes Merger",parallels:1,factory:async e=>{const n=this._parser.rm.nodes,a=n.groupRequests(e),u=a.map(E=>n.prepareRequest(E.designId,E.nodeIds)),c=await Promise.all(this._queues.nodeRequests.execMany(u));return n.ungroupResponses(c,a,e).map(E=>Ye.Queue.safeValue(E))},drainLimit:null})}_initPartialSyncQueue(){return new Ye.Queue({name:"Partial Sync Emitter",parallels:1,factory:async e=>(await Promise.all(this._queues.nodesMerger.execMany(e))).map(a=>Ye.Queue.safeValue(a)),drainLimit:30})}_initFillsQueue(e){return new Ye.Queue({name:"Fills",parallels:Math.ceil(e.parser.config.parallels.defaultValue/2),factory:async n=>{const[a]=n,u=await this._queues.nodeRequests.exec(this._parser.rm.fills.prepareRequest(a));return[Ye.Queue.safeValue(u)]}})}_initFigmaS3Queue(e){return new Ye.Queue({name:"Figma S3",parallels:e.parser.config.parallels.figmaS3,factory:async n=>{const[a]=n,c=await(await this._parser.downloader.rawRequest(p=>p.get(a))).buffer;return[Ye.Queue.safeValue(c)]}})}_initPreviewsDescriptorsQueue(e){return new Ye.Queue({name:"Previews Descriptors",parallels:e.parser.config.parallels.previews,factory:async n=>{const[a]=n,u=await this._parser.downloader.getJSON(a);return[Ye.Queue.safeValue(u)]}})}_initPreviewsQueue(){return new Ye.Queue({name:"Previews Merger",parallels:1,factory:async e=>{const n=this._parser.rm.previews,a=n.groupRequests(e),u=a.map(k=>n.prepareRequest(k.designId,k.nodeIds)),c=await Promise.all(this._queues.previewsDescriptors.execMany(u)),p=n.ungroupResponses(c,a,e),E=this._queues.figmaS3.execMany(p);return Promise.all(E.map(async k=>Ye.Queue.safeValue(await k)))},drainLimit:null})}_initRenditionsDescriptorsQueue(e){return new Ye.Queue({name:"Renditions Descriptors",parallels:e.parser.config.parallels.renditions,factory:async n=>{const[a]=n,{url:u,options:c}=a,p=await this._parser.downloader.clientRequest(E=>E.post(u,c));return[Ye.Queue.safeValue(await p.json)]}})}_initRenditionsQueue(){return new Ye.Queue({name:"Renditions Merger",parallels:1,factory:async e=>{const n=this._parser.rm.renditions,u=n.groupRequests(e).map(k=>n.prepareRequest(k)),c=await Promise.all(this._queues.renditionsDescriptors.execMany(u)),p=n.ungroupResponses(c),E=Object.fromEntries(await Promise.all(Object.entries(p).map(async([k,$])=>{const B=await this._queues.figmaS3.exec($);return[k,B]})));return e.map(k=>Ye.Queue.safeValue(E[k]))},drainLimit:null})}_initLibrariesQueue(){return new Ye.Queue({name:"Libraries Queue",parallels:10,factory:async e=>{const[n]=e,a=await this._parser.downloader.getJSONSafe(this._parser.rm.library.prepareRequest(n));if(a.error)return[Ye.Queue.safeValue(null)];const u=a.value,c={designId:u.meta.file_key,nodeId:u.meta.node_id},p=await this._queues.partialSync.exec(c),E=st(Te({},c),{component:p});return[Ye.Queue.safeValue(E)]}})}get queues(){return this._queues}}Ki.QueuesManager=EP;var Ji={},Zi={},er={};Object.defineProperty(er,"__esModule",{value:!0}),er.buildEndpoint=void 0;const CP=wt;function xP(t,e){const n=Object(e),a=(0,CP.keys)(n).reduce((u,c)=>{const p=n[c],E=Array.isArray(p)?p.join(","):String(p);return u.replace(new RegExp(`:${c}`,"gi"),E)},t);if(/:[a-zA-Z]/.test(a))throw new Error(`Endpoint pattern still contains markers, please apply all parameters: ${a}`);return a}er.buildEndpoint=xP;var tr={};Object.defineProperty(tr,"__esModule",{value:!0}),tr.EndpointBase=void 0;class OP{constructor(e){this._requestsManager=e.requestsManager}get config(){return this._requestsManager.parser.config}get downloader(){return this._requestsManager.parser.downloader}get rm(){return this._requestsManager.parser.rm}get qm(){return this._requestsManager.parser.qm}}tr.EndpointBase=OP,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.FileEndpoint=void 0;const Mc=er,TP=tr;class Dn extends TP.EndpointBase{constructor(e){super(e)}prepareRequest(e){const{EP_PERSONAL:n,EP_BASE64:a}=Dn,{isBase64Token:u,host:c,token:p}=this.config;return u?(0,Mc.buildEndpoint)(a,{host:c,token:p}):(0,Mc.buildEndpoint)(n,{host:c,designId:e})}}Zi.FileEndpoint=Dn,Dn.EP_PERSONAL="https://:host/v1/files/:designId",Dn.EP_BASE64="https://:host/v1/file/?token=:token";var Xi={};Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.FillsEndpoint=void 0;const $c=er,PP=tr;class Fn extends PP.EndpointBase{constructor(e){super(e)}prepareRequest(e){const{EP_PERSONAL:n,EP_BASE64:a}=Fn,{isBase64Token:u,host:c,token:p}=this.config;return u?(0,$c.buildEndpoint)(a,{host:c,designId:e,token:p}):(0,$c.buildEndpoint)(n,{host:c,designId:e})}}Xi.FillsEndpoint=Fn,Fn.EP_PERSONAL="https://:host/v1/files/:designId/images/",Fn.EP_BASE64="https://:host/v1/files/:designId/images/?token=:token";var Qi={};Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.LibraryEndpoint=void 0;const Nc=er,IP=tr;class zn extends IP.EndpointBase{constructor(e){super(e)}prepareRequest(e){const{EP_PERSONAL:n,EP_BASE64:a}=zn,{isBase64Token:u,host:c,token:p}=this.config;return u?(0,Nc.buildEndpoint)(a,{host:c,componentId:e}):(0,Nc.buildEndpoint)(n,{host:c,componentId:e,token:p})}}Qi.LibraryEndpoint=zn,zn.EP_PERSONAL="https://:host/v1/components/:componentId",zn.EP_BASE64="https://:host/v1/components/:componentId?token=:token";var es={};function AP(t,e,n){var a=-1,u=t.length;e<0&&(e=-e>u?0:u+e),n=n>u?u:n,n<0&&(n+=u),u=e>n?0:n-e>>>0,e>>>=0;for(var c=Array(u);++a<u;)c[a]=t[a+e];return c}var kP=AP,LP=Da,RP=wc,MP=ja,$P=Rn;function NP(t,e,n){if(!$P(n))return!1;var a=typeof e;return(a=="number"?RP(n)&&MP(e,n.length):a=="string"&&e in n)?LP(n[e],t):!1}var DP=NP,FP=/\s/;function zP(t){for(var e=t.length;e--&&FP.test(t.charAt(e)););return e}var jP=zP,BP=jP,qP=/^\s+/;function UP(t){return t&&t.slice(0,BP(t)+1).replace(qP,"")}var HP=UP,VP=HP,Dc=Rn,GP=Ai,Fc=0/0,WP=/^[-+]0x[0-9a-f]+$/i,KP=/^0b[01]+$/i,YP=/^0o[0-7]+$/i,JP=parseInt;function ZP(t){if(typeof t=="number")return t;if(GP(t))return Fc;if(Dc(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Dc(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=VP(t);var n=KP.test(t);return n||YP.test(t)?JP(t.slice(2),n?2:8):WP.test(t)?Fc:+t}var XP=ZP,QP=XP,zc=1/0,eI=17976931348623157e292;function tI(t){if(!t)return t===0?t:0;if(t=QP(t),t===zc||t===-zc){var e=t<0?-1:1;return e*eI}return t===t?t:0}var rI=tI,nI=rI;function iI(t){var e=nI(t),n=e%1;return e===e?n?e-n:e:0}var sI=iI,aI=kP,oI=DP,uI=sI,lI=Math.ceil,cI=Math.max;function fI(t,e,n){(n?oI(t,e,n):e===void 0)?e=1:e=cI(uI(e),0);var a=t==null?0:t.length;if(!a||e<1)return[];for(var u=0,c=0,p=Array(lI(a/e));u<a;)p[c++]=aI(t,u,u+=e);return p}var Ka=fI,hI=ce&&ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(es,"__esModule",{value:!0}),es.NodesEndpoint=void 0;const dI=hI(Ka),Ya=wt,jc=er,_I=tr;class jn extends _I.EndpointBase{constructor(e){super(e)}prepareRequest(e,n){const{EP_PERSONAL:a,EP_BASE64:u}=jn,{isBase64Token:c,host:p,token:E}=this.config;return c?(0,jc.buildEndpoint)(u,{host:p,designId:e,ids:n,token:E}):(0,jc.buildEndpoint)(a,{host:p,designId:e,ids:n})}groupRequests(e){const n=e.reduce((a,{designId:u,nodeId:c})=>(a[u]||(a[u]=[]),a[u].push(c),a),{});return(0,Ya.keys)(n).reduce((a,u)=>{const c=(0,dI.default)(n[u],this.config.parallels.nodes).map(p=>({designId:u,nodeIds:p}));return a.push(...c),a},[])}ungroupResponses(e,n,a){const u=e.reduce((c,p,E)=>{var k;const{designId:$}=n[E],B=(0,Ya.isObject)(p==null?void 0:p.nodes)?(0,Ya.keys)(p.nodes):[],j=Object.fromEntries(B.map(Y=>{var R;return[Y,(R=p==null?void 0:p.nodes)===null||R===void 0?void 0:R[Y]]}));return c[$]=Te(Te({},(k=c[$])!==null&&k!==void 0?k:{}),j),c},{});return a.map(({nodeId:c,designId:p})=>u[p][c])}}es.NodesEndpoint=jn,jn.EP_PERSONAL="https://:host/v1/files/:designId/nodes/?ids=:ids&geometry=paths",jn.EP_BASE64="https://:host/v1/files/:designId/nodes/?ids=:ids&token=:token&geometry=paths";var ts={},gI=ce&&ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ts,"__esModule",{value:!0}),ts.PreviewsEndpoint=void 0;const pI=gI(Ka),Ja=wt,Bc=er,vI=tr;class Bn extends vI.EndpointBase{constructor(e){super(e)}_splitPreviewTargetIds(e){return e.reduce((a,u)=>{const c=a[a.length-1]||[],p=c.reduce((E,k)=>E+k.getPixelsArea(),0);return u.getPixelsArea()+p>this.config.pixelsLimit?[...a,[u]]:[...a.slice(0,-1),[...c,u]]},[]).reduce((a,u)=>{const c=u.map(p=>p.id);return[...a,...(0,pI.default)(c,300)]},[])}prepareRequest(e,n){const{EP_PERSONAL:a,EP_BASE64:u}=Bn,{isBase64Token:c,host:p,token:E}=this.config;return c?(0,Bc.buildEndpoint)(u,{host:p,designId:e,slicedIds:n,token:E}):(0,Bc.buildEndpoint)(a,{host:p,designId:e,slicedIds:n})}groupRequests(e){const n=e.reduce((a,u)=>(a[u.designId]||(a[u.designId]=[]),a[u.designId].push(u),a),{});return(0,Ja.keys)(n).reduce((a,u)=>{const p=this._splitPreviewTargetIds(n[u]).map(E=>({designId:u,nodeIds:E}));return a.push(...p),a},[])}ungroupResponses(e,n,a){const u=e.reduce((c,p,E)=>{var k;const{designId:$}=n[E],B=(0,Ja.isObject)(p==null?void 0:p.images)?(0,Ja.keys)(p.images):[],j=Object.fromEntries(B.map(Y=>{var R;return[Y,(R=p==null?void 0:p.images)===null||R===void 0?void 0:R[Y]]}));return c[$]=Te(Te({},(k=c[$])!==null&&k!==void 0?k:{}),j),c},{});return a.map(({nodeId:c,designId:p})=>u[p][c])}}ts.PreviewsEndpoint=Bn,Bn.EP_PERSONAL="https://:host/v1/images/:designId?ids=:slicedIds",Bn.EP_BASE64="https://:host/v1/images/?token=:token&ids=:slicedIds";var rs={},mI=ce&&ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rs,"__esModule",{value:!0}),rs.RenditionsEndpoint=void 0;const yI=mI(Ka),bI=er,wI=tr;class ns extends wI.EndpointBase{constructor(e){super(e)}prepareRequest(e){const{EP:n}=ns,{isBase64Token:a,host:u,token:c}=this.config,p=a?{token:c}:{},E={mutation_type:"set_relative_transform",value:[[1,0,0],[0,1,0]]},k=st(Te({},p),{requests:e.map(B=>({node_id:B,mutations:[Te({node_id:B},E)]}))});return{url:(0,bI.buildEndpoint)(n,{host:u}),options:{headers:{"X-Figma-Token":this.rm.parser.config.token,"User-Agent":"Avocode"},json:k}}}groupRequests(e){return(0,yI.default)(e,this.config.renditionNodes)}ungroupResponses(e){return e.reduce((n,a)=>{const u=Object.fromEntries(a==null?void 0:a.images.map(c=>[c.node_id,c.image]));return Te(Te({},u),n)},{})}}rs.RenditionsEndpoint=ns,ns.EP="https://:host/v1/images/",Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.RequestsManager=void 0;const SI=Zi,EI=Xi,CI=Qi,xI=es,OI=ts,TI=rs;class PI{constructor(e){this._parser=e.parser,this._endpoints={file:new SI.FileEndpoint({requestsManager:this}),nodes:new xI.NodesEndpoint({requestsManager:this}),fills:new EI.FillsEndpoint({requestsManager:this}),previews:new OI.PreviewsEndpoint({requestsManager:this}),renditions:new TI.RenditionsEndpoint({requestsManager:this}),library:new CI.LibraryEndpoint({requestsManager:this})}}get parser(){return this._parser}get file(){return this._endpoints.file}get nodes(){return this._endpoints.nodes}get fills(){return this._endpoints.fills}get previews(){return this._endpoints.previews}get renditions(){return this._endpoints.renditions}get library(){return this._endpoints.library}}Ji.RequestsManager=PI;var II=ce&&ce.__decorate||function(t,e,n,a){var u=arguments.length,c=u<3?e:a===null?a=Object.getOwnPropertyDescriptor(e,n):a,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(t,e,n,a);else for(var E=t.length-1;E>=0;E--)(p=t[E])&&(c=(u<3?p(c):u>3?p(e,n,c):p(e,n))||c);return u>3&&c&&Object.defineProperty(e,n,c),c},qc=ce&&ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.Parser=void 0;const AI=xi,kI=An,Za=Oi,LI=qc(Wa),Xa=Ir,RI=Ki,MI=Ji,$I=wt,NI=qc(Qr);class Uc{constructor(e){this._setGlobals(e),this._config=new LI.default(e),this._services=this._initServices(e),this._cachedFile=null}static getLogger(){return Za.logger}get config(){return this._config}get services(){return this._services}get downloader(){return this._services.downloader}get rm(){return this._services.requestsManager}get qm(){return this._services.queuesManager}_initServices(e){var n;return{downloader:(0,Xa.getPlatformFactories)().createDownloader({parser:this}),benchmarksTracker:(0,Xa.getPlatformFactories)().createBenchmarksTracker(),requestsManager:new MI.RequestsManager({parser:this}),queuesManager:new RI.QueuesManager({parser:this}),cacher:(n=e.cacher)!==null&&n!==void 0?n:null}}_setGlobals(e){var n,a,u;"createEnvironment"in e.platformFactories&&((u=(a=(n=e.platformFactories).createEnvironment)===null||a===void 0?void 0:a.call(n))===null||u===void 0||u()),(0,Xa.setPlatformFactories)(e.platformFactories),(0,Za.setDefaults)(),(0,$I.isObject)(e.logger)&&(0,Za.setLogger)(e.logger)}async getFrameLikeIds(){const e=this.rm.file.prepareRequest(this.config.designId),n=await this.downloader.getJSON(e);return this._cachedFile=new kI.File({file:n}),this._cachedFile.getNamedFrameLikeIds()}parse(e){return Array.isArray(e)&&this._config.setIds(e),new AI.Design({designId:this.config.designId,parser:this,cachedFile:this._cachedFile})}}II([(0,NI.default)()],Uc.prototype,"getFrameLikeIds",null),Ci.Parser=Uc;var Qa={},eo={};Object.defineProperty(eo,"__esModule",{value:!0});class DI{constructor(e){this._responseTimings={start:e.start,end:e.end,total:e.total},this._requestUrl=e.url}export(){return{start:this._responseTimings.start,end:this._responseTimings.end,total:this._responseTimings.total,task:this._requestUrl}}}eo.default=DI;var to={};Object.defineProperty(to,"__esModule",{value:!0});class FI{constructor(e){this._label=e,this._start=performance.now(),this._end=null}end(){return this._end=performance.now(),this._end-this._start}export(){return this._end===null?null:[this._label,this._end-this._start]}}to.default=FI;var ro=ce&&ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qa,"__esModule",{value:!0});const zI=ro(Ti),Hc=ro(eo),Vc=ro(to);class jI{constructor(){this._benchmarks=[]}trackHttpResponse(e){const n=new Hc.default(e);this._benchmarks.push(n)}async trackAsync(e,n){const a=new Vc.default(e);this._benchmarks.push(a);const u=await n();return a.end(),u}get requestsBenchmarks(){return this._benchmarks.filter(e=>e instanceof Hc.default)}get simpleBenchmarks(){const e=this._benchmarks.filter(n=>n instanceof Vc.default);return(0,zI.default)(e.map(n=>n.export()).filter(n=>n))}}Qa.default=jI;var is={};class no extends Error{constructor(e,n,a){const u=e.status||e.status===0?e.status:"",c=e.statusText||"",p=`${u} ${c}`.trim(),E=p?`status code ${p}`:"an unknown error";super(`Request failed with ${E}`),this.name="HTTPError",this.response=e,this.request=n,this.options=a}}class io extends Error{constructor(e){super("Request timed out"),this.name="TimeoutError",this.request=e}}const ss=t=>t!==null&&typeof t=="object",as=(...t)=>{for(const e of t)if((!ss(e)||Array.isArray(e))&&typeof e!="undefined")throw new TypeError("The `options` argument must be an object");return so({},...t)},Gc=(t={},e={})=>{const n=new globalThis.Headers(t),a=e instanceof globalThis.Headers,u=new globalThis.Headers(e);for(const[c,p]of u.entries())a&&p==="undefined"||p===void 0?n.delete(c):n.set(c,p);return n},so=(...t)=>{let e={},n={};for(const a of t)if(Array.isArray(a))Array.isArray(e)||(e=[]),e=[...e,...a];else if(ss(a)){for(let[u,c]of Object.entries(a))ss(c)&&u in e&&(c=so(e[u],c)),e=st(Te({},e),{[u]:c});ss(a.headers)&&(n=Gc(n,a.headers),e.headers=n)}return e},BI=typeof globalThis.AbortController=="function",qI=typeof globalThis.ReadableStream=="function",UI=typeof globalThis.FormData=="function",Wc=["get","post","put","patch","head","delete"],HI={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},ao=2147483647,Kc=Symbol("stop"),VI=t=>Wc.includes(t)?t.toUpperCase():t,GI=["get","put","head","delete","options","trace"],WI=[408,413,429,500,502,503,504],Yc=[413,429,503],Jc={limit:2,methods:GI,statusCodes:WI,afterStatusCodes:Yc,maxRetryAfter:Number.POSITIVE_INFINITY},KI=(t={})=>{if(typeof t=="number")return st(Te({},Jc),{limit:t});if(t.methods&&!Array.isArray(t.methods))throw new Error("retry.methods must be an array");if(t.statusCodes&&!Array.isArray(t.statusCodes))throw new Error("retry.statusCodes must be an array");return st(Te(Te({},Jc),t),{afterStatusCodes:Yc})},YI=async(t,e,n)=>new Promise((a,u)=>{const c=setTimeout(()=>{e&&e.abort(),u(new io(t))},n.timeout);n.fetch(t).then(a).catch(u).then(()=>{clearTimeout(c)})}),JI=async t=>new Promise(e=>{setTimeout(e,t)});class os{constructor(e,n={}){var a,u,c;if(this._retryCount=0,this._input=e,this._options=st(Te({credentials:this._input.credentials||"same-origin"},n),{headers:Gc(this._input.headers,n.headers),hooks:so({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},n.hooks),method:VI((a=n.method)!==null&&a!==void 0?a:this._input.method),prefixUrl:String(n.prefixUrl||""),retry:KI(n.retry),throwHttpErrors:n.throwHttpErrors!==!1,timeout:typeof n.timeout=="undefined"?1e4:n.timeout,fetch:(u=n.fetch)!==null&&u!==void 0?u:globalThis.fetch.bind(globalThis)}),typeof this._input!="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input=="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(BI&&(this.abortController=new globalThis.AbortController,this._options.signal&&this._options.signal.addEventListener("abort",()=>{this.abortController.abort()}),this._options.signal=this.abortController.signal),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const p=typeof this._options.searchParams=="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString(),E="?"+p,k=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,E);(UI&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(k,this.request),this._options)}this._options.json!==void 0&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type",(c=this._options.headers.get("content-type"))!==null&&c!==void 0?c:"application/json"),this.request=new globalThis.Request(this.request,{body:this._options.body}))}static create(e,n){const a=new os(e,n),u=async()=>{if(a._options.timeout>ao)throw new RangeError(`The \`timeout\` option cannot be greater than ${ao}`);await Promise.resolve();let E=await a._fetch();for(const k of a._options.hooks.afterResponse){const $=await k(a.request,a._options,a._decorateResponse(E.clone()));$ instanceof globalThis.Response&&(E=$)}if(a._decorateResponse(E),!E.ok&&a._options.throwHttpErrors){let k=new no(E,a.request,a._options);for(const $ of a._options.hooks.beforeError)k=await $(k);throw k}if(a._options.onDownloadProgress){if(typeof a._options.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!qI)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return a._stream(E.clone(),a._options.onDownloadProgress)}return E},p=a._options.retry.methods.includes(a.request.method.toLowerCase())?a._retry(u):u();for(const[E,k]of Object.entries(HI))p[E]=async()=>{a.request.headers.set("accept",a.request.headers.get("accept")||k);const B=(await p).clone();if(E==="json"){if(B.status===204)return"";if(n.parseJson)return n.parseJson(await B.text())}return B[E]()};return p}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(e instanceof io)){if(e instanceof no){if(!this._options.retry.statusCodes.includes(e.response.status))return 0;const a=e.response.headers.get("Retry-After");if(a&&this._options.retry.afterStatusCodes.includes(e.response.status)){let u=Number(a);return Number.isNaN(u)?u=Date.parse(a)-Date.now():u*=1e3,typeof this._options.retry.maxRetryAfter!="undefined"&&u>this._options.retry.maxRetryAfter?0:u}if(e.response.status===413)return 0}return .3*2**(this._retryCount-1)*1e3}return 0}_decorateResponse(e){return this._options.parseJson&&(e.json=async()=>this._options.parseJson(await e.text())),e}async _retry(e){try{return await e()}catch(n){const a=Math.min(this._calculateRetryDelay(n),ao);if(a!==0&&this._retryCount>0){await JI(a);for(const u of this._options.hooks.beforeRetry)if(await u({request:this.request,options:this._options,error:n,retryCount:this._retryCount})===Kc)return;return this._retry(e)}throw n}}async _fetch(){for(const e of this._options.hooks.beforeRequest){const n=await e(this.request,this._options);if(n instanceof Request){this.request=n;break}if(n instanceof Response)return n}return this._options.timeout===!1?this._options.fetch(this.request.clone()):YI(this.request.clone(),this.abortController,this._options)}_stream(e,n){const a=Number(e.headers.get("content-length"))||0;let u=0;return new globalThis.Response(new globalThis.ReadableStream({async start(c){const p=e.body.getReader();n&&n({percent:0,transferredBytes:0,totalBytes:a},new Uint8Array);async function E(){const{done:k,value:$}=await p.read();if(k){c.close();return}if(n){u+=$.byteLength;const B=a===0?0:u/a;n({percent:B,transferredBytes:u,totalBytes:a},$)}c.enqueue($),await E()}await E()}}))}}/*! MIT License © Sindre Sorhus */const oo=t=>{const e=(n,a)=>os.create(n,as(t,a));for(const n of Wc)e[n]=(a,u)=>os.create(a,as(t,u,{method:n}));return e.create=n=>oo(as(n)),e.extend=n=>oo(as(t,n)),e.stop=Kc,e},ZI=oo();var XI=Object.freeze(Object.defineProperty({__proto__:null,default:ZI,HTTPError:no,TimeoutError:io},Symbol.toStringTag,{value:"Module"})),QI=vt(XI),us={};Object.defineProperty(us,"__esModule",{value:!0}),us.ResponseWeb=void 0;class eA{constructor(e){this._body=e}get text(){return this._body.text()}get buffer(){return this._body.arrayBuffer()}get json(){return this._body.json()}}us.ResponseWeb=eA;var tA=ce&&ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(is,"__esModule",{value:!0}),is.DownloaderWeb=void 0;const Zc=tA(QI),dt=Oi,Xc=Ar,tn=us;class rA{constructor(e){this._parser=e.parser,this._benchmarks=new WeakMap,this._client=this._initClient(),this._pureClient=this._initPureClient(),this._cache=new Map}get parser(){return this._parser}get raw(){return this._client}_getAuthHeaders(){return this.parser.config.isPersonalToken?{[this.parser.config.figmaTokenHeader]:this.parser.config.token}:this.parser.config.isOAuth2Token?{Authorization:`Bearer ${this.parser.config.token}`}:null}_initClient(){const e=this._getAuthHeaders(),n=Te({"User-Agent":"Avocode"},e),a={limit:this.parser.config.downloaderRetries,statusCodes:[408,413,429,500,502,503,504,521,522,524]},Y={beforeRequest:[R=>{var Z;this.parser.config.isVerbose&&((Z=dt.logger===null||dt.logger===void 0?void 0:dt.logger.info)===null||Z===void 0||Z.call(dt.logger,`[${R.method}] ${R.url}`))},R=>{this._benchmarks.set(R,{start:performance.now(),end:0})},R=>{const Z=this._cache.get(R.url);if(Z)return Z.promise;this._cache.set(R.url,(0,Xc.detachPromiseControls)())}],afterResponse:[(R,Z,Q)=>{const ae=this._cache.get(R.url);ae==null||ae.resolve(Q)},(R,Z,Q)=>{const ae=this._benchmarks.get(R),le=ae?{start:ae.start,end:ae.end,total:ae.end-ae.start,url:R.url}:{start:0,end:0,total:0,url:R.url};return this.parser.services.benchmarksTracker.trackHttpResponse(le),Q},(R,Z,Q)=>{var ae;return Q.status!==200&&this.parser.config.isVerbose&&((ae=dt.logger===null||dt.logger===void 0?void 0:dt.logger.error)===null||ae===void 0||ae.call(dt.logger,`Received different http response code than 200: ${Q.status} on ${Q.url}`)),Q}]};return Zc.default.extend({headers:n,retry:a,hooks:Y})}_initPureClient(){const e={limit:this.parser.config.downloaderRetries,statusCodes:[408,413,429,500,502,503,504,521,522,524]},B={beforeRequest:[j=>{var Y;this.parser.config.isVerbose&&((Y=dt.logger===null||dt.logger===void 0?void 0:dt.logger.info)===null||Y===void 0||Y.call(dt.logger,`[${j.method}] ${j.url}`))},j=>{this._benchmarks.set(j,{start:performance.now(),end:0})},j=>{const Y=this._cache.get(j.url);if(Y)return Y.promise;this._cache.set(j.url,(0,Xc.detachPromiseControls)())}],afterResponse:[(j,Y,R)=>{const Z=this._cache.get(j.url);Z==null||Z.resolve(R)},(j,Y,R)=>{const Z=this._benchmarks.get(j),Q=Z?{start:Z.start,end:Z.end,total:Z.end-Z.start,url:j.url}:{start:0,end:0,total:0,url:j.url};return this.parser.services.benchmarksTracker.trackHttpResponse(Q),R},(j,Y,R)=>{var Z;return R.status!==200&&this.parser.config.isVerbose&&((Z=dt.logger===null||dt.logger===void 0?void 0:dt.logger.error)===null||Z===void 0||Z.call(dt.logger,`Received different http response code than 200: ${R.status} on ${R.url}`)),R}]};return Zc.default.extend({retry:e,hooks:B})}async getOne(e){return new tn.ResponseWeb(await this._client.get(e))}getOneSafe(e){return this._client.get(e).then(n=>({value:new tn.ResponseWeb(n),error:null}),n=>({value:void 0,error:n}))}async getText(e){return(await this.getOne(e)).text}async getTextSafe(e){return this.getText(e).then(n=>({value:n,error:null}),n=>({value:void 0,error:n}))}async getBuffer(e){return(await this.getOne(e)).buffer}async getBufferSafe(e){return this.getBuffer(e).then(n=>({value:n,error:null}),n=>({value:void 0,error:n}))}async getJSON(e){return(await this.getOne(e)).json}async getJSONSafe(e){return this.getJSON(e).then(n=>({value:n,error:null}),n=>({value:void 0,error:n}))}async clientRequest(e){return new tn.ResponseWeb(await e(this.raw))}async clientRequestSafe(e){return e(this.raw).then(n=>({value:new tn.ResponseWeb(n),error:null}),n=>({value:void 0,error:n}))}async rawRequest(e){return new tn.ResponseWeb(await e(this._pureClient))}async rawRequestSafe(e){return e(this._pureClient).then(n=>({value:new tn.ResponseWeb(n),error:null}),n=>({value:void 0,error:n}))}}is.DownloaderWeb=rA;var ls={};function nA(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var iA=sA;function sA(t,e,n){var a=n&&n.stringify||nA,u=1;if(typeof t=="object"&&t!==null){var c=e.length+u;if(c===1)return t;var p=new Array(c);p[0]=a(t);for(var E=1;E<c;E++)p[E]=a(e[E]);return p.join(" ")}if(typeof t!="string")return t;var k=e.length;if(k===0)return t;for(var $="",B=1-u,j=-1,Y=t&&t.length||0,R=0;R<Y;){if(t.charCodeAt(R)===37&&R+1<Y){switch(j=j>-1?j:0,t.charCodeAt(R+1)){case 100:case 102:if(B>=k||e[B]==null)break;j<R&&($+=t.slice(j,R)),$+=Number(e[B]),j=R+2,R++;break;case 105:if(B>=k||e[B]==null)break;j<R&&($+=t.slice(j,R)),$+=Math.floor(Number(e[B])),j=R+2,R++;break;case 79:case 111:case 106:if(B>=k||e[B]===void 0)break;j<R&&($+=t.slice(j,R));var Z=typeof e[B];if(Z==="string"){$+="'"+e[B]+"'",j=R+2,R++;break}if(Z==="function"){$+=e[B].name||"<anonymous>",j=R+2,R++;break}$+=a(e[B]),j=R+2,R++;break;case 115:if(B>=k)break;j<R&&($+=t.slice(j,R)),$+=String(e[B]),j=R+2,R++;break;case 37:j<R&&($+=t.slice(j,R)),$+="%",j=R+2,R++,B--;break}++B}++R}return j===-1?t:(j<Y&&($+=t.slice(j)),$)}const Qc=iA;var aA=Wt;const qn=pA().console||{},oA={mapHttpRequest:fs,mapHttpResponse:fs,wrapRequestSerializer:lo,wrapResponseSerializer:lo,wrapErrorSerializer:lo,req:fs,res:fs,err:hA};function uA(t,e){return Array.isArray(t)?t.filter(function(a){return a!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Wt(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||qn;t.browser.write&&(t.browser.asObject=!0);const a=t.serializers||{},u=uA(t.browser.serialize,a);let c=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(c=!1);const p=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const E=t.level||"info",k=Object.create(n);k.log||(k.log=Un),Object.defineProperty(k,"levelVal",{get:B}),Object.defineProperty(k,"level",{get:j,set:Y});const $={transmit:e,serialize:u,asObject:t.browser.asObject,levels:p,timestamp:dA(t)};k.levels=Wt.levels,k.level=E,k.setMaxListeners=k.getMaxListeners=k.emit=k.addListener=k.on=k.prependListener=k.once=k.prependOnceListener=k.removeListener=k.removeAllListeners=k.listeners=k.listenerCount=k.eventNames=k.write=k.flush=Un,k.serializers=a,k._serialize=u,k._stdErrSerialize=c,k.child=R,e&&(k._logEvent=uo());function B(){return this.level==="silent"?1/0:this.levels.values[this.level]}function j(){return this._level}function Y(Z){if(Z!=="silent"&&!this.levels.values[Z])throw Error("unknown level "+Z);this._level=Z,rn($,k,"error","log"),rn($,k,"fatal","error"),rn($,k,"warn","error"),rn($,k,"info","log"),rn($,k,"debug","log"),rn($,k,"trace","log")}function R(Z,Q){if(!Z)throw new Error("missing bindings for child Pino");Q=Q||{},u&&Z.serializers&&(Q.serializers=Z.serializers);const ae=Q.serializers;if(u&&ae){var le=Object.assign({},a,ae),$e=t.browser.serialize===!0?Object.keys(le):u;delete Z.serializers,cs([Z],$e,le,this._stdErrSerialize)}function _e(Ce){this._childLevel=(Ce._childLevel|0)+1,this.error=nn(Ce,Z,"error"),this.fatal=nn(Ce,Z,"fatal"),this.warn=nn(Ce,Z,"warn"),this.info=nn(Ce,Z,"info"),this.debug=nn(Ce,Z,"debug"),this.trace=nn(Ce,Z,"trace"),le&&(this.serializers=le,this._serialize=$e),e&&(this._logEvent=uo([].concat(Ce._logEvent.bindings,Z)))}return _e.prototype=this,new _e(this)}return k}Wt.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},Wt.stdSerializers=oA,Wt.stdTimeFunctions=Object.assign({},{nullTime:ef,epochTime:tf,unixTime:_A,isoTime:gA});function rn(t,e,n,a){const u=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?Un:u[n]?u[n]:qn[n]||qn[a]||Un,lA(t,e,n)}function lA(t,e,n){!t.transmit&&e[n]===Un||(e[n]=function(a){return function(){const c=t.timestamp(),p=new Array(arguments.length),E=Object.getPrototypeOf&&Object.getPrototypeOf(this)===qn?qn:this;for(var k=0;k<p.length;k++)p[k]=arguments[k];if(t.serialize&&!t.asObject&&cs(p,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?a.call(E,cA(this,n,p,c)):a.apply(E,p),t.transmit){const $=t.transmit.level||e.level,B=Wt.levels.values[$],j=Wt.levels.values[n];if(j<B)return;fA(this,{ts:c,methodLevel:n,methodValue:j,transmitLevel:$,transmitValue:Wt.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},p)}}}(e[n]))}function cA(t,e,n,a){t._serialize&&cs(n,t._serialize,t.serializers,t._stdErrSerialize);const u=n.slice();let c=u[0];const p={};a&&(p.time=a),p.level=Wt.levels.values[e];let E=(t._childLevel|0)+1;if(E<1&&(E=1),c!==null&&typeof c=="object"){for(;E--&&typeof u[0]=="object";)Object.assign(p,u.shift());c=u.length?Qc(u.shift(),u):void 0}else typeof c=="string"&&(c=Qc(u.shift(),u));return c!==void 0&&(p.msg=c),p}function cs(t,e,n,a){for(const u in t)if(a&&t[u]instanceof Error)t[u]=Wt.stdSerializers.err(t[u]);else if(typeof t[u]=="object"&&!Array.isArray(t[u]))for(const c in t[u])e&&e.indexOf(c)>-1&&c in n&&(t[u][c]=n[c](t[u][c]))}function nn(t,e,n){return function(){const a=new Array(1+arguments.length);a[0]=e;for(var u=1;u<a.length;u++)a[u]=arguments[u-1];return t[n].apply(this,a)}}function fA(t,e,n){const a=e.send,u=e.ts,c=e.methodLevel,p=e.methodValue,E=e.val,k=t._logEvent.bindings;cs(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=u,t._logEvent.messages=n.filter(function($){return k.indexOf($)===-1}),t._logEvent.level.label=c,t._logEvent.level.value=p,a(c,t._logEvent,E),t._logEvent=uo(k)}function uo(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function hA(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function dA(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?ef:tf}function fs(){return{}}function lo(t){return t}function Un(){}function ef(){return!1}function tf(){return Date.now()}function _A(){return Math.round(Date.now()/1e3)}function gA(){return new Date(Date.now()).toISOString()}function pA(){function t(e){return typeof e!="undefined"&&e}try{return typeof globalThis!="undefined"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}var vA=ce&&ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ls,"__esModule",{value:!0}),ls.createLoggerWeb=void 0;const mA=vA(aA),yA=()=>(0,mA.default)({browser:{asObject:!0}});ls.createLoggerWeb=yA;var hs={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var co=function(t,e){return co=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)a.hasOwnProperty(u)&&(n[u]=a[u])},co(t,e)};function Hn(t,e){co(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ne=function(){return ne=Object.assign||function(e){for(var n,a=1,u=arguments.length;a<u;a++){n=arguments[a];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},ne.apply(this,arguments)};function bA(t,e){var n={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(t);u<a.length;u++)e.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(t,a[u])&&(n[a[u]]=t[a[u]]);return n}function Vn(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],a=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gn(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var a=n.call(t),u,c=[],p;try{for(;(e===void 0||e-- >0)&&!(u=a.next()).done;)c.push(u.value)}catch(E){p={error:E}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(p)throw p.error}}return c}function De(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Gn(arguments[e]));return t}var rr;(function(t){t.Ok="ok",t.Exited="exited",t.Crashed="crashed",t.Abnormal="abnormal"})(rr||(rr={}));var rf;(function(t){t.Ok="ok",t.Errored="errored",t.Crashed="crashed"})(rf||(rf={}));var Nt;(function(t){t.Fatal="fatal",t.Error="error",t.Warning="warning",t.Log="log",t.Info="info",t.Debug="debug",t.Critical="critical"})(Nt||(Nt={})),function(t){function e(n){switch(n){case"debug":return t.Debug;case"info":return t.Info;case"warn":case"warning":return t.Warning;case"error":return t.Error;case"fatal":return t.Fatal;case"critical":return t.Critical;case"log":default:return t.Log}}t.fromString=e}(Nt||(Nt={}));var hr;(function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.Invalid="invalid",t.Failed="failed"})(hr||(hr={})),function(t){function e(n){return n>=200&&n<300?t.Success:n===429?t.RateLimit:n>=400&&n<500?t.Invalid:n>=500?t.Failed:t.Unknown}t.fromHttpCode=e}(hr||(hr={}));var Dt;(function(t){t.BeforeSend="before_send",t.EventProcessor="event_processor",t.NetworkError="network_error",t.QueueOverflow="queue_overflow",t.RateLimitBackoff="ratelimit_backoff",t.SampleRate="sample_rate"})(Dt||(Dt={}));function wA(t){t.then(null,function(e){console.error(e)})}function fo(){return Object.prototype.toString.call(typeof process!="undefined"?process:0)==="[object process]"}function SA(t,e){return t.require(e)}var EA={};function Fe(){return fo()?global:typeof window!="undefined"?window:typeof self!="undefined"?self:EA}function nf(t){switch(Object.prototype.toString.call(t)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return dr(t,Error)}}function sf(t){return Object.prototype.toString.call(t)==="[object ErrorEvent]"}function af(t){return Object.prototype.toString.call(t)==="[object DOMError]"}function CA(t){return Object.prototype.toString.call(t)==="[object DOMException]"}function sn(t){return Object.prototype.toString.call(t)==="[object String]"}function ds(t){return t===null||typeof t!="object"&&typeof t!="function"}function an(t){return Object.prototype.toString.call(t)==="[object Object]"}function ho(t){return typeof Event!="undefined"&&dr(t,Event)}function of(t){return typeof Element!="undefined"&&dr(t,Element)}function xA(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function _o(t){return Boolean(t&&t.then&&typeof t.then=="function")}function OA(t){return an(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function dr(t,e){try{return t instanceof e}catch{return!1}}function _s(t,e){try{for(var n=t,a=5,u=80,c=[],p=0,E=0,k=" > ",$=k.length,B=void 0;n&&p++<a&&(B=TA(n,e),!(B==="html"||p>1&&E+c.length*$+B.length>=u));)c.push(B),E+=B.length,n=n.parentNode;return c.reverse().join(k)}catch{return"<unknown>"}}function TA(t,e){var n,a,u=t,c=[],p,E,k,$,B;if(!u||!u.tagName)return"";c.push(u.tagName.toLowerCase());var j=!((n=e)===null||n===void 0)&&n.length?e.filter(function(R){return u.getAttribute(R)}).map(function(R){return[R,u.getAttribute(R)]}):null;if(!((a=j)===null||a===void 0)&&a.length)j.forEach(function(R){c.push("["+R[0]+'="'+R[1]+'"]')});else if(u.id&&c.push("#"+u.id),p=u.className,p&&sn(p))for(E=p.split(/\s+/),B=0;B<E.length;B++)c.push("."+E[B]);var Y=["type","name","title","alt"];for(B=0;B<Y.length;B++)k=Y[B],$=u.getAttribute(k),$&&c.push("["+k+'="'+$+'"]');return c.join("")}function PA(){var t=Fe();try{return t.document.location.href}catch{return""}}var IA=Object.setPrototypeOf||({__proto__:[]}instanceof Array?AA:kA);function AA(t,e){return t.__proto__=e,t}function kA(t,e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t}var Je=function(t){Hn(e,t);function e(n){var a=this.constructor,u=t.call(this,n)||this;return u.message=n,u.name=a.prototype.constructor.name,IA(u,a.prototype),u}return e}(Error),LA=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,Wn="Invalid Dsn",uf=function(){function t(e){typeof e=="string"?this._fromString(e):this._fromComponents(e),this._validate()}return t.prototype.toString=function(e){e===void 0&&(e=!1);var n=this,a=n.host,u=n.path,c=n.pass,p=n.port,E=n.projectId,k=n.protocol,$=n.publicKey;return k+"://"+$+(e&&c?":"+c:"")+("@"+a+(p?":"+p:"")+"/"+(u&&u+"/")+E)},t.prototype._fromString=function(e){var n=LA.exec(e);if(!n)throw new Je(Wn);var a=Gn(n.slice(1),6),u=a[0],c=a[1],p=a[2],E=p===void 0?"":p,k=a[3],$=a[4],B=$===void 0?"":$,j=a[5],Y="",R=j,Z=R.split("/");if(Z.length>1&&(Y=Z.slice(0,-1).join("/"),R=Z.pop()),R){var Q=R.match(/^\d+/);Q&&(R=Q[0])}this._fromComponents({host:k,pass:E,path:Y,projectId:R,port:B,protocol:u,publicKey:c})},t.prototype._fromComponents=function(e){"user"in e&&!("publicKey"in e)&&(e.publicKey=e.user),this.user=e.publicKey||"",this.protocol=e.protocol,this.publicKey=e.publicKey||"",this.pass=e.pass||"",this.host=e.host,this.port=e.port||"",this.path=e.path||"",this.projectId=e.projectId},t.prototype._validate=function(){var e=this;if(["protocol","publicKey","host","projectId"].forEach(function(n){if(!e[n])throw new Je(Wn+": "+n+" missing")}),!this.projectId.match(/^\d+$/))throw new Je(Wn+": Invalid projectId "+this.projectId);if(this.protocol!=="http"&&this.protocol!=="https")throw new Je(Wn+": Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new Je(Wn+": Invalid port "+this.port)},t}(),kr=Fe(),go="Sentry Logger ";function gs(t){var e=Fe(),n=["debug","info","warn","error","log","assert"];if(!("console"in e))return t();var a=e.console,u={};n.forEach(function(p){p in e.console&&a[p].__sentry_original__&&(u[p]=a[p],a[p]=a[p].__sentry_original__)});var c=t();return Object.keys(u).forEach(function(p){a[p]=u[p]}),c}var RA=function(){function t(){this._enabled=!1}return t.prototype.disable=function(){this._enabled=!1},t.prototype.enable=function(){this._enabled=!0},t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!this._enabled||gs(function(){kr.console.log(go+"[Log]: "+e.join(" "))})},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!this._enabled||gs(function(){kr.console.warn(go+"[Warn]: "+e.join(" "))})},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!this._enabled||gs(function(){kr.console.error(go+"[Error]: "+e.join(" "))})},t}();kr.__SENTRY__=kr.__SENTRY__||{};var Pe=kr.__SENTRY__.logger||(kr.__SENTRY__.logger=new RA),MA=function(){function t(){this._hasWeakSet=typeof WeakSet=="function",this._inner=this._hasWeakSet?new WeakSet:[]}return t.prototype.memoize=function(e){if(this._hasWeakSet)return this._inner.has(e)?!0:(this._inner.add(e),!1);for(var n=0;n<this._inner.length;n++){var a=this._inner[n];if(a===e)return!0}return this._inner.push(e),!1},t.prototype.unmemoize=function(e){if(this._hasWeakSet)this._inner.delete(e);else for(var n=0;n<this._inner.length;n++)if(this._inner[n]===e){this._inner.splice(n,1);break}},t}(),po="<anonymous>";function _r(t){try{return!t||typeof t!="function"?po:t.name||po}catch{return po}}function Kn(t,e){return e===void 0&&(e=0),typeof t!="string"||e===0||t.length<=e?t:t.substr(0,e)+"..."}function lf(t,e){if(!Array.isArray(t))return"";for(var n=[],a=0;a<t.length;a++){var u=t[a];try{n.push(String(u))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function vo(t,e){return sn(t)?xA(e)?e.test(t):typeof e=="string"?t.indexOf(e)!==-1:!1:!1}function _t(t,e,n){if(e in t){var a=t[e],u=n(a);if(typeof u=="function")try{u.prototype=u.prototype||{},Object.defineProperties(u,{__sentry_original__:{enumerable:!1,value:a}})}catch{}t[e]=u}}function $A(t){return Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}function cf(t){if(nf(t)){var e=t,n={message:e.message,name:e.name,stack:e.stack};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}if(ho(t)){var u=t,c={};c.type=u.type;try{c.target=of(u.target)?_s(u.target):Object.prototype.toString.call(u.target)}catch{c.target="<unknown>"}try{c.currentTarget=of(u.currentTarget)?_s(u.currentTarget):Object.prototype.toString.call(u.currentTarget)}catch{c.currentTarget="<unknown>"}typeof CustomEvent!="undefined"&&dr(t,CustomEvent)&&(c.detail=u.detail);for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(c[p]=u[p]);return c}return t}function NA(t){return~-encodeURI(t).split(/%..|./).length}function DA(t){return NA(JSON.stringify(t))}function ff(t,e,n){e===void 0&&(e=3),n===void 0&&(n=100*1024);var a=on(t,e);return DA(a)>n?ff(t,e-1,n):a}function FA(t){var e=Object.prototype.toString.call(t);if(typeof t=="string")return t;if(e==="[object Object]")return"[Object]";if(e==="[object Array]")return"[Array]";var n=hf(t);return ds(n)?n:e}function hf(t,e){return e==="domain"&&t&&typeof t=="object"&&t._events?"[Domain]":e==="domainEmitter"?"[DomainEmitter]":typeof global!="undefined"&&t===global?"[Global]":typeof window!="undefined"&&t===window?"[Window]":typeof document!="undefined"&&t===document?"[Document]":OA(t)?"[SyntheticEvent]":typeof t=="number"&&t!==t?"[NaN]":t===void 0?"[undefined]":typeof t=="function"?"[Function: "+_r(t)+"]":typeof t=="symbol"?"["+String(t)+"]":typeof t=="bigint"?"[BigInt: "+String(t)+"]":t}function df(t,e,n,a){if(n===void 0&&(n=1/0),a===void 0&&(a=new MA),n===0)return FA(e);if(e!=null&&typeof e.toJSON=="function")return e.toJSON();var u=hf(e,t);if(ds(u))return u;var c=cf(e),p=Array.isArray(e)?[]:{};if(a.memoize(e))return"[Circular ~]";for(var E in c)!Object.prototype.hasOwnProperty.call(c,E)||(p[E]=df(E,c[E],n-1,a));return a.unmemoize(e),p}function on(t,e){try{return JSON.parse(JSON.stringify(t,function(n,a){return df(n,a,e)}))}catch{return"**non-serializable**"}}function zA(t,e){e===void 0&&(e=40);var n=Object.keys(cf(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return Kn(n[0],e);for(var a=n.length;a>0;a--){var u=n.slice(0,a).join(", ");if(!(u.length>e))return a===n.length?u:Kn(u,e)}return""}function ps(t){var e,n;if(an(t)){var a=t,u={};try{for(var c=Vn(Object.keys(a)),p=c.next();!p.done;p=c.next()){var E=p.value;typeof a[E]!="undefined"&&(u[E]=ps(a[E]))}}catch(k){e={error:k}}finally{try{p&&!p.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return u}return Array.isArray(t)?t.map(ps):t}function vs(){if(!("fetch"in Fe()))return!1;try{return new Headers,new Request(""),new Response,!0}catch{return!1}}function mo(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function jA(){if(!vs())return!1;var t=Fe();if(mo(t.fetch))return!0;var e=!1,n=t.document;if(n&&typeof n.createElement=="function")try{var a=n.createElement("iframe");a.hidden=!0,n.head.appendChild(a),a.contentWindow&&a.contentWindow.fetch&&(e=mo(a.contentWindow.fetch)),n.head.removeChild(a)}catch(u){Pe.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",u)}return e}function BA(){if(!vs())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch{return!1}}function qA(){var t=Fe(),e=t.chrome,n=e&&e.app&&e.app.runtime,a="history"in t&&!!t.history.pushState&&!!t.history.replaceState;return!n&&a}var ze=Fe(),Yn={},_f={};function UA(t){if(!_f[t])switch(_f[t]=!0,t){case"console":HA();break;case"dom":QA();break;case"xhr":KA();break;case"fetch":VA();break;case"history":YA();break;case"error":ek();break;case"unhandledrejection":tk();break;default:Pe.warn("unknown instrumentation type:",t)}}function gr(t){!t||typeof t.type!="string"||typeof t.callback!="function"||(Yn[t.type]=Yn[t.type]||[],Yn[t.type].push(t.callback),UA(t.type))}function Ft(t,e){var n,a;if(!(!t||!Yn[t]))try{for(var u=Vn(Yn[t]||[]),c=u.next();!c.done;c=u.next()){var p=c.value;try{p(e)}catch(E){Pe.error(`Error while triggering instrumentation handler.
Type: `+t+`
Name: `+_r(p)+`
Error: `+E)}}}catch(E){n={error:E}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}}function HA(){"console"in ze&&["debug","info","warn","error","log","assert"].forEach(function(t){t in ze.console&&_t(ze.console,t,function(e){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];Ft("console",{args:n,level:t}),e&&Function.prototype.apply.call(e,ze.console,n)}})})}function VA(){!jA()||_t(ze,"fetch",function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var a={args:e,fetchData:{method:GA(e),url:WA(e)},startTimestamp:Date.now()};return Ft("fetch",ne({},a)),t.apply(ze,e).then(function(u){return Ft("fetch",ne(ne({},a),{endTimestamp:Date.now(),response:u})),u},function(u){throw Ft("fetch",ne(ne({},a),{endTimestamp:Date.now(),error:u})),u})}})}function GA(t){return t===void 0&&(t=[]),"Request"in ze&&dr(t[0],Request)&&t[0].method?String(t[0].method).toUpperCase():t[1]&&t[1].method?String(t[1].method).toUpperCase():"GET"}function WA(t){return t===void 0&&(t=[]),typeof t[0]=="string"?t[0]:"Request"in ze&&dr(t[0],Request)?t[0].url:String(t[0])}function KA(){if("XMLHttpRequest"in ze){var t=[],e=[],n=XMLHttpRequest.prototype;_t(n,"open",function(a){return function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];var p=this,E=u[1];p.__sentry_xhr__={method:sn(u[0])?u[0].toUpperCase():u[0],url:u[1]},sn(E)&&p.__sentry_xhr__.method==="POST"&&E.match(/sentry_key/)&&(p.__sentry_own_request__=!0);var k=function(){if(p.readyState===4){try{p.__sentry_xhr__&&(p.__sentry_xhr__.status_code=p.status)}catch{}try{var $=t.indexOf(p);if($!==-1){t.splice($);var B=e.splice($)[0];p.__sentry_xhr__&&B[0]!==void 0&&(p.__sentry_xhr__.body=B[0])}}catch{}Ft("xhr",{args:u,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:p})}};return"onreadystatechange"in p&&typeof p.onreadystatechange=="function"?_t(p,"onreadystatechange",function($){return function(){for(var B=[],j=0;j<arguments.length;j++)B[j]=arguments[j];return k(),$.apply(p,B)}}):p.addEventListener("readystatechange",k),a.apply(p,u)}}),_t(n,"send",function(a){return function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];return t.push(this),e.push(u),Ft("xhr",{args:u,startTimestamp:Date.now(),xhr:this}),a.apply(this,u)}})}}var ms;function YA(){if(!qA())return;var t=ze.onpopstate;ze.onpopstate=function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var u=ze.location.href,c=ms;if(ms=u,Ft("history",{from:c,to:u}),t)try{return t.apply(this,n)}catch{}};function e(n){return function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];var c=a.length>2?a[2]:void 0;if(c){var p=ms,E=String(c);ms=E,Ft("history",{from:p,to:E})}return n.apply(this,a)}}_t(ze.history,"pushState",e),_t(ze.history,"replaceState",e)}var JA=1e3,ys,bs;function ZA(t,e){if(!t||t.type!==e.type)return!0;try{if(t.target!==e.target)return!0}catch{}return!1}function XA(t){if(t.type!=="keypress")return!1;try{var e=t.target;if(!e||!e.tagName)return!0;if(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable)return!1}catch{}return!0}function gf(t,e){return e===void 0&&(e=!1),function(n){if(!(!n||bs===n)&&!XA(n)){var a=n.type==="keypress"?"input":n.type;ys===void 0?(t({event:n,name:a,global:e}),bs=n):ZA(bs,n)&&(t({event:n,name:a,global:e}),bs=n),clearTimeout(ys),ys=ze.setTimeout(function(){ys=void 0},JA)}}}function QA(){if("document"in ze){var t=Ft.bind(null,"dom"),e=gf(t,!0);ze.document.addEventListener("click",e,!1),ze.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(function(n){var a=ze[n]&&ze[n].prototype;!a||!a.hasOwnProperty||!a.hasOwnProperty("addEventListener")||(_t(a,"addEventListener",function(u){return function(c,p,E){if(c==="click"||c=="keypress")try{var k=this,$=k.__sentry_instrumentation_handlers__=k.__sentry_instrumentation_handlers__||{},B=$[c]=$[c]||{refCount:0};if(!B.handler){var j=gf(t);B.handler=j,u.call(this,c,j,E)}B.refCount+=1}catch{}return u.call(this,c,p,E)}}),_t(a,"removeEventListener",function(u){return function(c,p,E){if(c==="click"||c=="keypress")try{var k=this,$=k.__sentry_instrumentation_handlers__||{},B=$[c];B&&(B.refCount-=1,B.refCount<=0&&(u.call(this,c,B.handler,E),B.handler=void 0,delete $[c]),Object.keys($).length===0&&delete k.__sentry_instrumentation_handlers__)}catch{}return u.call(this,c,p,E)}}))})}}var yo=null;function ek(){yo=ze.onerror,ze.onerror=function(t,e,n,a,u){return Ft("error",{column:a,error:u,line:n,msg:t,url:e}),yo?yo.apply(this,arguments):!1}}var bo=null;function tk(){bo=ze.onunhandledrejection,ze.onunhandledrejection=function(t){return Ft("unhandledrejection",t),bo?bo.apply(this,arguments):!0}}function un(){var t=Fe(),e=t.crypto||t.msCrypto;if(e!==void 0&&e.getRandomValues){var n=new Uint16Array(8);e.getRandomValues(n),n[3]=n[3]&4095|16384,n[4]=n[4]&16383|32768;var a=function(u){for(var c=u.toString(16);c.length<4;)c="0"+c;return c};return a(n[0])+a(n[1])+a(n[2])+a(n[3])+a(n[4])+a(n[5])+a(n[6])+a(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(u){var c=Math.random()*16|0,p=u==="x"?c:c&3|8;return p.toString(16)})}function wo(t){if(!t)return{};var e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};var n=e[6]||"",a=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],relative:e[5]+n+a}}function Lr(t){if(t.message)return t.message;if(t.exception&&t.exception.values&&t.exception.values[0]){var e=t.exception.values[0];return e.type&&e.value?e.type+": "+e.value:e.type||e.value||t.event_id||"<unknown>"}return t.event_id||"<unknown>"}function So(t,e,n){t.exception=t.exception||{},t.exception.values=t.exception.values||[],t.exception.values[0]=t.exception.values[0]||{},t.exception.values[0].value=t.exception.values[0].value||e||"",t.exception.values[0].type=t.exception.values[0].type||n||"Error"}function ln(t,e){var n;if(!(!t.exception||!t.exception.values)){var a=t.exception.values[0],u={type:"generic",handled:!0},c=a.mechanism;if(a.mechanism=ne(ne(ne({},u),c),e),e&&"data"in e){var p=ne(ne({},(n=c)===null||n===void 0?void 0:n.data),e.data);a.mechanism.data=p}}}var pf=60*1e3;function rk(t,e){if(!e)return pf;var n=parseInt(""+e,10);if(!isNaN(n))return n*1e3;var a=Date.parse(""+e);return isNaN(a)?pf:a-t}function vf(t){var e;if(!((e=t)===null||e===void 0)&&e.__sentry_captured__)return!0;try{Object.defineProperty(t,"__sentry_captured__",{value:!0})}catch{}return!1}var nr;(function(t){t.PENDING="PENDING",t.RESOLVED="RESOLVED",t.REJECTED="REJECTED"})(nr||(nr={}));var gt=function(){function t(e){var n=this;this._state=nr.PENDING,this._handlers=[],this._resolve=function(a){n._setResult(nr.RESOLVED,a)},this._reject=function(a){n._setResult(nr.REJECTED,a)},this._setResult=function(a,u){if(n._state===nr.PENDING){if(_o(u)){u.then(n._resolve,n._reject);return}n._state=a,n._value=u,n._executeHandlers()}},this._attachHandler=function(a){n._handlers=n._handlers.concat(a),n._executeHandlers()},this._executeHandlers=function(){if(n._state!==nr.PENDING){var a=n._handlers.slice();n._handlers=[],a.forEach(function(u){u.done||(n._state===nr.RESOLVED&&u.onfulfilled&&u.onfulfilled(n._value),n._state===nr.REJECTED&&u.onrejected&&u.onrejected(n._value),u.done=!0)})}};try{e(this._resolve,this._reject)}catch(a){this._reject(a)}}return t.resolve=function(e){return new t(function(n){n(e)})},t.reject=function(e){return new t(function(n,a){a(e)})},t.all=function(e){return new t(function(n,a){if(!Array.isArray(e)){a(new TypeError("Promise.all requires an array as input."));return}if(e.length===0){n([]);return}var u=e.length,c=[];e.forEach(function(p,E){t.resolve(p).then(function(k){c[E]=k,u-=1,u===0&&n(c)}).then(null,a)})})},t.prototype.then=function(e,n){var a=this;return new t(function(u,c){a._attachHandler({done:!1,onfulfilled:function(p){if(!e){u(p);return}try{u(e(p));return}catch(E){c(E);return}},onrejected:function(p){if(!n){c(p);return}try{u(n(p));return}catch(E){c(E);return}}})})},t.prototype.catch=function(e){return this.then(function(n){return n},e)},t.prototype.finally=function(e){var n=this;return new t(function(a,u){var c,p;return n.then(function(E){p=!1,c=E,e&&e()},function(E){p=!0,c=E,e&&e()}).then(function(){if(p){u(c);return}a(c)})})},t.prototype.toString=function(){return"[object SyncPromise]"},t}(),nk=function(){function t(e){this._limit=e,this._buffer=[]}return t.prototype.isReady=function(){return this._limit===void 0||this.length()<this._limit},t.prototype.add=function(e){var n=this;if(!this.isReady())return gt.reject(new Je("Not adding Promise due to buffer limit reached."));var a=e();return this._buffer.indexOf(a)===-1&&this._buffer.push(a),a.then(function(){return n.remove(a)}).then(null,function(){return n.remove(a).then(null,function(){})}),a},t.prototype.remove=function(e){var n=this._buffer.splice(this._buffer.indexOf(e),1)[0];return n},t.prototype.length=function(){return this._buffer.length},t.prototype.drain=function(e){var n=this;return new gt(function(a){var u=setTimeout(function(){e&&e>0&&a(!1)},e);gt.all(n._buffer).then(function(){clearTimeout(u),a(!0)}).then(null,function(){a(!0)})})},t}(),Eo={nowSeconds:function(){return Date.now()/1e3}};function ik(){var t=Fe().performance;if(!(!t||!t.now)){var e=Date.now()-t.now();return{now:function(){return t.now()},timeOrigin:e}}}function sk(){try{var t=SA(module,"perf_hooks");return t.performance}catch{return}}var Co=fo()?sk():ik(),mf=Co===void 0?Eo:{nowSeconds:function(){return(Co.timeOrigin+Co.now())/1e3}},ws=Eo.nowSeconds.bind(Eo),yf=mf.nowSeconds.bind(mf);(function(){var t=Fe().performance;if(!(!t||!t.now)){var e=3600*1e3,n=t.now(),a=Date.now(),u=t.timeOrigin?Math.abs(t.timeOrigin+n-a):e,c=u<e,p=t.timing&&t.timing.navigationStart,E=typeof p=="number",k=E?Math.abs(p+n-a):e,$=k<e;return c||$?u<=k?t.timeOrigin:p:a}})();var bf=100,Jn=function(){function t(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return t.clone=function(e){var n=new t;return e&&(n._breadcrumbs=De(e._breadcrumbs),n._tags=ne({},e._tags),n._extra=ne({},e._extra),n._contexts=ne({},e._contexts),n._user=e._user,n._level=e._level,n._span=e._span,n._session=e._session,n._transactionName=e._transactionName,n._fingerprint=e._fingerprint,n._eventProcessors=De(e._eventProcessors),n._requestSession=e._requestSession),n},t.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},t.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},t.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},t.prototype.getUser=function(){return this._user},t.prototype.getRequestSession=function(){return this._requestSession},t.prototype.setRequestSession=function(e){return this._requestSession=e,this},t.prototype.setTags=function(e){return this._tags=ne(ne({},this._tags),e),this._notifyScopeListeners(),this},t.prototype.setTag=function(e,n){var a;return this._tags=ne(ne({},this._tags),(a={},a[e]=n,a)),this._notifyScopeListeners(),this},t.prototype.setExtras=function(e){return this._extra=ne(ne({},this._extra),e),this._notifyScopeListeners(),this},t.prototype.setExtra=function(e,n){var a;return this._extra=ne(ne({},this._extra),(a={},a[e]=n,a)),this._notifyScopeListeners(),this},t.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},t.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},t.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},t.prototype.setTransaction=function(e){return this.setTransactionName(e)},t.prototype.setContext=function(e,n){var a;return n===null?delete this._contexts[e]:this._contexts=ne(ne({},this._contexts),(a={},a[e]=n,a)),this._notifyScopeListeners(),this},t.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},t.prototype.getSpan=function(){return this._span},t.prototype.getTransaction=function(){var e,n,a,u,c=this.getSpan();if(!((e=c)===null||e===void 0)&&e.transaction)return(n=c)===null||n===void 0?void 0:n.transaction;if(!((u=(a=c)===null||a===void 0?void 0:a.spanRecorder)===null||u===void 0)&&u.spans[0])return c.spanRecorder.spans[0]},t.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},t.prototype.getSession=function(){return this._session},t.prototype.update=function(e){if(!e)return this;if(typeof e=="function"){var n=e(this);return n instanceof t?n:this}return e instanceof t?(this._tags=ne(ne({},this._tags),e._tags),this._extra=ne(ne({},this._extra),e._extra),this._contexts=ne(ne({},this._contexts),e._contexts),e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):an(e)&&(e=e,this._tags=ne(ne({},this._tags),e.tags),this._extra=ne(ne({},this._extra),e.extra),this._contexts=ne(ne({},this._contexts),e.contexts),e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this},t.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},t.prototype.addBreadcrumb=function(e,n){var a=typeof n=="number"?Math.min(n,bf):bf;if(a<=0)return this;var u=ne({timestamp:ws()},e);return this._breadcrumbs=De(this._breadcrumbs,[u]).slice(-a),this._notifyScopeListeners(),this},t.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},t.prototype.applyToEvent=function(e,n){var a;if(this._extra&&Object.keys(this._extra).length&&(e.extra=ne(ne({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=ne(ne({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=ne(ne({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=ne(ne({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=ne({trace:this._span.getTraceContext()},e.contexts);var u=(a=this._span.transaction)===null||a===void 0?void 0:a.name;u&&(e.tags=ne({transaction:u},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=De(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,this._notifyEventProcessors(De(wf(),this._eventProcessors),e,n)},t.prototype._notifyEventProcessors=function(e,n,a,u){var c=this;return u===void 0&&(u=0),new gt(function(p,E){var k=e[u];if(n===null||typeof k!="function")p(n);else{var $=k(ne({},n),a);_o($)?$.then(function(B){return c._notifyEventProcessors(e,B,a,u+1).then(p)}).then(null,E):c._notifyEventProcessors(e,$,a,u+1).then(p).then(null,E)}})},t.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(function(n){n(e)}),this._notifyingListeners=!1)},t.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},t}();function wf(){var t=Fe();return t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.globalEventProcessors=t.__SENTRY__.globalEventProcessors||[],t.__SENTRY__.globalEventProcessors}function Zn(t){wf().push(t)}var ak=function(){function t(e){this.errors=0,this.sid=un(),this.duration=0,this.status=rr.Ok,this.init=!0,this.ignoreDuration=!1;var n=yf();this.timestamp=n,this.started=n,e&&this.update(e)}return t.prototype.update=function(e){if(e===void 0&&(e={}),e.user&&(!this.ipAddress&&e.user.ip_address&&(this.ipAddress=e.user.ip_address),!this.did&&!e.did&&(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||yf(),e.ignoreDuration&&(this.ignoreDuration=e.ignoreDuration),e.sid&&(this.sid=e.sid.length===32?e.sid:un()),e.init!==void 0&&(this.init=e.init),!this.did&&e.did&&(this.did=""+e.did),typeof e.started=="number"&&(this.started=e.started),this.ignoreDuration)this.duration=void 0;else if(typeof e.duration=="number")this.duration=e.duration;else{var n=this.timestamp-this.started;this.duration=n>=0?n:0}e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),!this.ipAddress&&e.ipAddress&&(this.ipAddress=e.ipAddress),!this.userAgent&&e.userAgent&&(this.userAgent=e.userAgent),typeof e.errors=="number"&&(this.errors=e.errors),e.status&&(this.status=e.status)},t.prototype.close=function(e){e?this.update({status:e}):this.status===rr.Ok?this.update({status:rr.Exited}):this.update()},t.prototype.toJSON=function(){return ps({sid:""+this.sid,init:this.init,started:new Date(this.started*1e3).toISOString(),timestamp:new Date(this.timestamp*1e3).toISOString(),status:this.status,errors:this.errors,did:typeof this.did=="number"||typeof this.did=="string"?""+this.did:void 0,duration:this.duration,attrs:ps({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},t}(),xo=4,ok=100,Ss=function(){function t(e,n,a){n===void 0&&(n=new Jn),a===void 0&&(a=xo),this._version=a,this._stack=[{}],this.getStackTop().scope=n,e&&this.bindClient(e)}return t.prototype.isOlderThan=function(e){return this._version<e},t.prototype.bindClient=function(e){var n=this.getStackTop();n.client=e,e&&e.setupIntegrations&&e.setupIntegrations()},t.prototype.pushScope=function(){var e=Jn.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},t.prototype.popScope=function(){return this.getStack().length<=1?!1:!!this.getStack().pop()},t.prototype.withScope=function(e){var n=this.pushScope();try{e(n)}finally{this.popScope()}},t.prototype.getClient=function(){return this.getStackTop().client},t.prototype.getScope=function(){return this.getStackTop().scope},t.prototype.getStack=function(){return this._stack},t.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},t.prototype.captureException=function(e,n){var a=this._lastEventId=un(),u=n;if(!n){var c=void 0;try{throw new Error("Sentry syntheticException")}catch(p){c=p}u={originalException:e,syntheticException:c}}return this._invokeClient("captureException",e,ne(ne({},u),{event_id:a})),a},t.prototype.captureMessage=function(e,n,a){var u=this._lastEventId=un(),c=a;if(!a){var p=void 0;try{throw new Error(e)}catch(E){p=E}c={originalException:e,syntheticException:p}}return this._invokeClient("captureMessage",e,n,ne(ne({},c),{event_id:u})),u},t.prototype.captureEvent=function(e,n){var a=un();return e.type!=="transaction"&&(this._lastEventId=a),this._invokeClient("captureEvent",e,ne(ne({},n),{event_id:a})),a},t.prototype.lastEventId=function(){return this._lastEventId},t.prototype.addBreadcrumb=function(e,n){var a=this.getStackTop(),u=a.scope,c=a.client;if(!(!u||!c)){var p=c.getOptions&&c.getOptions()||{},E=p.beforeBreadcrumb,k=E===void 0?null:E,$=p.maxBreadcrumbs,B=$===void 0?ok:$;if(!(B<=0)){var j=ws(),Y=ne({timestamp:j},e),R=k?gs(function(){return k(Y,n)}):Y;R!==null&&u.addBreadcrumb(R,B)}}},t.prototype.setUser=function(e){var n=this.getScope();n&&n.setUser(e)},t.prototype.setTags=function(e){var n=this.getScope();n&&n.setTags(e)},t.prototype.setExtras=function(e){var n=this.getScope();n&&n.setExtras(e)},t.prototype.setTag=function(e,n){var a=this.getScope();a&&a.setTag(e,n)},t.prototype.setExtra=function(e,n){var a=this.getScope();a&&a.setExtra(e,n)},t.prototype.setContext=function(e,n){var a=this.getScope();a&&a.setContext(e,n)},t.prototype.configureScope=function(e){var n=this.getStackTop(),a=n.scope,u=n.client;a&&u&&e(a)},t.prototype.run=function(e){var n=Oo(this);try{e(this)}finally{Oo(n)}},t.prototype.getIntegration=function(e){var n=this.getClient();if(!n)return null;try{return n.getIntegration(e)}catch{return Pe.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},t.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},t.prototype.startTransaction=function(e,n){return this._callExtensionMethod("startTransaction",e,n)},t.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},t.prototype.captureSession=function(e){if(e===void 0&&(e=!1),e)return this.endSession();this._sendSessionUpdate()},t.prototype.endSession=function(){var e,n,a,u,c;(a=(n=(e=this.getStackTop())===null||e===void 0?void 0:e.scope)===null||n===void 0?void 0:n.getSession())===null||a===void 0||a.close(),this._sendSessionUpdate(),(c=(u=this.getStackTop())===null||u===void 0?void 0:u.scope)===null||c===void 0||c.setSession()},t.prototype.startSession=function(e){var n=this.getStackTop(),a=n.scope,u=n.client,c=u&&u.getOptions()||{},p=c.release,E=c.environment,k=Fe(),$=(k.navigator||{}).userAgent,B=new ak(ne(ne(ne({release:p,environment:E},a&&{user:a.getUser()}),$&&{userAgent:$}),e));if(a){var j=a.getSession&&a.getSession();j&&j.status===rr.Ok&&j.update({status:rr.Exited}),this.endSession(),a.setSession(B)}return B},t.prototype._sendSessionUpdate=function(){var e=this.getStackTop(),n=e.scope,a=e.client;if(!!n){var u=n.getSession&&n.getSession();u&&a&&a.captureSession&&a.captureSession(u)}},t.prototype._invokeClient=function(e){for(var n,a=[],u=1;u<arguments.length;u++)a[u-1]=arguments[u];var c=this.getStackTop(),p=c.scope,E=c.client;E&&E[e]&&(n=E)[e].apply(n,De(a,[p]))},t.prototype._callExtensionMethod=function(e){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];var u=Es(),c=u.__SENTRY__;if(c&&c.extensions&&typeof c.extensions[e]=="function")return c.extensions[e].apply(this,n);Pe.warn("Extension method "+e+" couldn't be found, doing nothing.")},t}();function Es(){var t=Fe();return t.__SENTRY__=t.__SENTRY__||{extensions:{},hub:void 0},t}function Oo(t){var e=Es(),n=ir(e);return To(e,t),n}function Ue(){var t=Es();return(!Sf(t)||ir(t).isOlderThan(xo))&&To(t,new Ss),fo()?uk(t):ir(t)}function uk(t){var e,n,a;try{var u=(a=(n=(e=Es().__SENTRY__)===null||e===void 0?void 0:e.extensions)===null||n===void 0?void 0:n.domain)===null||a===void 0?void 0:a.active;if(!u)return ir(t);if(!Sf(u)||ir(u).isOlderThan(xo)){var c=ir(t).getStackTop();To(u,new Ss(c.client,Jn.clone(c.scope)))}return ir(u)}catch{return ir(t)}}function Sf(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function ir(t){return t&&t.__SENTRY__&&t.__SENTRY__.hub||(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=new Ss),t.__SENTRY__.hub}function To(t,e){return t?(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=e,!0):!1}function Pt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var a=Ue();if(a&&a[t])return a[t].apply(a,De(e));throw new Error("No hub defined or "+t+" was not found on the hub, please open a bug report.")}function Ef(t,e){var n;try{throw new Error("Sentry syntheticException")}catch(a){n=a}return Pt("captureException",t,{captureContext:e,originalException:t,syntheticException:n})}function lk(t,e){var n;try{throw new Error(t)}catch(c){n=c}var a=typeof e=="string"?e:void 0,u=typeof e!="string"?{captureContext:e}:void 0;return Pt("captureMessage",t,a,ne({originalException:t,syntheticException:n},u))}function ck(t){return Pt("captureEvent",t)}function fk(t){Pt("configureScope",t)}function hk(t){Pt("addBreadcrumb",t)}function dk(t,e){Pt("setContext",t,e)}function _k(t){Pt("setExtras",t)}function gk(t){Pt("setTags",t)}function pk(t,e){Pt("setExtra",t,e)}function vk(t,e){Pt("setTag",t,e)}function mk(t){Pt("setUser",t)}function Cf(t){Pt("withScope",t)}function yk(t,e){return Pt("startTransaction",ne({},t),e)}var xf="7",Of=function(){function t(e,n,a){n===void 0&&(n={}),this.dsn=e,this._dsnObject=new uf(e),this.metadata=n,this._tunnel=a}return t.prototype.getDsn=function(){return this._dsnObject},t.prototype.forceEnvelope=function(){return!!this._tunnel},t.prototype.getBaseApiEndpoint=function(){var e=this.getDsn(),n=e.protocol?e.protocol+":":"",a=e.port?":"+e.port:"";return n+"//"+e.host+a+(e.path?"/"+e.path:"")+"/api/"},t.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},t.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},t.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this.forceEnvelope()?this._tunnel:this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},t.prototype.getStoreEndpointPath=function(){var e=this.getDsn();return(e.path?"/"+e.path:"")+"/api/"+e.projectId+"/store/"},t.prototype.getRequestHeaders=function(e,n){var a=this.getDsn(),u=["Sentry sentry_version="+xf];return u.push("sentry_client="+e+"/"+n),u.push("sentry_key="+a.publicKey),a.pass&&u.push("sentry_secret="+a.pass),{"Content-Type":"application/json","X-Sentry-Auth":u.join(", ")}},t.prototype.getReportDialogEndpoint=function(e){e===void 0&&(e={});var n=this.getDsn(),a=this.getBaseApiEndpoint()+"embed/error-page/",u=[];u.push("dsn="+n.toString());for(var c in e)if(c!=="dsn")if(c==="user"){if(!e.user)continue;e.user.name&&u.push("name="+encodeURIComponent(e.user.name)),e.user.email&&u.push("email="+encodeURIComponent(e.user.email))}else u.push(encodeURIComponent(c)+"="+encodeURIComponent(e[c]));return u.length?a+"?"+u.join("&"):a},t.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},t.prototype._getIngestEndpoint=function(e){if(this._tunnel)return this._tunnel;var n=this.getBaseApiEndpoint(),a=this.getDsn();return""+n+a.projectId+"/"+e+"/"},t.prototype._encodedAuth=function(){var e=this.getDsn(),n={sentry_key:e.publicKey,sentry_version:xf};return $A(n)},t}(),Tf=[];function Pf(t){return t.reduce(function(e,n){return e.every(function(a){return n.name!==a.name})&&e.push(n),e},[])}function bk(t){var e=t.defaultIntegrations&&De(t.defaultIntegrations)||[],n=t.integrations,a=De(Pf(e));Array.isArray(n)?a=De(a.filter(function(p){return n.every(function(E){return E.name!==p.name})}),Pf(n)):typeof n=="function"&&(a=n(a),a=Array.isArray(a)?a:[a]);var u=a.map(function(p){return p.name}),c="Debug";return u.indexOf(c)!==-1&&a.push.apply(a,De(a.splice(u.indexOf(c),1))),a}function wk(t){Tf.indexOf(t.name)===-1&&(t.setupOnce(Zn,Ue),Tf.push(t.name),Pe.log("Integration installed: "+t.name))}function Sk(t){var e={};return bk(t).forEach(function(n){e[n.name]=n,wk(n)}),Object.defineProperty(e,"initialized",{value:!0}),e}var If="Not capturing exception because it's already been captured.",Ek=function(){function t(e,n){this._integrations={},this._numProcessing=0,this._backend=new e(n),this._options=n,n.dsn&&(this._dsn=new uf(n.dsn))}return t.prototype.captureException=function(e,n,a){var u=this;if(vf(e)){Pe.log(If);return}var c=n&&n.event_id;return this._process(this._getBackend().eventFromException(e,n).then(function(p){return u._captureEvent(p,n,a)}).then(function(p){c=p})),c},t.prototype.captureMessage=function(e,n,a,u){var c=this,p=a&&a.event_id,E=ds(e)?this._getBackend().eventFromMessage(String(e),n,a):this._getBackend().eventFromException(e,a);return this._process(E.then(function(k){return c._captureEvent(k,a,u)}).then(function(k){p=k})),p},t.prototype.captureEvent=function(e,n,a){var u;if(((u=n)===null||u===void 0?void 0:u.originalException)&&vf(n.originalException)){Pe.log(If);return}var c=n&&n.event_id;return this._process(this._captureEvent(e,n,a).then(function(p){c=p})),c},t.prototype.captureSession=function(e){if(!this._isEnabled()){Pe.warn("SDK not enabled, will not capture session.");return}typeof e.release!="string"?Pe.warn("Discarded session because of missing or non-string release"):(this._sendSession(e),e.update({init:!1}))},t.prototype.getDsn=function(){return this._dsn},t.prototype.getOptions=function(){return this._options},t.prototype.getTransport=function(){return this._getBackend().getTransport()},t.prototype.flush=function(e){var n=this;return this._isClientDoneProcessing(e).then(function(a){return n.getTransport().close(e).then(function(u){return a&&u})})},t.prototype.close=function(e){var n=this;return this.flush(e).then(function(a){return n.getOptions().enabled=!1,a})},t.prototype.setupIntegrations=function(){this._isEnabled()&&!this._integrations.initialized&&(this._integrations=Sk(this._options))},t.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch{return Pe.warn("Cannot retrieve integration "+e.id+" from the current Client"),null}},t.prototype._updateSessionFromEvent=function(e,n){var a,u,c=!1,p=!1,E=n.exception&&n.exception.values;if(E){p=!0;try{for(var k=Vn(E),$=k.next();!$.done;$=k.next()){var B=$.value,j=B.mechanism;if(j&&j.handled===!1){c=!0;break}}}catch(Z){a={error:Z}}finally{try{$&&!$.done&&(u=k.return)&&u.call(k)}finally{if(a)throw a.error}}}var Y=e.status===rr.Ok,R=Y&&e.errors===0||Y&&c;R&&(e.update(ne(ne({},c&&{status:rr.Crashed}),{errors:e.errors||Number(p||c)})),this.captureSession(e))},t.prototype._sendSession=function(e){this._getBackend().sendSession(e)},t.prototype._isClientDoneProcessing=function(e){var n=this;return new gt(function(a){var u=0,c=1,p=setInterval(function(){n._numProcessing==0?(clearInterval(p),a(!0)):(u+=c,e&&u>=e&&(clearInterval(p),a(!1)))},c)})},t.prototype._getBackend=function(){return this._backend},t.prototype._isEnabled=function(){return this.getOptions().enabled!==!1&&this._dsn!==void 0},t.prototype._prepareEvent=function(e,n,a){var u=this,c=this.getOptions().normalizeDepth,p=c===void 0?3:c,E=ne(ne({},e),{event_id:e.event_id||(a&&a.event_id?a.event_id:un()),timestamp:e.timestamp||ws()});this._applyClientOptions(E),this._applyIntegrationsMetadata(E);var k=n;a&&a.captureContext&&(k=Jn.clone(k).update(a.captureContext));var $=gt.resolve(E);return k&&($=k.applyToEvent(E,a)),$.then(function(B){return typeof p=="number"&&p>0?u._normalizeEvent(B,p):B})},t.prototype._normalizeEvent=function(e,n){if(!e)return null;var a=ne(ne(ne(ne(ne({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(function(p){return ne(ne({},p),p.data&&{data:on(p.data,n)})})}),e.user&&{user:on(e.user,n)}),e.contexts&&{contexts:on(e.contexts,n)}),e.extra&&{extra:on(e.extra,n)});e.contexts&&e.contexts.trace&&(a.contexts.trace=e.contexts.trace);var u=this.getOptions()._experiments,c=u===void 0?{}:u;return c.ensureNoCircularStructures?on(a):a},t.prototype._applyClientOptions=function(e){var n=this.getOptions(),a=n.environment,u=n.release,c=n.dist,p=n.maxValueLength,E=p===void 0?250:p;"environment"in e||(e.environment="environment"in n?a:"production"),e.release===void 0&&u!==void 0&&(e.release=u),e.dist===void 0&&c!==void 0&&(e.dist=c),e.message&&(e.message=Kn(e.message,E));var k=e.exception&&e.exception.values&&e.exception.values[0];k&&k.value&&(k.value=Kn(k.value,E));var $=e.request;$&&$.url&&($.url=Kn($.url,E))},t.prototype._applyIntegrationsMetadata=function(e){var n=Object.keys(this._integrations);n.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=De(e.sdk.integrations||[],n))},t.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)},t.prototype._captureEvent=function(e,n,a){return this._processEvent(e,n,a).then(function(u){return u.event_id},function(u){Pe.error(u)})},t.prototype._processEvent=function(e,n,a){var u=this,c,p,E=this.getOptions(),k=E.beforeSend,$=E.sampleRate,B=this.getTransport();if(!this._isEnabled())return gt.reject(new Je("SDK not enabled, will not capture event."));var j=e.type==="transaction";return!j&&typeof $=="number"&&Math.random()>$?((p=(c=B).recordLostEvent)===null||p===void 0||p.call(c,Dt.SampleRate,"event"),gt.reject(new Je("Discarding event because it's not included in the random sample (sampling rate = "+$+")"))):this._prepareEvent(e,a,n).then(function(Y){var R,Z;if(Y===null)throw(Z=(R=B).recordLostEvent)===null||Z===void 0||Z.call(R,Dt.EventProcessor,e.type||"event"),new Je("An event processor returned null, will not send event.");var Q=n&&n.data&&n.data.__sentry__===!0;if(Q||j||!k)return Y;var ae=k(Y,n);return u._ensureBeforeSendRv(ae)}).then(function(Y){var R,Z;if(Y===null)throw(Z=(R=B).recordLostEvent)===null||Z===void 0||Z.call(R,Dt.BeforeSend,e.type||"event"),new Je("`beforeSend` returned `null`, will not send event.");var Q=a&&a.getSession&&a.getSession();return!j&&Q&&u._updateSessionFromEvent(Q,Y),u._sendEvent(Y),Y}).then(null,function(Y){throw Y instanceof Je?Y:(u.captureException(Y,{data:{__sentry__:!0},originalException:Y}),new Je(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: `+Y))})},t.prototype._process=function(e){var n=this;this._numProcessing+=1,e.then(function(a){return n._numProcessing-=1,a},function(a){return n._numProcessing-=1,a})},t.prototype._ensureBeforeSendRv=function(e){var n="`beforeSend` method has to return `null` or a valid event.";if(_o(e))return e.then(function(a){if(!(an(a)||a===null))throw new Je(n);return a},function(a){throw new Je("beforeSend rejected with "+a)});if(!(an(e)||e===null))throw new Je(n);return e},t}(),Ck=function(){function t(){}return t.prototype.sendEvent=function(e){return gt.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:hr.Skipped})},t.prototype.close=function(e){return gt.resolve(!0)},t}(),xk=function(){function t(e){this._options=e,this._options.dsn||Pe.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return t.prototype.eventFromException=function(e,n){throw new Je("Backend has to implement `eventFromException` method")},t.prototype.eventFromMessage=function(e,n,a){throw new Je("Backend has to implement `eventFromMessage` method")},t.prototype.sendEvent=function(e){this._transport.sendEvent(e).then(null,function(n){Pe.error("Error while sending event: "+n)})},t.prototype.sendSession=function(e){if(!this._transport.sendSession){Pe.warn("Dropping session because custom transport doesn't implement sendSession");return}this._transport.sendSession(e).then(null,function(n){Pe.error("Error while sending session: "+n)})},t.prototype.getTransport=function(){return this._transport},t.prototype._setupTransport=function(){return new Ck},t}();function Af(t){if(!(!t.metadata||!t.metadata.sdk)){var e=t.metadata.sdk,n=e.name,a=e.version;return{name:n,version:a}}}function Ok(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=De(t.sdk.integrations||[],e.integrations||[]),t.sdk.packages=De(t.sdk.packages||[],e.packages||[])),t}function kf(t,e){var n=Af(e),a=JSON.stringify(ne(ne({sent_at:new Date().toISOString()},n&&{sdk:n}),e.forceEnvelope()&&{dsn:e.getDsn().toString()})),u="aggregates"in t?"sessions":"session",c=JSON.stringify({type:u});return{body:a+`
`+c+`
`+JSON.stringify(t),type:u,url:e.getEnvelopeEndpointWithUrlEncodedAuth()}}function Lf(t,e){var n=Af(e),a=t.type||"event",u=a==="transaction"||e.forceEnvelope(),c=t.debug_meta||{},p=c.transactionSampling,E=bA(c,["transactionSampling"]),k=p||{},$=k.method,B=k.rate;Object.keys(E).length===0?delete t.debug_meta:t.debug_meta=E;var j={body:JSON.stringify(n?Ok(t,e.metadata.sdk):t),type:a,url:u?e.getEnvelopeEndpointWithUrlEncodedAuth():e.getStoreEndpointWithUrlEncodedAuth()};if(u){var Y=JSON.stringify(ne(ne({event_id:t.event_id,sent_at:new Date().toISOString()},n&&{sdk:n}),e.forceEnvelope()&&{dsn:e.getDsn().toString()})),R=JSON.stringify({type:a,sample_rates:[{id:$,rate:B}]}),Z=Y+`
`+R+`
`+j.body;j.body=Z}return j}function Tk(t,e){var n;e.debug===!0&&Pe.enable();var a=Ue();(n=a.getScope())===null||n===void 0||n.update(e.initialScope);var u=new t(e);a.bindClient(u)}var Po="6.14.0",Rf,Mf=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){Rf=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var a=this.__sentry_original__||this;return Rf.apply(a,e)}},t.id="FunctionToString",t}(),Pk=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],$f=function(){function t(e){e===void 0&&(e={}),this._options=e,this.name=t.id}return t.prototype.setupOnce=function(){Zn(function(e){var n=Ue();if(!n)return e;var a=n.getIntegration(t);if(a){var u=n.getClient(),c=u?u.getOptions():{},p=typeof a._mergeOptions=="function"?a._mergeOptions(c):{};return typeof a._shouldDropEvent!="function"?e:a._shouldDropEvent(e,p)?null:e}return e})},t.prototype._shouldDropEvent=function(e,n){return this._isSentryError(e,n)?(Pe.warn(`Event dropped due to being internal Sentry Error.
Event: `+Lr(e)),!0):this._isIgnoredError(e,n)?(Pe.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+Lr(e)),!0):this._isDeniedUrl(e,n)?(Pe.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+Lr(e)+`.
Url: `+this._getEventFilterUrl(e)),!0):this._isAllowedUrl(e,n)?!1:(Pe.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+Lr(e)+`.
Url: `+this._getEventFilterUrl(e)),!0)},t.prototype._isSentryError=function(e,n){if(!n.ignoreInternal)return!1;try{return e&&e.exception&&e.exception.values&&e.exception.values[0]&&e.exception.values[0].type==="SentryError"||!1}catch{return!1}},t.prototype._isIgnoredError=function(e,n){return!n.ignoreErrors||!n.ignoreErrors.length?!1:this._getPossibleEventMessages(e).some(function(a){return n.ignoreErrors.some(function(u){return vo(a,u)})})},t.prototype._isDeniedUrl=function(e,n){if(!n.denyUrls||!n.denyUrls.length)return!1;var a=this._getEventFilterUrl(e);return a?n.denyUrls.some(function(u){return vo(a,u)}):!1},t.prototype._isAllowedUrl=function(e,n){if(!n.allowUrls||!n.allowUrls.length)return!0;var a=this._getEventFilterUrl(e);return a?n.allowUrls.some(function(u){return vo(a,u)}):!0},t.prototype._mergeOptions=function(e){return e===void 0&&(e={}),{allowUrls:De(this._options.whitelistUrls||[],this._options.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:De(this._options.blacklistUrls||[],this._options.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:De(this._options.ignoreErrors||[],e.ignoreErrors||[],Pk),ignoreInternal:typeof this._options.ignoreInternal!="undefined"?this._options.ignoreInternal:!0}},t.prototype._getPossibleEventMessages=function(e){if(e.message)return[e.message];if(e.exception)try{var n=e.exception.values&&e.exception.values[0]||{},a=n.type,u=a===void 0?"":a,c=n.value,p=c===void 0?"":c;return[""+p,u+": "+p]}catch{return Pe.error("Cannot extract message for event "+Lr(e)),[]}return[]},t.prototype._getLastValidUrl=function(e){e===void 0&&(e=[]);for(var n,a,u=e.length-1;u>=0;u--){var c=e[u];if(((n=c)===null||n===void 0?void 0:n.filename)!=="<anonymous>"&&((a=c)===null||a===void 0?void 0:a.filename)!=="[native code]")return c.filename||null}return null},t.prototype._getEventFilterUrl=function(e){try{if(e.stacktrace){var n=e.stacktrace.frames;return this._getLastValidUrl(n)}if(e.exception){var a=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames;return this._getLastValidUrl(a)}return null}catch{return Pe.error("Cannot extract url for event "+Lr(e)),null}},t.id="InboundFilters",t}(),Ik=Object.freeze(Object.defineProperty({__proto__:null,FunctionToString:Mf,InboundFilters:$f},Symbol.toStringTag,{value:"Module"})),cn="?",Ak=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,kk=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Lk=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Rk=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Mk=/\((\S*)(?::(\d+))(?::(\d+))\)/,$k=/Minified React error #\d+;/i;function Xn(t){var e=null,n=0;t&&(typeof t.framesToPop=="number"?n=t.framesToPop:$k.test(t.message)&&(n=1));try{if(e=Dk(t),e)return Df(e,n)}catch{}try{if(e=Nk(t),e)return Df(e,n)}catch{}return{message:Io(t),name:t&&t.name,stack:[],failed:!0}}function Nk(t){var e,n;if(!t||!t.stack)return null;for(var a=[],u=t.stack.split(`
`),c,p,E,k,$=0;$<u.length;++$){if(E=Ak.exec(u[$])){var B=E[2]&&E[2].indexOf("native")===0;c=E[2]&&E[2].indexOf("eval")===0,c&&(p=Mk.exec(E[2]))&&(E[2]=p[1],E[3]=p[2],E[4]=p[3]);var j=E[2]&&E[2].indexOf("address at ")===0?E[2].substr(11):E[2],Y=E[1]||cn;e=Gn(Nf(Y,j),2),Y=e[0],j=e[1],k={url:j,func:Y,args:B?[E[2]]:[],line:E[3]?+E[3]:null,column:E[4]?+E[4]:null}}else if(E=Lk.exec(u[$]))k={url:E[2],func:E[1]||cn,args:[],line:+E[3],column:E[4]?+E[4]:null};else if(E=kk.exec(u[$])){c=E[3]&&E[3].indexOf(" > eval")>-1,c&&(p=Rk.exec(E[3]))?(E[1]=E[1]||"eval",E[3]=p[1],E[4]=p[2],E[5]=""):$===0&&!E[5]&&t.columnNumber!==void 0&&(a[0].column=t.columnNumber+1);var j=E[3],Y=E[1]||cn;n=Gn(Nf(Y,j),2),Y=n[0],j=n[1],k={url:j,func:Y,args:E[2]?E[2].split(","):[],line:E[4]?+E[4]:null,column:E[5]?+E[5]:null}}else continue;!k.func&&k.line&&(k.func=cn),a.push(k)}return a.length?{message:Io(t),name:t.name,stack:a}:null}function Dk(t){if(!t||!t.stacktrace)return null;for(var e=t.stacktrace,n=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,a=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,u=e.split(`
`),c=[],p,E=0;E<u.length;E+=2){var k=null;(p=n.exec(u[E]))?k={url:p[2],func:p[3],args:[],line:+p[1],column:null}:(p=a.exec(u[E]))&&(k={url:p[6],func:p[3]||p[4],args:p[5]?p[5].split(","):[],line:+p[1],column:+p[2]}),k&&(!k.func&&k.line&&(k.func=cn),c.push(k))}return c.length?{message:Io(t),name:t.name,stack:c}:null}var Nf=function(t,e){var n=t.indexOf("safari-extension")!==-1,a=t.indexOf("safari-web-extension")!==-1;return n||a?[t.indexOf("@")!==-1?t.split("@")[0]:cn,n?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]};function Df(t,e){try{return ne(ne({},t),{stack:t.stack.slice(e)})}catch{return t}}function Io(t){var e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}var Fk=50;function Ff(t){var e=Ao(t.stack),n={type:t.name,value:t.message};return e&&e.length&&(n.stacktrace={frames:e}),n.type===void 0&&n.value===""&&(n.value="Unrecoverable error caught"),n}function zk(t,e,n){var a={exception:{values:[{type:ho(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+zA(t)}]},extra:{__serialized__:ff(t)}};if(e){var u=Xn(e),c=Ao(u.stack);a.stacktrace={frames:c}}return a}function zf(t){var e=Ff(t);return{exception:{values:[e]}}}function Ao(t){if(!t||!t.length)return[];var e=t,n=e[0].func||"",a=e[e.length-1].func||"";return(n.indexOf("captureMessage")!==-1||n.indexOf("captureException")!==-1)&&(e=e.slice(1)),a.indexOf("sentryWrapped")!==-1&&(e=e.slice(0,-1)),e.slice(0,Fk).map(function(u){return{colno:u.column===null?void 0:u.column,filename:u.url||e[0].url,function:u.func||"?",in_app:!0,lineno:u.line===null?void 0:u.line}}).reverse()}function jf(t,e,n){var a=n&&n.syntheticException||void 0,u=ko(e,a,{attachStacktrace:t.attachStacktrace});return ln(u),u.level=Nt.Error,n&&n.event_id&&(u.event_id=n.event_id),gt.resolve(u)}function Bf(t,e,n,a){n===void 0&&(n=Nt.Info);var u=a&&a.syntheticException||void 0,c=Lo(e,u,{attachStacktrace:t.attachStacktrace});return c.level=n,a&&a.event_id&&(c.event_id=a.event_id),gt.resolve(c)}function ko(t,e,n){n===void 0&&(n={});var a;if(sf(t)&&t.error){var u=t;return t=u.error,a=zf(Xn(t)),a}if(af(t)||CA(t)){var c=t,p=c.name||(af(c)?"DOMError":"DOMException"),E=c.message?p+": "+c.message:p;return a=Lo(E,e,n),So(a,E),"code"in c&&(a.tags=ne(ne({},a.tags),{"DOMException.code":""+c.code})),a}if(nf(t))return a=zf(Xn(t)),a;if(an(t)||ho(t)){var k=t;return a=zk(k,e,n.rejection),ln(a,{synthetic:!0}),a}return a=Lo(t,e,n),So(a,""+t,void 0),ln(a,{synthetic:!0}),a}function Lo(t,e,n){n===void 0&&(n={});var a={message:t};if(n.attachStacktrace&&e){var u=Xn(e),c=Ao(u.stack);a.stacktrace={frames:c}}return a}var zt=Fe(),Cs;function qf(){var t,e;if(Cs)return Cs;if(mo(zt.fetch))return Cs=zt.fetch.bind(zt);var n=zt.document,a=zt.fetch;if(typeof((t=n)===null||t===void 0?void 0:t.createElement)=="function")try{var u=n.createElement("iframe");u.hidden=!0,n.head.appendChild(u),!((e=u.contentWindow)===null||e===void 0)&&e.fetch&&(a=u.contentWindow.fetch),n.head.removeChild(u)}catch(c){Pe.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",c)}return Cs=a.bind(zt)}function jk(t,e){var n=Object.prototype.toString.call(zt&&zt.navigator)==="[object Navigator]",a=n&&typeof zt.navigator.sendBeacon=="function";if(a){var u=zt.navigator.sendBeacon.bind(zt.navigator);return u(t,e)}if(vs()){var c=qf();return wA(c(t,{body:e,method:"POST",credentials:"omit",keepalive:!0}))}}var Uf={event:"error",transaction:"transaction",session:"session",attachment:"attachment"},Ro=Fe(),Mo=function(){function t(e){var n=this;this.options=e,this._buffer=new nk(30),this._rateLimits={},this._outcomes={},this._api=new Of(e.dsn,e._metadata,e.tunnel),this.url=this._api.getStoreEndpointWithUrlEncodedAuth(),this.options.sendClientReports&&Ro.document&&Ro.document.addEventListener("visibilitychange",function(){Ro.document.visibilityState==="hidden"&&n._flushOutcomes()})}return t.prototype.sendEvent=function(e){throw new Je("Transport Class has to implement `sendEvent` method")},t.prototype.close=function(e){return this._buffer.drain(e)},t.prototype.recordLostEvent=function(e,n){var a;if(!!this.options.sendClientReports){var u=Uf[n]+":"+e;Pe.log("Adding outcome: "+u),this._outcomes[u]=(a=this._outcomes[u],(a!=null?a:0)+1)}},t.prototype._flushOutcomes=function(){if(!!this.options.sendClientReports){var e=this._outcomes;if(this._outcomes={},!Object.keys(e).length){Pe.log("No outcomes to flush");return}Pe.log(`Flushing outcomes:
`+JSON.stringify(e,null,2));var n=this._api.getEnvelopeEndpointWithUrlEncodedAuth(),a=JSON.stringify(ne({},this.options.tunnel&&{dsn:this._api.getDsn().toString()})),u=JSON.stringify({type:"client_report"}),c=JSON.stringify({timestamp:ws(),discarded_events:Object.keys(e).map(function(E){var k=Gn(E.split(":"),2),$=k[0],B=k[1];return{reason:B,category:$,quantity:e[E]}})}),p=a+`
`+u+`
`+c;try{jk(n,p)}catch(E){Pe.error(E)}}},t.prototype._handleResponse=function(e){var n=e.requestType,a=e.response,u=e.headers,c=e.resolve,p=e.reject,E=hr.fromHttpCode(a.status),k=this._handleRateLimit(u);if(k&&Pe.warn("Too many "+n+" requests, backing off until: "+this._disabledUntil(n)),E===hr.Success){c({status:E});return}p(a)},t.prototype._disabledUntil=function(e){var n=Uf[e];return this._rateLimits[n]||this._rateLimits.all},t.prototype._isRateLimited=function(e){return this._disabledUntil(e)>new Date(Date.now())},t.prototype._handleRateLimit=function(e){var n,a,u,c,p=Date.now(),E=e["x-sentry-rate-limits"],k=e["retry-after"];if(E){try{for(var $=Vn(E.trim().split(",")),B=$.next();!B.done;B=$.next()){var j=B.value,Y=j.split(":",2),R=parseInt(Y[0],10),Z=(isNaN(R)?60:R)*1e3;try{for(var Q=(u=void 0,Vn(Y[1].split(";"))),ae=Q.next();!ae.done;ae=Q.next()){var le=ae.value;this._rateLimits[le||"all"]=new Date(p+Z)}}catch($e){u={error:$e}}finally{try{ae&&!ae.done&&(c=Q.return)&&c.call(Q)}finally{if(u)throw u.error}}}}catch($e){n={error:$e}}finally{try{B&&!B.done&&(a=$.return)&&a.call($)}finally{if(n)throw n.error}}return!0}else if(k)return this._rateLimits.all=new Date(p+rk(p,k)),!0;return!1},t}(),Hf=function(t){Hn(e,t);function e(n,a){a===void 0&&(a=qf());var u=t.call(this,n)||this;return u._fetch=a,u}return e.prototype.sendEvent=function(n){return this._sendRequest(Lf(n,this._api),n)},e.prototype.sendSession=function(n){return this._sendRequest(kf(n,this._api),n)},e.prototype._sendRequest=function(n,a){var u=this;if(this._isRateLimited(n.type))return this.recordLostEvent(Dt.RateLimitBackoff,n.type),Promise.reject({event:a,type:n.type,reason:"Transport for "+n.type+" requests locked till "+this._disabledUntil(n.type)+" due to too many requests.",status:429});var c={body:n.body,method:"POST",referrerPolicy:BA()?"origin":""};return this.options.fetchParameters!==void 0&&Object.assign(c,this.options.fetchParameters),this.options.headers!==void 0&&(c.headers=this.options.headers),this._buffer.add(function(){return new gt(function(p,E){u._fetch(n.url,c).then(function(k){var $={"x-sentry-rate-limits":k.headers.get("X-Sentry-Rate-Limits"),"retry-after":k.headers.get("Retry-After")};u._handleResponse({requestType:n.type,response:k,headers:$,resolve:p,reject:E})}).catch(E)})}).then(void 0,function(p){throw p instanceof Je?u.recordLostEvent(Dt.QueueOverflow,n.type):u.recordLostEvent(Dt.NetworkError,n.type),p})},e}(Mo),Vf=function(t){Hn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sendEvent=function(n){return this._sendRequest(Lf(n,this._api),n)},e.prototype.sendSession=function(n){return this._sendRequest(kf(n,this._api),n)},e.prototype._sendRequest=function(n,a){var u=this;return this._isRateLimited(n.type)?(this.recordLostEvent(Dt.RateLimitBackoff,n.type),Promise.reject({event:a,type:n.type,reason:"Transport for "+n.type+" requests locked till "+this._disabledUntil(n.type)+" due to too many requests.",status:429})):this._buffer.add(function(){return new gt(function(c,p){var E=new XMLHttpRequest;E.onreadystatechange=function(){if(E.readyState===4){var $={"x-sentry-rate-limits":E.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":E.getResponseHeader("Retry-After")};u._handleResponse({requestType:n.type,response:E,headers:$,resolve:c,reject:p})}},E.open("POST",n.url);for(var k in u.options.headers)u.options.headers.hasOwnProperty(k)&&E.setRequestHeader(k,u.options.headers[k]);E.send(n.body)})}).then(void 0,function(c){throw c instanceof Je?u.recordLostEvent(Dt.QueueOverflow,n.type):u.recordLostEvent(Dt.NetworkError,n.type),c})},e}(Mo),Bk=Object.freeze(Object.defineProperty({__proto__:null,BaseTransport:Mo,FetchTransport:Hf,XHRTransport:Vf},Symbol.toStringTag,{value:"Module"})),qk=function(t){Hn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.eventFromException=function(n,a){return jf(this._options,n,a)},e.prototype.eventFromMessage=function(n,a,u){return a===void 0&&(a=Nt.Info),Bf(this._options,n,a,u)},e.prototype._setupTransport=function(){if(!this._options.dsn)return t.prototype._setupTransport.call(this);var n=ne(ne({},this._options.transportOptions),{dsn:this._options.dsn,tunnel:this._options.tunnel,sendClientReports:this._options.sendClientReports,_metadata:this._options._metadata});return this._options.transport?new this._options.transport(n):vs()?new Hf(n):new Vf(n)},e}(xk),xs=Fe(),$o=0;function Gf(){return $o>0}function Uk(){$o+=1,setTimeout(function(){$o-=1})}function Rr(t,e,n){if(e===void 0&&(e={}),typeof t!="function")return t;try{if(t.__sentry__)return t;if(t.__sentry_wrapped__)return t.__sentry_wrapped__}catch{return t}var a=function(){var p=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);var E=p.map(function(k){return Rr(k,e)});return t.handleEvent?t.handleEvent.apply(this,E):t.apply(this,E)}catch(k){throw Uk(),Cf(function($){$.addEventProcessor(function(B){var j=ne({},B);return e.mechanism&&(So(j,void 0,void 0),ln(j,e.mechanism)),j.extra=ne(ne({},j.extra),{arguments:p}),j}),Ef(k)}),k}};try{for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(a[u]=t[u])}catch{}t.prototype=t.prototype||{},a.prototype=t.prototype,Object.defineProperty(t,"__sentry_wrapped__",{enumerable:!1,value:a}),Object.defineProperties(a,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:t}});try{var c=Object.getOwnPropertyDescriptor(a,"name");c.configurable&&Object.defineProperty(a,"name",{get:function(){return t.name}})}catch{}return a}function Wf(t){if(t===void 0&&(t={}),!!xs.document){if(!t.eventId){Pe.error("Missing eventId option in showReportDialog call");return}if(!t.dsn){Pe.error("Missing dsn option in showReportDialog call");return}var e=xs.document.createElement("script");e.async=!0,e.src=new Of(t.dsn).getReportDialogEndpoint(t),t.onLoad&&(e.onload=t.onLoad);var n=xs.document.head||xs.document.body;n&&n.appendChild(e)}}var Kf=function(){function t(e){this.name=t.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=ne({onerror:!0,onunhandledrejection:!0},e)}return t.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(Pe.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(Pe.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},t.prototype._installGlobalOnErrorHandler=function(){var e=this;this._onErrorHandlerInstalled||(gr({callback:function(n){var a=n.error,u=Ue(),c=u.getIntegration(t),p=a&&a.__sentry_own_request__===!0;if(!(!c||Gf()||p)){var E=u.getClient(),k=a===void 0&&sn(n.msg)?e._eventFromIncompleteOnError(n.msg,n.url,n.line,n.column):e._enhanceEventWithInitialFrame(ko(a||n.msg,void 0,{attachStacktrace:E&&E.getOptions().attachStacktrace,rejection:!1}),n.url,n.line,n.column);ln(k,{handled:!1,type:"onerror"}),u.captureEvent(k,{originalException:a})}},type:"error"}),this._onErrorHandlerInstalled=!0)},t.prototype._installGlobalOnUnhandledRejectionHandler=function(){var e=this;this._onUnhandledRejectionHandlerInstalled||(gr({callback:function(n){var a=n;try{"reason"in n?a=n.reason:"detail"in n&&"reason"in n.detail&&(a=n.detail.reason)}catch{}var u=Ue(),c=u.getIntegration(t),p=a&&a.__sentry_own_request__===!0;if(!c||Gf()||p)return!0;var E=u.getClient(),k=ds(a)?e._eventFromRejectionWithPrimitive(a):ko(a,void 0,{attachStacktrace:E&&E.getOptions().attachStacktrace,rejection:!0});k.level=Nt.Error,ln(k,{handled:!1,type:"onunhandledrejection"}),u.captureEvent(k,{originalException:a})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},t.prototype._eventFromIncompleteOnError=function(e,n,a,u){var c=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,p=sf(e)?e.message:e,E,k=p.match(c);k&&(E=k[1],p=k[2]);var $={exception:{values:[{type:E||"Error",value:p}]}};return this._enhanceEventWithInitialFrame($,n,a,u)},t.prototype._eventFromRejectionWithPrimitive=function(e){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(e)}]}}},t.prototype._enhanceEventWithInitialFrame=function(e,n,a,u){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].stacktrace=e.exception.values[0].stacktrace||{},e.exception.values[0].stacktrace.frames=e.exception.values[0].stacktrace.frames||[];var c=isNaN(parseInt(u,10))?void 0:u,p=isNaN(parseInt(a,10))?void 0:a,E=sn(n)&&n.length>0?n:PA();return e.exception.values[0].stacktrace.frames.length===0&&e.exception.values[0].stacktrace.frames.push({colno:c,filename:E,function:"?",in_app:!0,lineno:p}),e},t.id="GlobalHandlers",t}(),Hk=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Yf=function(){function t(e){this.name=t.id,this._options=ne({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},e)}return t.prototype.setupOnce=function(){var e=Fe();if(this._options.setTimeout&&_t(e,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&_t(e,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&_t(e,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&_t(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget){var n=Array.isArray(this._options.eventTarget)?this._options.eventTarget:Hk;n.forEach(this._wrapEventTarget.bind(this))}},t.prototype._wrapTimeFunction=function(e){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var u=n[0];return n[0]=Rr(u,{mechanism:{data:{function:_r(e)},handled:!0,type:"instrument"}}),e.apply(this,n)}},t.prototype._wrapRAF=function(e){return function(n){return e.call(this,Rr(n,{mechanism:{data:{function:"requestAnimationFrame",handler:_r(e)},handled:!0,type:"instrument"}}))}},t.prototype._wrapEventTarget=function(e){var n=Fe(),a=n[e]&&n[e].prototype;!a||!a.hasOwnProperty||!a.hasOwnProperty("addEventListener")||(_t(a,"addEventListener",function(u){return function(c,p,E){try{typeof p.handleEvent=="function"&&(p.handleEvent=Rr(p.handleEvent.bind(p),{mechanism:{data:{function:"handleEvent",handler:_r(p),target:e},handled:!0,type:"instrument"}}))}catch{}return u.call(this,c,Rr(p,{mechanism:{data:{function:"addEventListener",handler:_r(p),target:e},handled:!0,type:"instrument"}}),E)}}),_t(a,"removeEventListener",function(u){return function(c,p,E){var k,$=p;try{var B=(k=$)===null||k===void 0?void 0:k.__sentry_wrapped__;B&&u.call(this,c,B,E)}catch{}return u.call(this,c,$,E)}}))},t.prototype._wrapXHR=function(e){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var u=this,c=["onload","onerror","onprogress","onreadystatechange"];return c.forEach(function(p){p in u&&typeof u[p]=="function"&&_t(u,p,function(E){var k={mechanism:{data:{function:p,handler:_r(E)},handled:!0,type:"instrument"}};return E.__sentry_original__&&(k.mechanism.data.handler=_r(E.__sentry_original__)),Rr(E,k)})}),e.apply(this,n)}},t.id="TryCatch",t}(),No=function(){function t(e){this.name=t.id,this._options=ne({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},e)}return t.prototype.addSentryBreadcrumb=function(e){!this._options.sentry||Ue().addBreadcrumb({category:"sentry."+(e.type==="transaction"?"transaction":"event"),event_id:e.event_id,level:e.level,message:Lr(e)},{event:e})},t.prototype.setupOnce=function(){var e=this;this._options.console&&gr({callback:function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];e._consoleBreadcrumb.apply(e,De(n))},type:"console"}),this._options.dom&&gr({callback:function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];e._domBreadcrumb.apply(e,De(n))},type:"dom"}),this._options.xhr&&gr({callback:function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];e._xhrBreadcrumb.apply(e,De(n))},type:"xhr"}),this._options.fetch&&gr({callback:function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];e._fetchBreadcrumb.apply(e,De(n))},type:"fetch"}),this._options.history&&gr({callback:function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];e._historyBreadcrumb.apply(e,De(n))},type:"history"})},t.prototype._consoleBreadcrumb=function(e){var n={category:"console",data:{arguments:e.args,logger:"console"},level:Nt.fromString(e.level),message:lf(e.args," ")};if(e.level==="assert")if(e.args[0]===!1)n.message="Assertion failed: "+(lf(e.args.slice(1)," ")||"console.assert"),n.data.arguments=e.args.slice(1);else return;Ue().addBreadcrumb(n,{input:e.args,level:e.level})},t.prototype._domBreadcrumb=function(e){var n,a=typeof this._options.dom=="object"?this._options.dom.serializeAttribute:void 0;typeof a=="string"&&(a=[a]);try{n=e.event.target?_s(e.event.target,a):_s(e.event,a)}catch{n="<unknown>"}n.length!==0&&Ue().addBreadcrumb({category:"ui."+e.name,message:n},{event:e.event,name:e.name,global:e.global})},t.prototype._xhrBreadcrumb=function(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;var n=e.xhr.__sentry_xhr__||{},a=n.method,u=n.url,c=n.status_code,p=n.body;Ue().addBreadcrumb({category:"xhr",data:{method:a,url:u,status_code:c},type:"http"},{xhr:e.xhr,input:p});return}},t.prototype._fetchBreadcrumb=function(e){!e.endTimestamp||e.fetchData.url.match(/sentry_key/)&&e.fetchData.method==="POST"||(e.error?Ue().addBreadcrumb({category:"fetch",data:e.fetchData,level:Nt.Error,type:"http"},{data:e.error,input:e.args}):Ue().addBreadcrumb({category:"fetch",data:ne(ne({},e.fetchData),{status_code:e.response.status}),type:"http"},{input:e.args,response:e.response}))},t.prototype._historyBreadcrumb=function(e){var n=Fe(),a=e.from,u=e.to,c=wo(n.location.href),p=wo(a),E=wo(u);p.path||(p=c),c.protocol===E.protocol&&c.host===E.host&&(u=E.relative),c.protocol===p.protocol&&c.host===p.host&&(a=p.relative),Ue().addBreadcrumb({category:"navigation",data:{from:a,to:u}})},t.id="Breadcrumbs",t}(),Vk="cause",Gk=5,Jf=function(){function t(e){e===void 0&&(e={}),this.name=t.id,this._key=e.key||Vk,this._limit=e.limit||Gk}return t.prototype.setupOnce=function(){Zn(function(e,n){var a=Ue().getIntegration(t);if(a){var u=a._handler&&a._handler.bind(a);return typeof u=="function"?u(e,n):e}return e})},t.prototype._handler=function(e,n){if(!e.exception||!e.exception.values||!n||!dr(n.originalException,Error))return e;var a=this._walkErrorTree(n.originalException,this._key);return e.exception.values=De(a,e.exception.values),e},t.prototype._walkErrorTree=function(e,n,a){if(a===void 0&&(a=[]),!dr(e[n],Error)||a.length+1>=this._limit)return a;var u=Xn(e[n]),c=Ff(u);return this._walkErrorTree(e[n],n,De([c],a))},t.id="LinkedErrors",t}(),fn=Fe(),Zf=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){Zn(function(e){var n,a,u;if(Ue().getIntegration(t)){if(!fn.navigator&&!fn.location&&!fn.document)return e;var c=((n=e.request)===null||n===void 0?void 0:n.url)||((a=fn.location)===null||a===void 0?void 0:a.href),p=(fn.document||{}).referrer,E=(fn.navigator||{}).userAgent,k=ne(ne(ne({},(u=e.request)===null||u===void 0?void 0:u.headers),p&&{Referer:p}),E&&{"User-Agent":E}),$=ne(ne({},c&&{url:c}),{headers:k});return ne(ne({},e),{request:$})}return e})},t.id="UserAgent",t}(),Xf=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(e,n){e(function(a){var u=n().getIntegration(t);if(u){try{if(u._shouldDropEvent(a,u._previousEvent))return Pe.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{return u._previousEvent=a}return u._previousEvent=a}return a})},t.prototype._shouldDropEvent=function(e,n){return n?!!(this._isSameMessageEvent(e,n)||this._isSameExceptionEvent(e,n)):!1},t.prototype._isSameMessageEvent=function(e,n){var a=e.message,u=n.message;return!(!a&&!u||a&&!u||!a&&u||a!==u||!this._isSameFingerprint(e,n)||!this._isSameStacktrace(e,n))},t.prototype._getFramesFromEvent=function(e){var n=e.exception;if(n)try{return n.values[0].stacktrace.frames}catch{return}else if(e.stacktrace)return e.stacktrace.frames},t.prototype._isSameStacktrace=function(e,n){var a=this._getFramesFromEvent(e),u=this._getFramesFromEvent(n);if(!a&&!u)return!0;if(a&&!u||!a&&u||(a=a,u=u,u.length!==a.length))return!1;for(var c=0;c<u.length;c++){var p=u[c],E=a[c];if(p.filename!==E.filename||p.lineno!==E.lineno||p.colno!==E.colno||p.function!==E.function)return!1}return!0},t.prototype._getExceptionFromEvent=function(e){return e.exception&&e.exception.values&&e.exception.values[0]},t.prototype._isSameExceptionEvent=function(e,n){var a=this._getExceptionFromEvent(n),u=this._getExceptionFromEvent(e);return!(!a||!u||a.type!==u.type||a.value!==u.value||!this._isSameFingerprint(e,n)||!this._isSameStacktrace(e,n))},t.prototype._isSameFingerprint=function(e,n){var a=e.fingerprint,u=n.fingerprint;if(!a&&!u)return!0;if(a&&!u||!a&&u)return!1;a=a,u=u;try{return a.join("")===u.join("")}catch{return!1}},t.id="Dedupe",t}(),Wk=Object.freeze(Object.defineProperty({__proto__:null,GlobalHandlers:Kf,TryCatch:Yf,Breadcrumbs:No,LinkedErrors:Jf,UserAgent:Zf,Dedupe:Xf},Symbol.toStringTag,{value:"Module"})),Qf=function(t){Hn(e,t);function e(n){n===void 0&&(n={});var a=this;return n._metadata=n._metadata||{},n._metadata.sdk=n._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:Po}],version:Po},a=t.call(this,qk,n)||this,a}return e.prototype.showReportDialog=function(n){n===void 0&&(n={});var a=Fe().document;if(!!a){if(!this._isEnabled()){Pe.error("Trying to call showReportDialog with Sentry Client disabled");return}Wf(ne(ne({},n),{dsn:n.dsn||this.getDsn()}))}},e.prototype._prepareEvent=function(n,a,u){return n.platform=n.platform||"javascript",t.prototype._prepareEvent.call(this,n,a,u)},e.prototype._sendEvent=function(n){var a=this.getIntegration(No);a&&a.addSentryBreadcrumb(n),t.prototype._sendEvent.call(this,n)},e}(Ek),eh=[new $f,new Mf,new Yf,new No,new Kf,new Jf,new Xf,new Zf];function Kk(t){if(t===void 0&&(t={}),t.defaultIntegrations===void 0&&(t.defaultIntegrations=eh),t.release===void 0){var e=Fe();e.SENTRY_RELEASE&&e.SENTRY_RELEASE.id&&(t.release=e.SENTRY_RELEASE.id)}t.autoSessionTracking===void 0&&(t.autoSessionTracking=!0),t.sendClientReports===void 0&&(t.sendClientReports=!0),Tk(Qf,t),t.autoSessionTracking&&r3()}function Yk(t){t===void 0&&(t={});var e=Ue(),n=e.getScope();n&&(t.user=ne(ne({},n.getUser()),t.user)),t.eventId||(t.eventId=e.lastEventId());var a=e.getClient();a&&a.showReportDialog(t)}function Jk(){return Ue().lastEventId()}function Zk(){}function Xk(t){t()}function Qk(t){var e=Ue().getClient();return e?e.flush(t):(Pe.warn("Cannot flush events. No client defined."),gt.resolve(!1))}function e3(t){var e=Ue().getClient();return e?e.close(t):(Pe.warn("Cannot flush events and disable SDK. No client defined."),gt.resolve(!1))}function t3(t){return Rr(t)()}function r3(){var t=Fe(),e=t.document;if(typeof e=="undefined"){Pe.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}var n=Ue();typeof n.startSession!="function"||typeof n.captureSession!="function"||(n.startSession({ignoreDuration:!0}),n.captureSession(),gr({callback:function(a){var u=a.from,c=a.to;u===void 0||u===c||(n.startSession({ignoreDuration:!0}),n.captureSession())},type:"history"}))}var n3="sentry.javascript.browser",th={},Do=Fe();Do.Sentry&&Do.Sentry.Integrations&&(th=Do.Sentry.Integrations);var i3=ne(ne(ne({},th),Ik),Wk),s3=Object.freeze(Object.defineProperty({__proto__:null,Integrations:i3,Transports:Bk,get Severity(){return Nt},get Status(){return hr},addGlobalEventProcessor:Zn,addBreadcrumb:hk,captureException:Ef,captureEvent:ck,captureMessage:lk,configureScope:fk,getHubFromCarrier:ir,getCurrentHub:Ue,Hub:Ss,makeMain:Oo,Scope:Jn,startTransaction:yk,SDK_VERSION:Po,setContext:dk,setExtra:pk,setExtras:_k,setTag:vk,setTags:gk,setUser:mk,withScope:Cf,BrowserClient:Qf,injectReportDialog:Wf,eventFromException:jf,eventFromMessage:Bf,defaultIntegrations:eh,forceLoad:Zk,init:Kk,lastEventId:Jk,onLoad:Xk,showReportDialog:Yk,flush:Qk,close:e3,wrap:t3,SDK_NAME:n3},Symbol.toStringTag,{value:"Module"})),a3=vt(s3),o3=ce&&ce.__createBinding||(Object.create?function(t,e,n,a){a===void 0&&(a=n),Object.defineProperty(t,a,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,a){a===void 0&&(a=n),t[a]=e[n]}),u3=ce&&ce.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),l3=ce&&ce.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&o3(e,t,n);return u3(e,t),e};Object.defineProperty(hs,"__esModule",{value:!0}),hs.createSentryWeb=void 0;const rh=l3(a3),c3=t=>{const{dsn:e,env:n,logger:a}=t;if(!e)return a.warn("No Sentry DSN detected, skipping log tracking"),null;const u=typeof n=="string"?n:"staging";return rh.init({dsn:e,environment:u}),rh};hs.createSentryWeb=c3;var f3=ce&&ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ka,"__esModule",{value:!0});var nh=ka.createParser=void 0;const h3=Ci,d3=f3(Qa),_3=is,g3=ls,p3=hs;function v3(t){return new h3.Parser(st(Te({},t),{platformFactories:{createDownloader:e=>new _3.DownloaderWeb(e),createBenchmarksTracker:()=>new d3.default,createLoggerFactory:()=>g3.createLoggerWeb,createSentryFactory:()=>p3.createSentryWeb}}))}nh=ka.createParser=v3;class m3{constructor(e){this._options=e,this._parser=this._initParser()}get designId(){return this._options.designId}get frameLikeIds(){return this._parser.getFrameLikeIds()}parse(e){return this._design||(this._design=this._parser.parse(e)),this._design}_initParser(){return nh(this._options)}}function y3(t){return new wi(st(Te({},t),{platformFactories:{createLoggerFactory:()=>yS,createBenchmarkService:()=>({benchmarkAsync:au})}}))}lt.SourceApiReader=m3,lt.createConverter=y3,Object.defineProperties(lt,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
