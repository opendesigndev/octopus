<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <style>
      body { font-family: sans-serif; background: #500; }
      body>div { margin: 10px; background: #fff; border-radius: 5px;}
      h1 { background: #eee; cursor: pointer; font-size: 120%; border-radius: 5px; }
      h1, .diff { padding: 10px; }
      .diff { display: none; padding-bottom: 30px; }
      .open .diff { display: block; }
      .explanation { margin-bottom: 40px; }
      .box { display: inline-block; width: 20px; height: 20px; margin-left: 20px; position: relative; top: 4px; }
      .box.green { background: #bbffbb; }
      .box.red { background: #ffbbbb; }

      {{jsondiffStyle}}
    </style>
    <title>Octopus Integration tests result</title>
  </head>
  <body>
    {{#each failed}}
      <div>
        <h1 onclick="toggleVisibility(this)">{{name}}</h1>
        <div class="diff">
          <div class="explanation">
            <span class="box green"></span> Expected but missing <span class="box red"></span> Not expected but present
          </div>
          {{{diff}}}
          <div>
            <textarea style="width:100%;height:100px;" onclick="this.select()">{{{json}}}</textarea>
          </div>
        </div>
      </div>
    {{/each}}
    <script>
      function toggleVisibility(obj) {
        obj.parentNode.className = obj.parentNode.className === 'open' ? '' : 'open'
      }
    </script>
  </body>
</html>
